/*! Version: 4.2.0 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.genyDeviceWebPlayer=t():e.genyDeviceWebPlayer=t()}(this,(()=>(()=>{var e={17:e=>{"use strict";e.exports={generateUID:function(){const e=Date.now().toString(36);return e.substring(e.length-5)+Math.random().toString(36).substring(2,7)}}},79:(e,t,n)=>{var i=n(3702),s=n(80),o=n(4739),a=n(8655),r=n(1175);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=r,e.exports=l},80:(e,t,n)=>{var i=n(6025),s=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():s.call(t,n,1),--this.size,!0)}},173:e=>{"use strict";const t={8:"0x01000003",9:"0x01000001",13:"0x01000005",16:"0x01000020",17:"0x01000021",18:"0x01000023",20:"0x01000024",27:"0x01000000",32:"0x20",33:"0x01000016",34:"0x01000017",35:"0x01000011",36:"0x01000010",37:"0x01000012",38:"0x01000013",39:"0x01000014",40:"0x01000015",45:"0x01000006",46:"0x01000007"},n={67:"0x010000cf",86:"0x010000e2",88:"0x010000d0"};e.exports=class{static get name(){return"KeyboardEvents"}constructor(e){this.instance=e,this.instance.keyboardEvents=this,this.isListenerAdded=!1,this.currentlyPressedKeys=new Map,this.instance.store.subscribe((({isKeyboardEventsEnabled:e})=>{e?this.addKeyboardCallbacks():this.removeKeyboardCallbacks()}),["isKeyboardEventsEnabled"]),this.instance.store.dispatch({type:"KEYBOARD_EVENTS_ENABLED",payload:!0})}cancelAllPressedKeys(){this.currentlyPressedKeys.forEach((e=>{const t={type:"KEYBOARD_RELEASE",keychar:"",keycode:e};this.instance.sendEvent(t)})),this.currentlyPressedKeys.clear()}onKeyPress(e){const t=e.charCode;let n=e.key||String.fromCharCode(t);"Spacebar"===n&&(n=" ");let i={type:"KEYBOARD_PRESS",keychar:n,keycode:t};this.instance.sendEvent(i),i={type:"KEYBOARD_RELEASE",keychar:n,keycode:t},this.instance.sendEvent(i)}onKeyDown(e){let i;if(n[e.keyCode]&&e.ctrlKey)i=parseInt(n[e.keyCode],16);else{if(n[e.keyCode]&&e.metaKey){i=parseInt(n[e.keyCode],16);let t={type:"KEYBOARD_PRESS",keychar:"",keycode:i};return this.instance.sendEvent(t),t={type:"KEYBOARD_RELEASE",keychar:"",keycode:i},this.instance.sendEvent(t),e.preventDefault(),e.stopPropagation(),e.returnValue=!1,!1}if(!t[e.keyCode])return!0;i=parseInt(t[e.keyCode],16)}const s={type:"KEYBOARD_PRESS",keychar:"",keycode:i};return this.instance.sendEvent(s),this.currentlyPressedKeys.set(i,i),e.preventDefault(),e.stopPropagation(),e.returnValue=!1,!1}onKeyUp(e){let i;if(n[e.keyCode]&&e.ctrlKey)i=parseInt(n[e.keyCode],16);else{if(!t[e.keyCode])return!0;i=parseInt(t[e.keyCode],16)}const s={type:"KEYBOARD_RELEASE",keychar:"",keycode:i};return this.instance.sendEvent(s),this.currentlyPressedKeys.delete(i),e.preventDefault(),e.stopPropagation(),e.returnValue=!1,!1}addKeyboardCallbacks(){this.isListenerAdded||(this.removeBlurListener=this.instance.addListener(window,"blur",this.cancelAllPressedKeys.bind(this)),this.keyboardCallbacks||(this.keyboardCallbacks=[{event:"keypress",handler:this.onKeyPress.bind(this),removeListener:null},{event:"keydown",handler:this.onKeyDown.bind(this),removeListener:null},{event:"keyup",handler:this.onKeyUp.bind(this),removeListener:null},{event:"click",handler:()=>{this.instance.video.tabIndex=0,this.instance.video.focus()},removeListener:null}]),this.instance.root.focus(),this.keyboardCallbacks.forEach(((e,t,n)=>{n[t].removeListener=this.instance.addListener(this.instance.video,e.event,e.handler)})),this.isListenerAdded=!0)}removeKeyboardCallbacks(){this.keyboardCallbacks&&this.isListenerAdded&&(this.removeBlurListener(),this.keyboardCallbacks.forEach((e=>{e.removeListener()})),this.isListenerAdded=!1)}}},181:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},289:(e,t,n)=>{var i=n(2651);e.exports=function(e){return i(this,e).get(e)}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},343:e=>{"use strict";const t=[{text:"-",value:"0"},{text:"240p",value:"240"},{text:"360p",value:"360"},{text:"480p",value:"480"},{text:"720p",value:"720"},{text:"1080p",value:"1080"}];e.exports=class{static get name(){return"StreamResolution"}constructor(e,t){this.instance=e,this.instance.StreamResolution=this,this.i18n=t||{},this.registerToolbarButton()}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-streamres-button",title:this.i18n.STREAMRES_TITLE||"Quality",onClick:e=>{if("OPTION"===e.target.tagName)return;let n=e.target.querySelector("select");n||(n=document.createElement("select"),n.className="gm-icon-button gm-streamres-button",n.title=this.i18n.STREAMRES_TITLE||"Quality",t.forEach((e=>{n.add(new Option(e.text,e.value))})),n.onchange=()=>{const e={type:"SIZE",width:Number(n.value)};this.instance.sendEvent(e),n.blur()},e.target.appendChild(n))}})}}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var i=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&t.test(e))&&e>-1&&e%1==0&&e<n}},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},436:e=>{"use strict";e.exports=class{static get name(){return"Fullscreen"}constructor(e,t){this.instance=e,this.i18n=t||{},this.instance.addListener(document,"webkitfullscreenchange",this.onFullscreenEvent.bind(this),!1),this.instance.addListener(document,"fullscreenchange",this.onFullscreenEvent.bind(this),!1),this.instance.apiManager.registerFunction({name:"fullscreen",category:"video",fn:()=>{this.fullscreenEnabled()?this.exitFullscreen():this.goFullscreen(this.instance.root)},description:"Toggle fullscreen mode for the video player. If the player is currently in fullscreen, it will exit fullscreen; otherwise, it will enter fullscreen mode."}),this.registerToolbarButton()}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-fullscreen-button",title:this.i18n.FULLSCREEN||"Fullscreen",onClick:()=>{this.fullscreenEnabled()?this.exitFullscreen():this.goFullscreen(this.instance.root)}})}goFullscreen(e){this.instance.wrapper.classList.add("gm-fullscreen"),this.toolbarBtn.setActive(),e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}fullscreenEnabled(){return document.fullscreenElement||document.webkitFullscreenElement}exitFullscreen(){this.instance.wrapper.classList.remove("gm-fullscreen"),this.toolbarBtn.setActive(!1),this.fullscreenEnabled()&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}onFullscreenEvent(){this.fullscreenEnabled()||this.exitFullscreen()}}},493:(e,t,n)=>{"use strict";const i=n(801),{textInput:s}=n(2852);e.exports=class extends i{static get name(){return"Phone"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.phone=this,this.registerToolbarButton(),this.renderWidget()}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-phone-button",title:this.i18n.PHONE_TITLE||"Phone",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.PHONE_TITLE||"Phone",classes:"gm-phone-plugin",width:378,height:642}),t=document.createElement("div");t.className="gm-inputs";const n=document.createElement("div");this.phoneInput=s.createTextInput({classes:"gm-phone-number",placeholder:this.i18n.PHONE_CALL_PLACEHOLDER||"Please enter the phone number",regexFilter:/^[0-9+\-().\s]{1,25}$/,regexValidField:/^[0-9+\-().\s]+$/,messageField:!0,onChange:()=>{this.phoneInput.checkValidity()?this.phoneBtn.disabled=!1:this.phoneBtn.disabled=!0,this.textInput.value.length>0&&this.phoneInput.checkValidity()?this.textBtn.disabled=!1:this.textBtn.disabled=!0,this.phoneInput.checkValidity()?this.phoneInput.setErrorMessage(""):this.phoneInput.setErrorMessage("Invalid phone number")}}),this.phoneBtn=document.createElement("button"),this.phoneBtn.className="gm-btn gm-phone-call",this.phoneBtn.innerHTML=this.i18n.PHONE_CALL||"Call",this.phoneBtn.onclick=this.sendPhoneCallToInstance.bind(this),this.phoneBtn.disabled=!0;const i=this.i18n.PHONE_INCOMING||"Incoming phone number";n.innerHTML="<label>"+i+"</label>",n.className="gm-phone-group",n.appendChild(this.phoneInput.element),n.appendChild(this.phoneBtn),t.appendChild(n);const o=document.createElement("div");this.textInput=document.createElement("textarea"),this.textInput.className="gm-phone-message",this.textInput.placeholder=this.i18n.PHONE_MESSAGE_PLACEHOLDER||"Please enter the incoming message",this.textInput.rows=5,this.instance.addListener(this.textInput,"keyup",(e=>{e.target.value.length>0&&this.phoneInput.checkValidity()?this.textBtn.disabled=!1:this.textBtn.disabled=!0})),this.textBtn=document.createElement("button"),this.textBtn.className="gm-btn gm-phone-send",this.textBtn.innerHTML=this.i18n.PHONE_MESSAGE||"Send message",this.textBtn.onclick=this.sendSMSToInstance.bind(this),this.textBtn.disabled=!0;const a=this.i18n.PHONE_MESSAGE_VALUE||"Message";o.innerHTML="<label>"+a+"</label>",o.className="gm-phone-group",o.appendChild(this.textInput),o.appendChild(this.textBtn),t.appendChild(o),e.appendChild(t)}sendPhoneCallToInstance(e){e&&e.preventDefault();const t={channel:"baseband",messages:["gsm call "+this.phoneInput.getValue()]};this.instance.sendEvent(t)}sendSMSToInstance(e){e&&e.preventDefault();const t={channel:"baseband",messages:["sms send "+this.phoneInput.getValue()+" "+this.textInput.value]};this.instance.sendEvent(t)}}},619:(e,t,n)=>{"use strict";const i=n(801),{chipTag:s}=n(2852),o=n(3065);o.setDefaultLevel("debug"),e.exports=class extends i{static get name(){return"Clipboard"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.clipboard=this,this.clipboard="",this.registerToolbarButton(),this.renderWidget(),this.instance.registerEventCallback("framework",(e=>{const t=e.split(" ");if(3===t.length&&"clipboard"===t[0])try{this.clipboard=decodeURIComponent(escape(window.atob(t[2]))),this.clipboard!==this.clipboardInput.value&&this.container.classList.remove("gm-clipboard-saved"),this.clipboardInput.value=this.clipboard}catch(e){o.warn("Malformed clipboard content")}}))}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-clipboard-button",title:this.i18n.CLIPBOARD_TITLE||"Clipboard",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.CLIPBOARD_TITLE||"Device Clipboard",classes:"gm-clipboard-plugin",width:378,height:484});this.container=e;const t=document.createElement("div");t.className="gm-clipboard-text",t.innerHTML=this.i18n.CLIPBOARD_TEXT||"The text you enter here will be copied to your virtual device's clipboard. Likewise, any text you copy from your virtual device will appear here.",this.clipboardInput=document.createElement("textarea"),this.clipboardInput.className="gm-clipboard-input",this.clipboardInput.placeholder=this.i18n.CLIPBOARD_PLACEHOLDER||"Write your content here",this.clipboardInput.oninput=e=>{this.container.classList.remove("gm-clipboard-saved"),e.target.value.length>0?this.submitBtn.disabled=!1:this.submitBtn.disabled=!0};const n=document.createElement("div");n.className="gm-actions";const i=s.createChip({text:this.i18n.CLIPBOARD_COPIED||"Copied"});this.submitBtn=document.createElement("button"),this.submitBtn.innerHTML=this.i18n.CLIPBOARD_COPY||"Copy to device",this.submitBtn.className="gm-btn gm-clipboard-apply",this.submitBtn.onclick=()=>{this.container.classList.add("gm-clipboard-saved"),this.sendDataToInstance()},n.appendChild(i.element),n.appendChild(this.submitBtn),this.container.appendChild(t),this.container.appendChild(this.clipboardInput),this.container.appendChild(n)}toggleWidget(){super.toggleWidget(),this.instance.store.getters.isWidgetOpened(this.overlayID)&&(this.clipboardInput.value=this.clipboard,this.clipboardInput.focus())}sendDataToInstance(){const e={channel:"framework",messages:["set_device_clipboard "+window.btoa(unescape(encodeURIComponent(this.clipboardInput.value)))]};this.instance.sendEvent(e)}}},659:(e,t,n)=>{var i=n(1873),s=Object.prototype,o=s.hasOwnProperty,a=s.toString,r=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,r),n=e[r];try{e[r]=void 0;var i=!0}catch(e){}var s=a.call(e);return i&&(t?e[r]=n:delete e[r]),s}},695:(e,t,n)=>{var i=n(8096),s=n(2428),o=n(6449),a=n(3656),r=n(361),l=n(7167),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),d=!n&&s(e),h=!n&&!d&&a(e),p=!n&&!d&&!h&&l(e),u=n||d||h||p,m=u?i(e.length,String):[],g=m.length;for(var b in e)!t&&!c.call(e,b)||u&&("length"==b||h&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||r(b,g))||m.push(b);return m}},765:(e,t,n)=>{"use strict";const i=n(801),{switchButton:s}=n(2852);n(3065).setDefaultLevel("debug");const o={SCAN_RECOGNIZED:"scan recognized",SCAN_UNRECOGNIZED:"scan unrecognized",SCAN_DIRTY:"scan dirty",SCAN_TOO_FAST:"scan too_fast",SCAN_PARTIAL:"scan partial",SCAN_INSUFFICIENT:"scan insufficient",SET_AUTO_RECOGNIZE_FALSE:"set auto_recognize false",SET_AUTO_RECOGNIZE_TRUE:"set auto_recognize true",NOTIFY_ALL:"notify all"},a={SCAN_ERROR:"scan error",SCAN_ERROR_TIMEOUT:"scan error timeout",SCAN_ERROR_CANCELED:"scan error canceled",CURRENT_STATUS_IDLE:"current_status idle",CURRENT_STATUS_SCANNING:"current_status scanning",CURRENT_STATUS_ENROLLING:"current_status enrolling",SCAN_START:"scan start",SCAN_SUCCESS:"scan success",AUTO_RECOGNIZE_FALSE:"auto_recognize false",AUTO_RECOGNIZE_TRUE:"auto_recognize true"};e.exports=class extends i{static get name(){return"FingerPrint"}constructor(e,t){if(super(e),this.instance=e,this.i18n=t||{},this.instance.fingerprint=this,this.state=new Proxy({isScanStart:!1,isRecognizedFPByDefault:!1,isEnrolling:!1,isScanning:!1},{set:(e,t,n)=>{const i=e[t];e[t]=n,!e.isEnrolling&&!e.isScanning||e.isRecognizedFPByDefault?this.disableBody():this.enableBody();const s=document.querySelector(".gm-fingerprint-dialog-auth-required-status");switch(t){case"isScanStart":case"isEnrolling":case"isScanning":e.isScanStart&&(e.isEnrolling||e.isScanning)?(s.classList.add("active"),s.setAttribute("data-text",this.i18n.yes||"Yes"),this.toolbarBtn.setIndicator("notification")):(s.classList.remove("active"),s.setAttribute("data-text",this.i18n.no||"No"),e.isRecognizedFPByDefault?this.toolbarBtn.setIndicator("active"):this.toolbarBtn.setIndicator(""));break;case"isRecognizedFPByDefault":n!==i&&(n?this.sendDataToInstance(o.SET_AUTO_RECOGNIZE_TRUE):this.sendDataToInstance(o.SET_AUTO_RECOGNIZE_FALSE)),n?this.toolbarBtn.setIndicator("active"):this.toolbarBtn.setIndicator(""),this.recognizedFPByDefaultStatus.setState(n)}return!0}}),this.registerToolbarButton(),this.renderWidget(),this.instance.registerEventCallback("fingerprint",(e=>this.handleFingerprintEvent(e))),this.instance.store.state.isWebRTCConnectionReady)this.sendDataToInstance(o.NOTIFY_ALL);else{const e=this.instance.store.subscribe((({isWebRTCConnectionReady:t})=>{t&&(this.sendDataToInstance(o.NOTIFY_ALL),e())}))}}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-fingerprint-button",title:this.i18n.FINGERPRINT_TITLE||"Biometrics",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.FINGERPRINT_TITLE||"Biometrics",classes:"gm-fingerprint-plugin",width:378,height:494});e.classList.add("gm-fingerprint-container");const t=document.createElement("div");t.classList.add("gm-fingerprint-dialog-header");const n=document.createElement("div");n.classList.add("gm-fingerprint-dialog-auth-required");const i=document.createElement("span");i.innerHTML=this.i18n.BIOMETRIC_AUTH_REQUIRED||"Biometric authentication required";const a=document.createElement("div");a.classList.add("gm-fingerprint-dialog-auth-required-status"),a.classList.add(this.state.isScanStart?"active":"inactive"),a.classList.remove(this.state.isScanStart?"active":"inactive"),a.setAttribute("data-text",this.state.isScanStart?this.i18n.yes||"Yes":this.i18n.no||"No"),n.appendChild(i),n.appendChild(a);const r=document.createElement("div");r.classList.add("gm-fingerprint-dialog-recognized-fp-by-default");const l=document.createElement("span");l.innerHTML=this.i18n.FINGERPRINT_AUTOMATIC_BIOMETRIC_AUTHENTICATION||"Automatic biometric authentication",this.recognizedFPByDefaultStatus=s.createSwitch({classes:"autoValidationSwitch",onChange:e=>{this.state.isRecognizedFPByDefault=e}}),r.appendChild(l),r.appendChild(this.recognizedFPByDefaultStatus.element),t.appendChild(n),t.appendChild(r),e.appendChild(t);const c=document.createElement("div");c.className="gm-separator",e.appendChild(c);const d=document.createElement("div");d.classList.add("gm-fingerprint-dialog-body");const h=document.createElement("div");h.classList.add("gm-fingerprint-dialog-buttons");[{cmd:"Recognized",message:o.SCAN_RECOGNIZED,onclick:e=>{e.classList.add("gm-loader")}},{cmd:"Unrecognized",message:o.SCAN_UNRECOGNIZED},{cmd:"Dirty sensor",message:o.SCAN_DIRTY},{cmd:"Too fast",message:o.SCAN_TOO_FAST},{cmd:"Partial",message:o.SCAN_PARTIAL},{cmd:"Insufficient",message:o.SCAN_INSUFFICIENT}].forEach((e=>{this.createFingerprintButton(e,h)})),d.appendChild(h),e.appendChild(d),this.disableBody()}createFingerprintButton({cmd:e,message:t,onclick:n},i){const s=document.createElement("div");s.classList.add("gm-fingerprint-dialog-button");const o=document.createElement("div");o.className=`gm-${e.toLowerCase().replace(" ","-")}-fingerprint-image`;const a=document.createElement("span");a.innerHTML=this.i18n[`FINGERPRINT_${e.toUpperCase()}`]||e,s.onclick=()=>{this.sendDataToInstance(t),n&&n(s)},s.appendChild(o),s.appendChild(a),i.appendChild(s)}disableBody(){document.querySelectorAll(".gm-fingerprint-dialog-body .gm-fingerprint-dialog-button").forEach((e=>{e.classList.add("disabled")}))}enableBody(){document.querySelectorAll(".gm-fingerprint-dialog-body .gm-fingerprint-dialog-button").forEach((e=>{e.classList.remove("disabled")}))}handleFingerprintEvent(e){switch(e){case a.SCAN_START:this.state.isScanStart=!0;break;case a.SCAN_SUCCESS:case a.SCAN_ERROR_TIMEOUT:case a.SCAN_ERROR_CANCELED:case a.SCAN_ERROR:this.state.isEnrolling=!1,this.state.isScanning=!1,this.state.isScanStart=!1,Array.from(document.querySelectorAll(".gm-fingerprint-dialog-button")).forEach((e=>{e.classList.remove("gm-loader")})),this.closeWidget();break;case a.CURRENT_STATUS_SCANNING:this.state.isScanning=!0;break;case a.CURRENT_STATUS_ENROLLING:this.state.isEnrolling=!0,this.state.isScanning=!1;break;case a.AUTO_RECOGNIZE_FALSE:this.state.isRecognizedFPByDefault=!1;break;case a.AUTO_RECOGNIZE_TRUE:this.state.isRecognizedFPByDefault=!0}}sendDataToInstance(e){const t={channel:"fingerprint",messages:[e]};this.instance.sendEvent(t)}}},774:e=>{"use strict";e.exports=class{constructor(e,t,n){this.instance=e,this.instance.peerConnectionStats=this,this.connection=t,this.timeoutID=setTimeout((()=>{this.connection.getStats(null).then((e=>{e.forEach((t=>{if("video"===t.kind){if("inbound-rtp"===t.type){const n=e.get(t.codecId);n&&this.logAndBroadcast("codec",n.mimeType)}"track"===t.type&&(this.logAndBroadcast("width",t.frameWidth),this.logAndBroadcast("height",t.frameHeight),this.logAndBroadcast("jitter",Math.round(t.jitterBufferDelay/t.jitterBufferEmittedCount*1e3)))}if("candidate-pair"===t.type&&"succeeded"===t.state){this.logAndBroadcast("rtt",1e3*t.currentRoundTripTime);const n=e.get(t.localCandidateId);this.hideDefaultTurnWarning(),n&&"relay"===n.candidateType?(this.logAndBroadcast("turn",!0),this.instance.options.turn.default?(this.logAndBroadcast("default",!0),this.displayDefaultTurnWarning()):this.logAndBroadcast("default",!1)):this.logAndBroadcast("turn",!1)}}))}))}),n)}logAndBroadcast(e,t){this.instance.dispatchEvent(e,{msg:t})}displayDefaultTurnWarning(){let e="<h1><span>&#9888;</span> Using a default TURN</h1>Performance is not optimal.";const t=document.createElement("li"),n=document.createElement("div");n.classList.add("gm-default-turn-button"),n.classList.add("gm-icon-button");const i=document.createElement("div");i.className="gm-default-turn-used gm-hidden",this.instance.options.connectionFailedURL&&(e+="<br>Click on the icon to learn more.",n.href=this.instance.options.connectionFailedURL,n.target="_blank"),i.innerHTML=e,t.appendChild(i),t.appendChild(n),n.onmouseenter=()=>{i.classList.remove("gm-hidden");const{top:e}=n.getBoundingClientRect();i.style.top=e-i.offsetHeight+i.parentElement.offsetHeight/2+10+"px"},n.onmouseleave=()=>{i.classList.add("gm-hidden")};this.instance.root.querySelector(".gm-toolbar ul").appendChild(t)}hideDefaultTurnWarning(){const e=this.instance.getChildByClass(this.instance.root,"gm-default-turn-button");e&&e.remove()}destroy(){clearTimeout(this.timeoutID),delete this.connection,delete this.instance}}},801:(e,t,n)=>{"use strict";const{generateUID:i}=n(17);class s{constructor(e){this.instance=e,this.overlayID=this.constructor.name||i(),this.widget=null,this.position={x:null,y:null},this.initializeEventListeners()}initializeEventListeners(){this.subscribeToOverlayStateChanges(),this.setupGlobalClickHandler()}subscribeToOverlayStateChanges(){this.instance.store.subscribe((({overlay:e},{overlay:t})=>{const n=e.widgetsOpened.includes(this.overlayID)&&!t.widgetsOpened.includes(this.overlayID),i=!e.widgetsOpened.includes(this.overlayID)&&t.widgetsOpened.includes(this.overlayID);n?this.openOverlay():i&&(0===e.widgetsOpened.length&&(s.modalZIndex=100),this.widget&&(this.widget.style.zIndex=10),this.closeOverlay())}),["overlay.widgetsOpened"])}setupGlobalClickHandler(){s.hasBeenCalled||(this.instance.addListener(document,"click",this.handleClickOutsideOverlay.bind(this)),this.instance.addListener(window,"resize",(()=>{this.instance.store.state.overlay.isOpen&&this.closeAllOverlays()})),s.hasBeenCalled=!0)}createTemplateModal(e={}){const{title:t=null,classes:n="",width:i=null,height:s=null}=e,o=this.createModalElement(n,i,s),a=this.createModalBody(),r=this.createModalHeader(t);return o.appendChild(r),o.appendChild(a),this.initializeModalBehavior(o,r),{modal:o,container:a}}createModalHeader(e){const t=document.createElement("div");t.className="gm-modal-header";const n=document.createElement("div");n.className="gm-modal-header-content";const i=document.createElement("div");i.className="gm-modal-title",i.innerHTML=e||"",n.appendChild(i);const s=this.createCloseButton();n.appendChild(s),t.appendChild(n);const o=document.createElement("div");return o.className="gm-separator",t.appendChild(o),t}createCloseButton(){const e=document.createElement("div");return e.className="gm-modal-close-btn",e.onclick=this.toggleWidget.bind(this),e}createModalBody(){const e=document.createElement("div");return e.className="gm-modal-body",e}createModalElement(e,t,n){const i=document.createElement("div");return i.className=`gm-modal gm-hidden ${e}`,t&&(i.style.width=`${t}px`),n&&(i.style.height=`${n}px`),i}initializeModalBehavior(e,t){this.widget=e,this.instance.root.appendChild(e),this.enableDragBehavior(e,t)}enableDragBehavior(e,t){let n=!1;t.style.cursor="move",this.instance.addListener(t,"mousedown",(t=>{n=!0;let i=!1;const{x:s,y:o}=this.startDragging(e),a=t.clientX-e.offsetLeft,r=t.clientY-e.offsetTop,l=this.instance.wrapper.getBoundingClientRect(),c=this.instance.playerScreenWrapper.getBoundingClientRect(),d=2*this.instance.playerScreenWrapper.offsetTop,h=this.instance.addListener(document,"mousemove",(t=>{n&&requestAnimationFrame((()=>{let n=t.clientX-a,h=t.clientY-r;i=!1;const p=e.offsetWidth,u=e.offsetHeight;n=Math.max(c.left-l.left,Math.min(c.right-l.left-p,n)),h=Math.max(0,Math.min(c.bottom-u-c.top+d,h)),Math.abs(s-n)<30&&Math.abs(o-h)<30&&(n=s,h=o,i=!0),e.style.left=`${n}px`,e.style.top=`${h}px`}))})),p=this.instance.addListener(document,"mouseup",(()=>{e.style.userSelect="initial",n=!1,i?(this.position.x=null,this.position.y=null):(this.position.x=parseInt(e.style.left.replace("px","")),this.position.y=parseInt(e.style.top.replace("px",""))),h(),p()}))}))}startDragging(e){const{button:t}=this.instance.toolbarManager.getButtonById(this.constructor.name),n=this.calculateModalPosition(t,this.instance.options.toolbarPosition);return e.style.position="absolute",e.style.zIndex=++s.modalZIndex,e.style.userSelect="none",n}checkModalPositionOutsideVideoWrapper(){const e=this.instance.playerScreenWrapper.getBoundingClientRect(),t=this.widget.getBoundingClientRect(),n={right:t.right,bottom:t.bottom};return null!==this.position.x&&(n.left=this.position.x,n.right=this.position.x+t.width),null!==this.position.y&&(n.top=this.position.y,n.bottom=this.position.y+t.height),n.right>e.width||n.bottom>e.height}calculateModalPosition(e,t){const n=e.getBoundingClientRect(),i=this.widget.offsetWidth||100,s=this.widget.offsetHeight||200,o=this.instance.wrapper.getBoundingClientRect(),a=this.instance.playerScreenWrapper.getBoundingClientRect(),r=s+n.top>a.bottom?2*this.instance.playerScreenWrapper.offsetTop:this.instance.playerScreenWrapper.offsetTop;let l=0,c=0;if("left"===t)l=a.left-o.left+10,c=n.top-a.top+r,n.top+s>a.bottom&&(c=Math.max(0,Math.min(a.bottom-s-a.top+r-10,c)));else l=a.width-i-10,c=n.top-a.top+r,n.top+s>a.bottom&&(c=Math.max(0,Math.min(a.bottom-s-a.top+r-10,c)));return{x:l,y:c}}handleClickOutsideOverlay(e){!(e.target.closest(".gm-modal")||e.target.closest("video")||e.target.closest(".gm-toolbar")||e.target.classList.contains("gm-dont-close")||e.target.closest(".gm-floating-toolbar"))&&this.instance.store.state.overlay.isOpen&&this.instance.store.dispatch({type:"OVERLAY_OPEN",payload:{toOpen:!1}})}openOverlay(){const{button:e}=this.instance.toolbarManager.getButtonById(this.constructor.name);this.checkModalPositionOutsideVideoWrapper()&&(this.position.x=null,this.position.y=null);const t=null!==this.position.x&&null!==this.position.y?this.position:this.calculateModalPosition(e,this.instance.options.toolbarPosition);this.applyModalPosition(t),this.instance.toolbarManager.setButtonActive(this.constructor.name,!0),this.widget.style.zIndex=++s.modalZIndex,this.instance.store.dispatch({type:"ADD_TRACKED_EVENT",payload:{category:"widget",action:"open",name:this.constructor.name}})}closeOverlay(){this.widget&&this.widget.classList.contains("gm-visible")&&(this.widget.classList.add("gm-hidden"),this.widget.classList.remove("gm-visible"),this.widget.onclose&&this.widget.onclose()),this.instance.toolbarManager.setButtonActive(this.constructor.name,!1)}closeAllOverlays(){this.instance.store.dispatch({type:"OVERLAY_OPEN",payload:{toOpen:!1}})}applyModalPosition(e){this.widget.style.left=`${e.x}px`,this.widget.style.top=`${e.y}px`,this.widget.classList.add("gm-visible"),this.widget.classList.remove("gm-hidden")}toggleWidget(){this.instance.store.dispatch({type:"OVERLAY_OPEN",payload:{overlayID:this.overlayID}})}openWidget(){this.instance.store.dispatch({type:"OVERLAY_OPEN",payload:{overlayID:this.overlayID,toOpen:!0}})}closeWidget(){this.instance.store.dispatch({type:"OVERLAY_OPEN",payload:{overlayID:this.overlayID,toOpen:!1}})}disable(){this.instance.toolbarManager.disableButton(this.constructor.name)}enable(){this.instance.toolbarManager.enableButton(this.constructor.name)}setTitle(e){this.widget.querySelector(".gm-modal-title").innerHTML=e}}s.hasBeenCalled=!1,s.modalZIndex=100,e.exports=s},929:(e,t,n)=>{"use strict";const i=n(801),{textInput:s,chipTag:o}=n(2852),a="0123456789abcdef";e.exports=class extends i{static get name(){return"Identifiers"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.identifiers=this,this.registerToolbarButton(),this.renderWidget(),this.instance.registerEventCallback("settings",(e=>{const t=e.split(" ");if("parameter"!==t[0]||t.length<2)return;const n=t[1].match(/(device_id:)(\w+)/);n&&this.deviceInput.setValue(n[2]);const i=t[1].match(/(android_id:)(\w+)/);i&&this.androidInput.setValue(i[2]),this.container.classList.add("gm-identifiers-saved")}))}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-identifiers-button",title:this.i18n.IDENTIFIERS_TITLE||"Identifiers",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.IDENTIFIERS_TITLE||"Identifiers",classes:"gm-identifiers-plugin",width:378,height:446});this.container=e;const t=document.createElement("div");t.className="gm-inputs";const n=document.createElement("div");n.className="gm-identifier-android";const i=document.createElement("label");i.innerHTML="Android ID",this.androidInput=s.createTextInput({regexFilter:new RegExp(`^[${a}]{0,16}$`),regexValidField:new RegExp(`^[${a}]{16}$`),placeholder:"e.g. 2b76129a48d5eb49",classes:"gm-identifiers-android-input",messageField:!0,onChange:()=>{this.container.classList.remove("gm-identifiers-saved"),this.checkIDsValidity(),this.androidInput.checkValidity()?this.androidInput.setErrorMessage(""):this.androidInput.setErrorMessage("16 characters (0-9, A-F)")}});const r=document.createElement("div");r.className="gm-icon-button gm-identifiers-android-generate",r.onclick=()=>{this.container.classList.remove("gm-identifiers-saved"),this.generateRandomAndroidId()},this.generateRandomAndroidId.bind(this),n.appendChild(this.androidInput.element),n.appendChild(r),t.appendChild(i),t.appendChild(n);const l=document.createElement("div");l.className="gm-identifier-device";const c=document.createElement("label");c.innerHTML="Device ID (IMEI/MEID)",this.deviceInput=s.createTextInput({regexFilter:new RegExp(`^[${a}]{0,15}$`),regexValidField:new RegExp(`^[${a}]{14,15}$`),placeholder:"e.g. 194197097729256",classes:"gm-identifiers-device-input",messageField:!0,onChange:()=>{this.container.classList.remove("gm-identifiers-saved"),this.checkIDsValidity(),this.deviceInput.checkValidity()?this.deviceInput.setErrorMessage(""):this.deviceInput.setErrorMessage("14-15 characters (0-9, A-F)")}});const d=document.createElement("div");d.className="gm-icon-button gm-identifiers-device-generate",d.onclick=()=>{this.container.classList.remove("gm-identifiers-saved"),this.generateRandomDeviceId()},l.appendChild(this.deviceInput.element),l.appendChild(d),t.appendChild(c),t.appendChild(l);const h=document.createElement("div");h.className="gm-actions";const p=document.createElement("div");p.className="gm-separator";const u=o.createChip();h.appendChild(u.element),this.submitBtn=document.createElement("button"),this.submitBtn.innerHTML=this.i18n.IDENTIFIERS_APPLY||"Apply",this.submitBtn.className="gm-btn gm-identifiers-update",h.appendChild(this.submitBtn),this.submitBtn.disabled=!0,this.submitBtn.onclick=this.sendDataToInstance.bind(this),this.container.appendChild(t),this.container.appendChild(p),this.container.appendChild(h)}sendDataToInstance(e){e.preventDefault();const t=this.androidInput.getValue(),n=this.deviceInput.getValue();if(t){const e={channel:"framework",messages:["set parameter android_id:"+t]};this.instance.sendEvent(e)}if(n){const e={channel:"settings",messages:["set parameter device_id:"+n]};this.instance.sendEvent(e)}}generateRandomAndroidId(e){e&&e.preventDefault(),this.androidInput.setValue(this.generateHash(16,a)),this.checkIDsValidity()}generateRandomDeviceId(e){e&&e.preventDefault(),this.deviceInput.setValue(this.generateHash(15,"0123456789")),this.checkIDsValidity()}checkIDsValidity(){this.androidInput.checkValidity()&&this.deviceInput.checkValidity()?this.submitBtn.disabled=!1:this.submitBtn.disabled=!0}generateHash(e,t){let n="";for(let i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}}},938:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},945:(e,t,n)=>{var i=n(79),s=n(8223),o=n(3661);e.exports=function(e,t){var n=this.__data__;if(n instanceof i){var a=n.__data__;if(!s||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},999:(e,t,n)=>{var i=n(9302),s=n(6800);e.exports=function(e){return i((function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:void 0,r=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,r&&s(n[0],n[1],r)&&(a=o<3?void 0:a,o=1),t=Object(t);++i<o;){var l=n[i];l&&e(t,l,i,a)}return t}))}},1033:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1042:(e,t,n)=>{var i=n(6110)(Object,"create");e.exports=i},1175:(e,t,n)=>{var i=n(6025);e.exports=function(e,t){var n=this.__data__,s=i(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}},1331:(e,t,n)=>{var i=n(2552),s=n(8879),o=n(346),a=Function.prototype,r=Object.prototype,l=a.toString,c=r.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=i(e))return!1;var t=s(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}},1420:(e,t,n)=>{var i=n(79);e.exports=function(){this.__data__=new i,this.size=0}},1518:e=>{"use strict";e.exports=[{id:7,name:"5g",label:"5G",icon:"five-G"},{id:6,name:"lte",label:"4G LTE",icon:"four-G"},{id:5,name:"hsdpa",label:"3G HSDPA",icon:"three-G"},{id:4,name:"umts",label:"3G UMTS",icon:"three-G"},{id:3,name:"edge",label:"2G EDGE",icon:"two-G-edge"},{id:2,name:"gprs",label:"2G GPRS",icon:"two-G-gprs"},{id:1,name:"gsm",label:"2G GSM",icon:"two-G-gsm"},{id:0,name:"none",label:"Unlimited",icon:"unlimited"}]},1549:(e,t,n)=>{var i=n(2032),s=n(3862),o=n(6721),a=n(2749),r=n(5749);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=r,e.exports=l},1791:(e,t,n)=>{var i=n(6547),s=n(3360);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var r=-1,l=t.length;++r<l;){var c=t[r],d=o?o(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),a?s(n,c,d):i(n,c,d)}return n}},1811:e=>{var t=Date.now;e.exports=function(e){var n=0,i=0;return function(){var s=t(),o=16-(s-i);if(i=s,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},1864:(e,t,n)=>{"use strict";const i=n(801),{textInput:s,chipTag:o}=n(2852);e.exports=class extends i{static get name(){return"BasebandRIL"}constructor(e,t){super(e),this.instance=e,this.instance.baseband=this,this.i18n=t||{},this.formValid=!1,this.registerToolbarButton(),this.renderWidget(),this.instance.registerEventCallback("baseband",(e=>{this.handleBasebandEvent(e)}))}handleBasebandEvent(e){const t=e.split(" ");t.length<3||("network"===t[0]&&"operator"===t[1]&&this.networkOperatorMMC.setValue(t[2]),"network"===t[0]&&"operator_name"===t[1]&&this.networkOperatorName.setValue(t.slice(2).join(" ")),"sim"===t[0]&&"operator"===t[1]&&this.simOperatorMMC.setValue(t[2]),"sim"===t[0]&&"operator_name"===t[1]&&this.simOperatorName.setValue(t.slice(2).join(" ")),"sim"===t[0]&&"imsi_id"===t[1]&&this.simMSIN.setValue(t[2]),"sim"===t[0]&&"phone_number"===t[1]&&this.simOperatorPhoneNumber.setValue(t[2]),this.checkIfFormIsValid(),this.container.classList.add("gm-baseband-saved"))}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-sim-button",title:this.i18n.BASEBAND_TITLE||"Baseband",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.BASEBAND_TITLE||"Baseband",classes:"gm-baseband-plugin",width:378,height:611});this.container=e;const t=document.createElement("div");t.className="gm-section";const n=document.createElement("div");n.innerHTML=this.i18n.NETWORK_OPERATOR||"Network Operator",n.className="gm-network-operator-section-title",t.appendChild(n);const i=document.createElement("div");i.className="gm-network-operator-section-line";const a=document.createElement("div"),r=document.createElement("label");r.innerHTML="MCC/MNC",this.networkOperatorMMC=s.createTextInput({classes:"gm-network-mmc",regexFilter:/^[0-9]{0,6}$/,regexValidField:/^[0-9]{5,6}$/,placeholder:"eg: 20814",messageField:!0,onChange:()=>{this.checkIfFormIsValid(),this.container.classList.remove("gm-baseband-saved")}}),a.appendChild(r),a.appendChild(this.networkOperatorMMC.element);const l=document.createElement("div"),c=document.createElement("label");c.innerHTML="Name",this.networkOperatorName=s.createTextInput({classes:"gm-network-name",placeholder:"eg: Verizon",messageField:!0,onChange:()=>{this.checkIfFormIsValid(),this.container.classList.remove("gm-baseband-saved")}}),l.appendChild(c),l.appendChild(this.networkOperatorName.element),i.appendChild(a),i.appendChild(l),t.appendChild(i);const d=document.createElement("div");d.className="gm-section";const h=document.createElement("div");h.innerHTML=this.i18n.NETWORK_SIM_OPERATOR||"SIM Operator",h.className="gm-sim-operator-section-title",d.appendChild(h);const p=document.createElement("div");p.className="gm-sim-operator-section-line";const u=document.createElement("div");u.className="gm-sim-operator-section-line";const m=document.createElement("div"),g=document.createElement("label");g.innerHTML="MCC/MNC",this.simOperatorMMC=s.createTextInput({classes:"gm-sim-mmc",placeholder:"eg: 20814",regexFilter:/^[0-9]{0,6}$/,regexValidField:/^[0-9]{5,6}$/,messageField:!0,onChange:()=>{this.checkIfFormIsValid(),this.container.classList.remove("gm-baseband-saved")}}),m.appendChild(g),m.appendChild(this.simOperatorMMC.element);const b=document.createElement("div"),v=document.createElement("label");v.innerHTML="Name",this.simOperatorName=s.createTextInput({classes:"gm-sim-name",placeholder:"eg: AT&T",messageField:!0,onChange:()=>{this.checkIfFormIsValid(),this.container.classList.remove("gm-baseband-saved")}}),b.appendChild(v),b.appendChild(this.simOperatorName.element),p.appendChild(m),p.appendChild(b),d.appendChild(p);const E=document.createElement("div"),C=document.createElement("label");C.innerHTML="MSIN",this.simMSIN=s.createTextInput({classes:"gm-sim-msin",placeholder:"eg: 2176510739",regexFilter:/^[0-9]{0,10}$/,regexValidField:/^[0-9]{9,10}$/,messageField:!0,onChange:()=>{this.checkIfFormIsValid(),this.container.classList.remove("f")}}),E.appendChild(C),E.appendChild(this.simMSIN.element);const f=document.createElement("div"),y=document.createElement("label");y.innerHTML="Phone Number",this.simOperatorPhoneNumber=s.createTextInput({classes:"gm-sim-phone",placeholder:"eg: 8004337300",regexFilter:/^[0-9+\-().\s]{0,25}$/,regexValidField:/^[0-9+\-().\s]+$/,messageField:!0,onChange:()=>{this.checkIfFormIsValid(),this.container.classList.remove("gm-baseband-saved")}}),f.appendChild(y),f.appendChild(this.simOperatorPhoneNumber.element),u.appendChild(E),u.appendChild(f),d.appendChild(u);const T=document.createElement("div");T.className="gm-actions";document.createElement("div").className="gm-separator";const w=o.createChip();T.appendChild(w.element),this.submitBtn=document.createElement("button"),this.submitBtn.innerHTML=this.i18n.BASEBAND_APPLY||"Apply",this.submitBtn.className="gm-btn gm-baseband-update",T.appendChild(this.submitBtn),this.submitBtn.disabled=!0,this.submitBtn.onclick=this.sendDataToInstance.bind(this),e.appendChild(t);const S=document.createElement("div");S.className="gm-separator",e.appendChild(S),e.appendChild(d);const x=document.createElement("div");x.className="gm-separator",e.appendChild(x),e.appendChild(T)}checkSimImsiErrors(){let e=!1;return this.simOperatorMMC.getValue().length?this.simMSIN.getValue().length?(6===this.simOperatorMMC.getValue().length&&9!==this.simMSIN.getValue().length?(this.simMSIN.setErrorMessage("9 digits required"),e=!0):5===this.simOperatorMMC.getValue().length&&10!==this.simMSIN.getValue().length&&(this.simMSIN.setErrorMessage("10 digits required"),e=!0),e):(this.simOperatorMMC.setErrorMessage(""),e):(this.simMSIN.setErrorMessage(""),e)}checkIfFormIsValid(){let e=!0;return this.networkOperatorMMC.setErrorMessage(""),this.simOperatorMMC.setErrorMessage(""),this.simMSIN.setErrorMessage(""),this.simOperatorPhoneNumber.setErrorMessage(""),this.networkOperatorName.setErrorMessage(""),this.simOperatorName.setErrorMessage(""),e=!this.checkSimImsiErrors(),this.networkOperatorMMC.getValue().length&&this.networkOperatorMMC.checkValidity()||(this.networkOperatorMMC.setErrorMessage("5-6 digits"),e=!1),this.simOperatorMMC.getValue().length&&this.simOperatorMMC.checkValidity()||(this.simOperatorMMC.setErrorMessage("5-6 digits"),e=!1),this.simMSIN.getValue().length&&this.simMSIN.checkValidity()||(this.simMSIN.setErrorMessage("9-10 digits"),e=!1),this.simOperatorPhoneNumber.getValue().length&&this.simOperatorPhoneNumber.checkValidity()||(this.simOperatorPhoneNumber.setErrorMessage("Invalid phone"),e=!1),this.networkOperatorName.getValue().length||(this.networkOperatorName.setErrorMessage("Required"),e=!1),this.simOperatorName.getValue().length||(this.simOperatorName.setErrorMessage("Required"),e=!1),this.submitBtn.disabled=!e,e}sendDataToInstance(e){if(e.preventDefault(),!this.checkIfFormIsValid())return;const t=[];if(this.networkOperatorMMC.getValue().length&&t.push("network operator "+this.networkOperatorMMC.getValue()),this.networkOperatorName.getValue().length&&t.push("network operator_name "+this.networkOperatorName.getValue()),this.simOperatorMMC.getValue().length&&t.push("sim operator "+this.simOperatorMMC.getValue()),this.simOperatorName.getValue().length&&t.push("sim operator_name "+this.simOperatorName.getValue()),this.simMSIN.getValue().length&&t.push("sim imsi_id "+this.simMSIN.getValue()),this.simOperatorPhoneNumber.getValue().length&&t.push("sim phone_number "+this.simOperatorPhoneNumber.getValue()),t.length>0){const e={channel:"baseband",messages:t};this.instance.sendEvent(e)}this.container.classList.add("gm-baseband-saved")}}},1873:(e,t,n)=>{var i=n(9325).Symbol;e.exports=i},1882:(e,t,n)=>{var i=n(2552),s=n(3805);e.exports=function(e){if(!s(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1961:(e,t,n)=>{var i=n(9653);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},2032:(e,t,n)=>{var i=n(1042);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},2123:(e,t,n)=>{"use strict";const i=n(3065);i.setDefaultLevel("debug");const s=Object.freeze({Xbox360:Symbol("Xbox360"),XboxOne:Symbol("XboxOne"),Dualshock4:Symbol("DualShock4")});e.exports=class{constructor(e){this.instance=e,this.instance.gamepadManager=this,this.instance.gamepadEventsEnabled=!0,this.isRunning=!1,this.gamepadInfos=[["GPD Win 2 X-Box Controller",s.Xbox360,121,6356],["Thrustmaster Gamepad GP XID",s.Xbox360,1103,45862],["Xbox 360 Controller",s.Xbox360,1118,654],["Xbox 360 Controller v2",s.Xbox360,1118,655],["Xbox 360 Wireless Dongle",s.Xbox360,1118,657],["Xbox 360 Big Button IR",s.Xbox360,1118,672],["Xbox 360 Controller",s.Xbox360,1118,673],["Xbox One Controller (1537)",s.XboxOne,1118,733],["Xbox One Controller (Firmware 2015)",s.XboxOne,1103,45862],["Xbox One S Controller (Bluetooth)",s.XboxOne,1118,736],["Xbox One Elite Controller",s.XboxOne,1118,739],["Xbox One S Controller (1708)",s.XboxOne,1118,746],["Xbox One S Controller (1708) (Bluetooth)",s.XboxOne,1118,765],["Xbox One Controller",s.XboxOne,1118,767],["Xbox One Elite Series 2",s.XboxOne,1118,2816],["Xbox 360 Wireless Receiver",s.Xbox360,1118,1817],["Xbox Series X/S Controller",s.XboxOne,1118,2834],["Xbox Series X/S Controller",s.XboxOne,1118,2835],["Logitech Gamepad F310",s.Xbox360,1133,49693],["Logitech Gamepad F510",s.Xbox360,1133,49694],["Logitech Gamepad F710",s.Xbox360,1133,49695],["Logitech Chillstream Controller",s.Xbox360,1133,49730],["HORI Pad Switch",s.Xbox360,3853,193],["HORI Pokken Tournament DX Pro Pad",s.Xbox360,3853,146],["HORI Wireless Switch Pad",s.Xbox360,3853,246],["HORI Battle Pad",s.Xbox360,3853,220],["PowerA Wired Controller Plus/PowerA Wired Gamecube Controller",s.Xbox360,8406,42769],["PDP Wired Fight Pad Pro for Nintendo Switch",s.Xbox360,3695,389],["PDP Faceoff Wired Pro Controller for Nintendo Switch",s.Xbox360,3695,384],["PDP Faceoff Deluxe Wired Pro Controller for Nintendo Switch",s.Xbox360,3695,385],["Nintendo Switch Pro Controller",s.Xbox360,1406,8201],["PlayStation 3 Controller",s.Dualshock4,1356,616],["PlayStation 3 Controller",s.Dualshock4,2341,5],["PlayStation 3 Controller",s.Dualshock4,34952,776],["Afterglow PS3",s.Dualshock4,6708,2102],["HORI horipad4 PS3",s.Dualshock4,3853,110],["HORI horipad4 PS4",s.Dualshock4,3853,102],["HORI Fighting commander PS3",s.Dualshock4,3853,95],["HORI Fighting commander PS4",s.Dualshock4,3853,94],["Madcats Fightpad Pro PS4",s.Dualshock4,1848,33360],["Venom Arcade Stick",s.Dualshock4,121,6170],["PC Twin Shock Controller",s.Dualshock4,121,6],["Digiflip GP006",s.Dualshock4,9571,1315],["SRXJ-PH2400",s.Dualshock4,4607,13105],["ShanWan PS3",s.Dualshock4,8380,21760],["Firestorm Dual Analog 3",s.Dualshock4,1103,45845],["Horipad 3",s.Dualshock4,3853,77],["HORI BDA GP1",s.Dualshock4,3853,9],["Green Asia",s.Dualshock4,3727,8],["Real Arcade Pro 4",s.Dualshock4,3853,106],["Rock Candy PS4",s.Dualshock4,3695,286],["Afterglow PS3",s.Dualshock4,3695,532],["JC-U4113SBK",s.Dualshock4,1390,8211],["Madcatz Fightstick Pro",s.Dualshock4,1848,34872],["Afterglow PS3",s.Dualshock4,6708,2102],["Quanba Q1 fight stick",s.Dualshock4,3888,4352],["HORI fighting mini stick",s.Dualshock4,3853,135],["BTP 2163",s.Dualshock4,33664,3],["PS2 ACME GA-D5",s.Dualshock4,4933,4096],["SpeedLink Strike FX",s.Dualshock4,3727,12405],["Rock Candy PS3",s.Dualshock4,3695,296],["Quanba Drone",s.Dualshock4,11298,8192],["Cyborg V3",s.Dualshock4,1699,63010],["Thrustmaster wireless 3-1",s.Dualshock4,1103,53255],["Gioteck vx2",s.Dualshock4,9712,33731],["JC-U3412SBK",s.Dualshock4,1464,4102],["Power A PS3",s.Dualshock4,8406,22381],["PDP Afterglow Wireless PS3 Controller",s.Dualshock4,3695,4884],["Mad Catz Alpha PS3 mode",s.Dualshock4,1848,12672],["Mad Catz Alpha PS4 mode",s.Dualshock4,1848,33152],["Victrix Pro FS",s.Dualshock4,3695,515],["PlayStation 4 Controller",s.Dualshock4,1356,1476],["PlayStation 4 Controller V2",s.Dualshock4,1356,2508],["PlayStation 4 Wireless Dongle",s.Dualshock4,1356,2976],["PS5 DualSense Controller",s.Dualshock4,1356,3302],["HORI Real Arcade Pro 4",s.Dualshock4,3853,138],["HORIPAD 4 FPS",s.Dualshock4,3853,85],["HORIPAD 4 FPS Plus",s.Dualshock4,3853,102],["HORIPAD 4 FPS Plus",s.Dualshock4,1848,33668],["Mad Catz FightPad Pro PS4",s.Dualshock4,1848,33360],["Mad Catz Fightstick TE S+",s.Dualshock4,1848,33668],["Armor Armor 3 Pad PS4",s.Dualshock4,3090,3600],["EMIO PS4 Elite Controller",s.Dualshock4,3090,7414],["Razer Raiju PS4 Controller",s.Dualshock4,5426,4096],["Razer Panthera PS4 Controller",s.Dualshock4,5426,1025],["STRIKEPAD PS4 Grip Add-on",s.Dualshock4,1356,1477],["Nacon Revolution Pro Controller",s.Dualshock4,5227,3329],["Nacon Revolution Pro Controller V2",s.Dualshock4,5227,3330],["HORI TAC4",s.Dualshock4,3853,160],["HORI TAC PRO",s.Dualshock4,3853,156],["Hitbox Arcade Stick",s.Dualshock4,3090,3830],["Venom Arcade Stick",s.Dualshock4,121,6171],["Mad Catz FightPad PRO",s.Dualshock4,1848,12880],["HORI mini wired gamepad",s.Dualshock4,3853,238],["Mad Catz FightStick TE 2+ PS4",s.Dualshock4,1848,33921],["Mad Catz FightStick TE 2",s.Dualshock4,1848,33920],["Armor 3, Level Up Cobra",s.Dualshock4,30021,260],["Razer Raiju 2 Tournament Edition (USB)",s.Dualshock4,5426,4103],["Razer Raiju 2 Tournament Edition (BT)",s.Dualshock4,5426,4106],["Razer Raiju 2 Ultimate Edition (USB)",s.Dualshock4,5426,4100],["Razer Raiju 2 Ultimate Edition (BT)",s.Dualshock4,5426,4105],["Razer Panthera Evo Fightstick",s.Dualshock4,5426,4104],["Astro C40",s.Dualshock4,39046,37],["Game:Pad 4",s.Dualshock4,3090,3605],["PS4 Fun Controller",s.Dualshock4,16385,260],["Elecom JC-U3613M",s.Xbox360,1390,8196],["Saitek P3600",s.Xbox360,1699,62746],["Mad Catz Wired Xbox 360 Controller",s.Xbox360,1848,18198],["Mad Catz Street Fighter IV FightStick SE",s.Xbox360,1848,18200],["Mad Catz Xbox 360 Controller",s.Xbox360,1848,18214],["Mad Catz Street Fighter IV FightPad",s.Xbox360,1848,18216],["Mad Catz MicroCon Gamepad",s.Xbox360,1848,18230],["Mad Catz Wired Xbox 360 Controller (SFIV)",s.Xbox360,1848,18232],["Mad Catz Beat Pad",s.Xbox360,1848,18240],["Mad Catz FightStick TE 2",s.XboxOne,1848,18945],["Mad Catz Xbox controller - MW2",s.Xbox360,1848,46886],["Mad Catz JOYTECH NEO SE Advanced GamePad",s.Xbox360,1848,48879],["Saitek Cyborg Rumble Pad - PC/Xbox 360",s.Xbox360,1848,51970],["Saitek P3200 Rumble Pad - PC/Xbox 360",s.Xbox360,1848,51971],["Super SFIV FightStick TE S",s.Xbox360,1848,63288],["HSM3 Xbox360 dancepad",s.Xbox360,3695,261],["Afterglow AX.1 Gamepad for Xbox 360",s.Xbox360,3695,275],["Rock Candy Gamepad Wired Controller",s.Xbox360,3695,287],["Xbox 360 Wired Controller",s.Xbox360,3695,307],["Afterglow Prismatic Wired Controller",s.XboxOne,3695,313],["PDP Xbox One Controller",s.XboxOne,3695,314],["Rock Candy Wired Controller for Xbox One",s.XboxOne,3695,326],["PDP Marvel Xbox One Controller",s.XboxOne,3695,327],["PDP Xbox One Arcade Stick",s.XboxOne,3695,348],["PDP Xbox One Controller",s.XboxOne,3695,353],["PDP Xbox One Controller",s.XboxOne,3695,354],["PDP Xbox One Controller",s.XboxOne,3695,355],["PDP Battlefield One",s.XboxOne,3695,356],["PDP Titanfall 2",s.XboxOne,3695,357],["Pelican PL-3601 'TSZ' Wired Xbox 360 Controller",s.Xbox360,3695,513],["Afterglow Gamepad for Xbox 360",s.Xbox360,3695,531],["Rock Candy Gamepad for Xbox 360",s.Xbox360,3695,543],["Rock Candy Gamepad for Xbox One 2015",s.XboxOne,3695,582],["Logic3 Controller",s.Xbox360,3695,769],["Rock Candy Gamepad for Xbox One 2016",s.XboxOne,3695,838],["Logic3 Controller",s.Xbox360,3695,1025],["Afterglow AX.1 Gamepad for Xbox 360",s.Xbox360,3695,1043],["PDP Xbox 360 Controller",s.Xbox360,3695,1281],["PDP Afterglow AX.1",s.Xbox360,3695,63744],["Hori Co. DOA4 FightStick",s.Xbox360,3853,10],["Hori PadEX Turbo",s.Xbox360,3853,12],["Hori Fighting Stick EX2",s.Xbox360,3853,13],["Hori Real Arcade Pro.EX",s.Xbox360,3853,22],["Hori Real Arcade Pro VX",s.Xbox360,3853,27],["Hori Real Arcade Pro Hayabusa (USA) Xbox One",s.XboxOne,3853,99],["HORIPAD ONE",s.XboxOne,3853,103],["Hori Real Arcade Pro V Kai Xbox One",s.XboxOne,3853,120],["Nacon GC-100XF",s.Xbox360,4553,22e3],["Honey Bee Xbox360 dancepad",s.Xbox360,4779,4],["PDP AFTERGLOW AX.1",s.Xbox360,4779,769],["Mortal Kombat Klassic FightStick",s.Xbox360,4779,771],["RedOctane Guitar Hero X-plorer",s.Xbox360,5168,18248],["RedOctane Controller",s.Xbox360,5168,63489],["BigBen Interactive XBOX 360 Controller",s.Xbox360,5227,1537],["Razer Sabertooth",s.Xbox360,5426,55],["Razer Atrox Arcade Stick",s.XboxOne,5426,2560],["Razer Wildcat",s.XboxOne,5426,2563],["Power A Mini Pro Elite",s.Xbox360,5604,16128],["Xbox Airflo wired controller",s.Xbox360,5604,16138],["Batarang Xbox 360 controller",s.Xbox360,5604,16144],["Joytech Neo-Se Take2",s.Xbox360,5678,48879],["Razer Onza Tournament Edition",s.Xbox360,5769,64768],["Razer Onza Classic Edition",s.Xbox360,5769,64769],["Razer Sabertooth",s.Xbox360,5769,65024],["Harmonix Rock Band Guitar",s.Xbox360,7085,2],["Harmonix Rock Band Drumkit",s.Xbox360,7085,3],["Mad Catz Xbox 360 Controller",s.Xbox360,7085,61462],["Mad Catz Street Fighter IV SE Fighting Stick",s.Xbox360,7085,61464],["Mad Catz Brawlstick for Xbox 360",s.Xbox360,7085,61465],["Mad Cats Ghost Recon FS GamePad",s.Xbox360,7085,61473],["MLG Pro Circuit Controller (Xbox)",s.Xbox360,7085,61475],["Mad Catz Call Of Duty",s.Xbox360,7085,61477],["Mad Catz FPS Pro",s.Xbox360,7085,61479],["Street Fighter IV FightPad",s.Xbox360,7085,61480],["Mad Catz Fightpad",s.Xbox360,7085,61486],["Mad Catz MicroCon GamePad Pro",s.Xbox360,7085,61494],["Street Fighter IV FightStick TE",s.Xbox360,7085,61496],["Mad Catz MvC2 TE",s.Xbox360,7085,61497],["Mad Catz SFxT Fightstick Pro",s.Xbox360,7085,61498],["Street Fighter IV Arcade Stick TE - Chun Li",s.Xbox360,7085,61501],["Mad Catz MLG FightStick TE",s.Xbox360,7085,61502],["Mad Catz FightStick SoulCaliber",s.Xbox360,7085,61503],["Mad Catz FightStick TES+",s.Xbox360,7085,61506],["Mad Catz FightStick TE2",s.Xbox360,7085,61568],["HoriPad EX2 Turbo",s.Xbox360,7085,62721],["Hori Real Arcade Pro.VX SA",s.Xbox360,7085,62722],["Hori Fighting Stick VX",s.Xbox360,7085,62723],["Hori Real Arcade Pro. EX",s.Xbox360,7085,62724],["Hori Fighting Stick EX2B",s.Xbox360,7085,62725],["Hori Real Arcade Pro.EX Premium VLX",s.Xbox360,7085,62726],["Harmonix Xbox 360 Controller",s.Xbox360,7085,63744],["Gamestop Xbox 360 Controller",s.Xbox360,7085,63745],["Tron Xbox 360 controller",s.Xbox360,7085,63747],["PDP Versus Fighting Pad",s.Xbox360,7085,63748],["MortalKombat FightStick",s.Xbox360,7085,63750],["MadCatz GamePad",s.Xbox360,7085,64001],["Razer Onza TE",s.Xbox360,7085,64768],["Razer Onza",s.Xbox360,7085,64769],["Razer Atrox Arcade Stick",s.Xbox360,9414,20480],["PowerA MINI PROEX Controller",s.Xbox360,9414,21248],["Xbox Airflo wired controller",s.Xbox360,9414,21251],["Xbox 360 Pro EX Controller",s.Xbox360,9414,21258],["PowerA Pro Ex",s.Xbox360,9414,21274],["FUS1ON Tournament Controller",s.Xbox360,9414,21399],["PowerA Xbox One Mini Wired Controller",s.XboxOne,9414,21530],["Xbox ONE spectra",s.XboxOne,9414,21546],["PowerA Xbox One wired controller",s.XboxOne,9414,21562],["Hori XBOX 360 EX 2 with Turbo",s.Xbox360,9414,21760],["Hori Real Arcade Pro VX-SA",s.Xbox360,9414,21761],["Hori Fighting Stick VX Alt",s.Xbox360,9414,21762],["Hori Fighting Edge",s.Xbox360,9414,21763],["Hori SOULCALIBUR V Stick",s.Xbox360,9414,21766],[" GEM Xbox controller",s.Xbox360,9414,21773],["Hori Real Arcade Pro V Kai 360",s.Xbox360,9414,21774],["PowerA FUSION Pro Controller",s.XboxOne,9414,21786],["PowerA FUSION Controller",s.XboxOne,9414,22042],["Thrustmaster",s.Xbox360,9414,23298],["Thrustmaster Ferrari 458 Racing Wheel",s.Xbox360,9414,23299],["Razer Sabertooth",s.Xbox360,9414,23812],["Rock Candy Gamepad for Xbox 360",s.Xbox360,9414,64254],["Stadia Controller",s.Xbox360,6353,37888]],this.currentGamepads=[]}addGamepadCallbacks(){this.instance.addListener(window,"gamepadconnected",this.onGamepadConnected.bind(this)),this.instance.addListener(window,"gamepaddisconnected",this.onGamepadDisconnected.bind(this))}onGamepadConnected(e){this.instance.store.dispatch({type:"ADD_TRACKED_EVENT",payload:{category:"gamepad",action:"plugged"}});const t=new CustomEvent("gm-gamepadConnected",{detail:this.parseGamepad(e.gamepad)});window.dispatchEvent(t)}onGamepadDisconnected(e){const t=new CustomEvent("gm-gamepadDisconnected",{detail:this.parseGamepad(e.gamepad)});window.dispatchEvent(t),this.stopListeningInputs(e.gamepad.index)}getRawGamepads(){return navigator.getGamepads()}getGamepads(){const e=[],t=this.getRawGamepads();for(let n=0;n<t.length;n++)t[n]&&e.push(this.parseGamepad(t[n]));return e}getRawGamepadByGuestIndex(e){for(let t=0;t<this.currentGamepads.length;t++)if(this.currentGamepads[t].guestIndex===e)return this.getRawGamepads()[t]}getInfosFromID(e,t){return this.gamepadInfos.find((n=>n[2]===e&&n[3]===t))}listenForInputs(e,t){this.currentGamepads[e]={guestIndex:t,buttons:[],axes:[]},this.isRunning||this.loop()}stopListeningInputs(e){this.currentGamepads.splice(e,1)}computeValueInNewRange(e,t,n,i,s){const o=Math.abs(t-e);if(0===o)return n;return(s-e)*Math.abs(i-n)/o+n}loop(){if(0===this.currentGamepads.length)return void(this.isRunning=!1);this.isRunning=!0;const e=this.getRawGamepads();for(const t of e)if(t&&this.currentGamepads[t.index]){for(let e=0;e<t.buttons.length;e++){const n=this.currentGamepads[t.index].buttons.indexOf(e);if(!t.buttons[e].pressed||-1!==n&&6!==e&&7!==e){if(!t.buttons[e].pressed&&-1!==n){this.currentGamepads[t.index].buttons.splice(n,1);const i=new CustomEvent("gm-gamepadButtonReleased",{detail:{gamepadIndex:this.currentGamepads[t.index].guestIndex,buttonIndex:e,value:t.buttons[e].value}});window.dispatchEvent(i)}}else{-1===n&&this.currentGamepads[t.index].buttons.push(e);const i=new CustomEvent("gm-gamepadButtonPressed",{detail:{gamepadIndex:this.currentGamepads[t.index].guestIndex,buttonIndex:e,value:t.buttons[e].value}});window.dispatchEvent(i)}}for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==this.currentGamepads[t.index].axes[e]){this.currentGamepads[t.index].axes[e]=t.axes[e];const n=new CustomEvent("gm-gamepadAxis",{detail:{gamepadIndex:this.currentGamepads[t.index].guestIndex,axisIndex:e,value:t.axes[e]}});window.dispatchEvent(n)}}window.requestAnimationFrame(this.loop.bind(this))}parseGamepad(e){const t=-1!==navigator.userAgent.indexOf("Firefox"),n={hostIndex:e.index,name:e.id,power:"unknown",controllerType:s.Xbox360,vendor:"Default",vendorID:0,productID:0,state:e.connected?"plugged":"undefined",guestIndex:this.currentGamepads[e.index]?.guestIndex};if(t){const t=/^([0-9a-f]{1,4})-([0-9a-f]{1,4})-\s*(.*)\s*$/i,i=e.id.match(t);i&&(n.vendorID=Number("0x"+i[1]),n.productID=Number("0x"+i[2]),n.name=i[3])}else{const t=/(.+) \(((.+) )?Vendor: (.+) Product: (.+)\)/i,i=e.id.match(t);i&&(n.name=i[1],n.vendor=i[2],n.vendorID=Number("0x"+i[i.length-2]),n.productID=Number("0x"+i[i.length-1]))}const i=this.instance.gamepadManager.getInfosFromID(n.vendorID,n.productID);return i&&(n.name=i[0]+" ("+n.name+")",n.controllerType=i[1]),n}vibration(e,t,n){const s=this.getRawGamepadByGuestIndex(e);if(s)if(s.vibrationActuator){const o=s.vibrationActuator;if(o.playEffect){const e=this.computeValueInNewRange(0,255,0,1,t.toFixed(1)),i=this.computeValueInNewRange(0,255,0,1,n.toFixed(1));o.playEffect("dual-rumble",{startDelay:0,duration:200,weakMagnitude:e,strongMagnitude:i})}else i.error(`could not use vibration actuator for controller ${e}`)}else if(s.hapticActuators&&s.hapticActuators[0]){const t=s.hapticActuators[0];t.pulse?t.pulse(n,200):i.error(`could not use haptic actuator for controller ${e}`)}else i.error(`no vibration actuator for controller ${e}`)}}},2265:e=>{"use strict";const t="0x01000022",n="0x01000005",i="0x01000090",s="gm-rotation";e.exports=class{static get name(){return"ButtonsEvents"}constructor(e,t){this.instance=e,this.i18n=t||{},this.instance.buttonsEvents=this,this.instance.options.rotation&&this.registerToolbarButton("ROTATE",s,"gm-rotation",t.BUTTONS_ROTATE||"Rotate",!1),this.instance.options.volume&&(this.registerToolbarButton("VOLUME_DOWN","0x01000070","gm-sound-down",t.BUTTONS_SOUND_DOWN||"Sound down",!1),this.registerToolbarButton("VOLUME_UP","0x01000072","gm-sound-up",t.BUTTONS_SOUND_UP||"Sound up",!1)),this.instance.options.navbar&&(this.registerToolbarButton("RECENT_APP","0x010000be","gm-recent",t.BUTTONS_RECENT_APPS||"Recent applications",!0),this.registerToolbarButton("HOMEPAGE",i,"gm-home",t.BUTTONS_HOME||"Home",!0),this.registerToolbarButton("BACK","0x01000061","gm-back",t.BUTTONS_BACK||"Back",!0)),this.instance.options.power&&this.registerToolbarButton("POWER","0x0100010b","gm-power",t.BUTTONS_POWER||"Power",!0)}keyPressEvent(e,t){const n={type:"KEYBOARD_PRESS",keychar:t,keycode:e};this.instance.sendEvent(n)}keyReleaseEvent(e,t){const n={type:"KEYBOARD_RELEASE",keychar:t,keycode:e};this.instance.sendEvent(n)}mouseButtonPressEvent(e){const{androidkeycode:s}=e.target.dataset.androidkeycode?e.target.dataset:e.target.children[0].dataset;if(s)if(s===i)this.keyPressEvent(parseInt(t),""),this.keyPressEvent(parseInt(n),"");else if("0x"===s.substring(0,2)){const e=parseInt(s,16);this.keyPressEvent(e,"0\n")}}mouseButtonReleaseEvent(e){const{androidkeycode:o}=e.target.dataset.androidkeycode?e.target.dataset:e.target.children[0].dataset;if(o)if(o===i)this.keyReleaseEvent(parseInt(n),""),this.keyReleaseEvent(parseInt(t),"");else if(o===s){const e={type:"ROTATE"};this.instance.sendEvent(e)}else if("0x"===o.substring(0,2)){const e=parseInt(o,16);this.keyReleaseEvent(e,"0\n")}}disableRotation(){this.instance.toolbarManager.disableButton(this.constructor.name+"_ROTATE")}enableRotation(){this.instance.toolbarManager.enableButton(this.constructor.name+"_ROTATE")}registerToolbarButton(e,t,n,i){this.instance.toolbarManager.registerButton({id:this.constructor.name+"_"+e,iconClass:n,title:i,dataAttributes:{androidKeycode:t},onMousedown:this.mouseButtonPressEvent.bind(this),onMouseup:this.mouseButtonReleaseEvent.bind(this)})}}},2376:(e,t,n)=>{"use strict";const i=n(801),{slider:s,switchButton:o,textInput:a}=n(2852);e.exports=class extends i{static get name(){return"Battery"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.battery=this,this.registerToolbarButton(),this.renderWidget(),this.instance.registerEventCallback("battery",(e=>{const t=e.split(" ").splice(-2);2===t.length&&(this.chargingInput.setState("discharging"!==t[0]),this.updateUIBatteryChargingState(),this.chargeSlider.setValue(t[1],!1),this.chargeInput.setValue(t[1]),this.updateUIBatteryChargingPercent(t[1]))}))}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-battery-button",title:this.i18n.BATTERY_TITLE||"Battery",onClick:()=>this.toggleWidget()})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.BATTERY_TITLE||"Battery",classes:"gm-battery-plugin",width:378,height:331}),t=document.createElement("div");t.className="gm-inputs";const n=this.i18n.BATTERY_CHARGE_LEVEL||"Charge level";t.innerHTML="<label>"+n+"</label>",t.appendChild(this.createLevelSection());const i=document.createElement("label");i.innerHTML=this.i18n.BATTERY_CHARGE_STATE||"State of charge",t.appendChild(i),t.appendChild(this.createChargingSection()),e.appendChild(t)}createChargingSection(){const e=document.createElement("div");return this.chargingStatus=document.createElement("div"),e.className="gm-charging-group",this.chargingImage=document.createElement("div"),this.chargingImage.className="gm-charging-image",e.appendChild(this.chargingImage),this.chargingInput=o.createSwitch({onChange:()=>{this.sendDataToInstance(),this.updateUIBatteryChargingState()}}),this.chargingStatus.className="gm-charging-status",this.chargingStatus.innerHTML="Not charging",e.appendChild(this.chargingStatus),e.appendChild(this.chargingInput.element),e}createLevelSection(){this.chargeGroup=document.createElement("div"),this.chargeGroup.className="gm-charge-level-group";const e=document.createElement("div");e.className="gm-charge-image-group";const t=document.createElement("div"),n=document.createElement("div");n.className="gm-charge-image-overlay-container",this.chargeImageOverlay=document.createElement("div"),t.className="gm-charge-image",this.chargeImageOverlay.className="gm-charge-image-overlay",this.chargeImageOverlay.style.height="50%;",e.appendChild(t),n.appendChild(this.chargeImageOverlay),e.appendChild(n),this.chargeGroup.appendChild(e);const i=document.createElement("div");return i.style.display="flex",this.chargeSlider=s.createSlider({min:0,max:100,value:50,onChange:e=>{this.chargeInput.setValue(e),this.updateUIBatteryChargingPercent(e),this.sendDataToInstance()},onCursorMove:e=>{this.chargeInput.setValue(e),this.updateUIBatteryChargingPercent(e)}}),i.appendChild(this.chargeSlider.element),this.chargeGroup.appendChild(i),this.chargeInput=a.createTextInput({appendText:"%",value:"50",regexFilter:/^(0?[0-9]{1,2}|100)$/,classes:"gm-charge-input",onChange:e=>{this.chargeSlider.setValue(e),this.updateUIBatteryChargingPercent(e),this.sendDataToInstance()},onBlur:e=>{""===e&&this.chargeInput.setValue("0",!0)}}),this.instance.addListener(this.chargeInput.element,"keydown",(e=>{"ArrowUp"===e.key?(e.preventDefault(),this.chargeInput.setValue(Math.min(100,Number(this.chargeInput.getValue())+1),!0)):"ArrowDown"===e.key&&(e.preventDefault(),this.chargeInput.setValue(Math.max(0,Number(this.chargeInput.getValue())-1),!0))})),this.chargeGroup.appendChild(this.chargeInput.element),this.chargeGroup}updateUIBatteryChargingState(){this.chargingImage.classList[this.chargingInput.getState()?"add":"remove"]("charging");const e=this.i18n.BATTERY_CHARGING||"Charging",t=this.i18n.BATTERY_DISCHARGING||"Not charging";this.chargingStatus.innerHTML=this.chargingInput.getState()?e:t}updateUIBatteryChargingPercent(e){return e=Number(e),!Number.isNaN(e)&&(e=Math.min(Math.max(0,e),100),this.chargeImageOverlay.style.cssText="height: calc( "+e+"% + 1px);",this.chargeGroup.classList.remove("low","medium"),e<=10?this.chargeGroup.classList.add("low"):e<=20&&this.chargeGroup.classList.add("medium"),!0)}sendDataToInstance(){const e={channel:"battery",messages:["set state level "+Number(this.chargeInput.getValue()),"set state status "+(this.chargingInput.getState()?"charging":"discharging")]};this.instance.sendEvent(e)}}},2428:(e,t,n)=>{var i=n(7534),s=n(346),o=Object.prototype,a=o.hasOwnProperty,r=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return s(e)&&a.call(e,"callee")&&!r.call(e,"callee")};e.exports=l},2477:(e,t,n)=>{"use strict";const i=n(5588),s=n(2265),o=n(436),a=n(619),r=n(8452),l=n(7880),c=n(6369),d=n(343),h=n(3794),p=n(173),u=n(4144),m=n(3535),g=n(774),b=n(7766),v=n(9106),E=n(9413),C=n(9814),f=n(6717),y=n(2376),T=n(929),w=n(4503),S=n(493),x=n(1864),k=n(6378),L=n(2123),I=n(765),D=n(7394),{generateUID:A}=n(17),M=n(3065);M.setDefaultLevel("debug"),e.exports=class{constructor(e,t){if(this.timeoutCallbacks=[],this.options=t,this.initialized=!1,this.reconnecting=!1,this.touchEventsEnabled=!1,this.gamepadEventsEnabled=!1,this.webRTCWebsocket=null,this.useWebsocketAsDataChannel=!1,this.root=e,this.video=this.getChildByClass(this.root,"gm-video"),this.wrapper=this.getChildByClass(this.root,"gm-wrapper"),this.videoWrapper=this.getChildByClass(this.root,"gm-video-wrapper"),this.playerScreenWrapper=this.root.querySelector(".player-screen-wrapper"),this.callbacks={},this.allListeners=[],this.peerConnection=null,this.signalingDataChannel=null,this.cameraSender=null,this.microphoneSender=null,this.sdpConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0},this.x=0,this.y=0,this.fileUploaderWorkerBlobSRC=null,this.options.showPhoneBorder){this.addListener(window,"resize",this.resizeAndAlignBorder.bind(this));const e=new ResizeObserver((e=>{this.videoWrapper.style.aspectRatio=e[0].target.videoWidth+"/"+e[0].target.videoHeight,this.resizeAndAlignBorder()}));this.videoResizeObserver=e.observe(this.video)}if(this.addListener(this.video,["loadeddata","loadedmetadata"],(()=>{this.videoWrapper.style.aspectRatio=this.video.videoWidth+"/"+this.video.videoHeight}),{once:!0}),window.Worker){let e=n(7983);e=e.toString().match(/^\s*function\s*\(\s*\)\s*\{(([\s\S](?!\}$))*[\s\S])/)[1];const t=new Blob([e],{type:"application/javascript"});this.fileUploaderWorkerBlobSRC=URL.createObjectURL(t)}this.addListener(this.root,"dragover",(e=>{e.preventDefault(),e.stopPropagation()})),this.addListener(this.root,"dragleave",(e=>{e.preventDefault(),e.stopPropagation()})),this.addListener(this.root,"drop",(e=>{e.preventDefault(),e.stopPropagation()}))}getPlugins(){return[{enabled:this.options.touch,class:i},{enabled:this.options.fullscreen,class:o},{enabled:this.options.clipboard,class:a,params:[this.options.i18n]},{enabled:this.options.streamBitrate,class:r,params:[this.options.i18n]},{enabled:this.options.camera,class:v,params:[this.options.i18n],dependencies:[D]},{enabled:this.options.fileUpload,class:C,params:[this.options.i18n]},{enabled:this.options.gappsInstall,class:f,params:[this.options.i18n]},{enabled:this.options.battery,class:y,params:[this.options.i18n]},{enabled:this.options.gps,class:E,params:[this.options.i18n]},{enabled:this.options.capture,class:l,params:[this.options.i18n]},{enabled:this.options.capture,class:c,params:[this.options.i18n]},{enabled:this.options.streamResolution,class:d},{enabled:this.options.touch||this.options.mouse,class:h},{enabled:this.options.keyboard,class:p},{enabled:this.options.keyboardMapping,class:u},{enabled:this.options.mouse,class:m},{enabled:this.options.gamepad,class:b,params:[this.options.i18n],dependencies:[L]},{enabled:this.options.identifiers,class:T,params:[this.options.i18n]},{enabled:this.options.network,class:w,params:[this.options.i18n]},{enabled:this.options.phone,class:S,params:[this.options.i18n]},{enabled:this.options.baseband,class:x,params:[this.options.i18n]},{enabled:this.options.diskIO,class:k,params:[this.options.i18n]},{enabled:this.options.biometrics,class:I},{enabled:this.options.microphone,dependencies:[D]},{enabled:this.options.buttons,class:s,params:[this.options.i18n]}]}dispatchEvent(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}getChildByClass(e,t){for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(i.classList&&i.classList.contains(t))return i;const s=this.getChildByClass(i,t);if(s)return s}return null}registerEventCallback(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t)}emit(e,t){this.callbacks[e]&&this.callbacks[e].forEach((e=>{e(t)}))}isWebsocketOpen(e){return e&&e instanceof WebSocket&&e.readyState===e.OPEN}onWebRTCReady(){this.webRTCConnectionRetryCount=0,this.openWebRTCConnection()}openWebRTCConnection(){this.webRTCWebsocket&&(this.disconnect(),this.reconnecting=!0),this.webRTCWebsocket=new WebSocket(this.options.webRTCUrl,this.webRTCWebsocketName),this.webRTCWebsocket.onopen=this.sendAuthenticationToken.bind(this),this.webRTCWebsocket.onmessage=this.onWebSocketMessage.bind(this),this.webRTCWebsocket.onerror=this.onWebSocketMessage.bind(this),this.webRTCWebsocket.binaryType="arraybuffer",this.webRTCConnectionRetryCount<=13?this.onConnectionClosed():M.error("Unable to establish connection to your instance.")}onConnectionClosed(){const e=this.store;this.webRTCWebsocket.onclose=t=>{switch(e.dispatch({type:"WEBRTC_CONNECTION_READY",payload:!1}),this.initialized=!1,M.debug("Error! Maybe your VM is not available yet? ("+t.code+") "+t.reason),t.code){case 1e3:case 1001:case 1005:M.debug("Closing websocket"),this.dispatchEvent("closeConnection",{msg:"Closing connection"});break;case 1002:case 1003:case 1006:case 1007:case 1008:case 1009:case 1010:case 1011:case 1012:case 1013:case 1014:case 1015:{this.dispatchEvent("closeConnectionUnavailable",{msg:"Can't connect to the WebSocket"}),M.debug("Retrying in 3 seconds...");const e=setTimeout((()=>{this.openWebRTCConnection()}),3e3);this.timeoutCallbacks.push(e),this.webRTCConnectionRetryCount++;break}case 4242:this.dispatchEvent("closeWrongToken",{msg:"Wrong token, can't establish connection"});break;case 4243:this.dispatchEvent("closeNoLongerValidToken",{msg:"The token provided is no longer valid"});break;case 4244:this.dispatchEvent("closeServerShutdown",{msg:"Server is shutting down..."});break;default:this.dispatchEvent("defaultCloseConnection",{msg:"Default close connection"})}}}sendAuthenticationToken(){const e={type:"token",token:this.options.token};this.isWebsocketOpen(this.webRTCWebsocket)&&this.webRTCWebsocket.send(JSON.stringify(e))}disconnect(){this.initialized=!1,this.mediaManager?.disconnect(),this.webRTCWebsocket&&(this.webRTCWebsocket.close(),this.webRTCWebsocket=null,this.timeoutCallbacks.forEach((e=>{clearTimeout(e)})),this.timeoutCallbacks=[]),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.signalingDataChannel&&(this.signalingDataChannel.close(),this.signalingDataChannel=null)}sendEvent(e){e=JSON.stringify(e),this.useWebsocketAsDataChannel?this.isWebsocketOpen(this.webRTCWebsocket)&&this.webRTCWebsocket.send(e):this.signalingDataChannel&&"open"===this.signalingDataChannel.readyState?this.signalingDataChannel.send(e):M.warn("cannot send event, signaling data channel closed")}async renegotiateWebRTCConnection(){/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(this.peerConnection.addTransceiver("audio"),this.peerConnection.addTransceiver("video"));try{const e=await this.peerConnection.createOffer(this.sdpConstraints);this.setLocalDescription(e)}catch(e){return this.onWebRTCConnectionError(e),!1}return!0}createPeerConnection(){M.debug("Creating peer connection");const e=[];Array.isArray(this.options.stun)?this.options.stun.forEach((t=>{e.push(t)})):Object.keys(this.options.stun).length>0&&e.push(this.options.stun),Array.isArray(this.options.turn)?this.options.turn.forEach((t=>{e.push(t)})):Object.keys(this.options.turn).length>0&&e.push(this.options.turn);const t={iceServers:e};if(this.peerConnection)M.debug("Peer connection already exists");else try{this.peerConnection=new RTCPeerConnection(t)}catch(e){M.warn("Failed to create PeerConnection, exception:",e.message)}void 0!==this.peerConnection.createDataChannel?this.createDataChannels():this.useWebsocketAsDataChannel=!0,this.peerConnection.onicecandidate=e=>{void 0!==e.candidate&&(e.candidate?this.sendIceCandidate(e.candidate):M.debug("All candidates ready"))},this.peerConnection.ontrack=e=>{if(M.debug("Received track:",e.track.kind),"video"!==e.track.kind)return;M.debug("Added remote video track using ontrack"),this.video.srcObject=e.streams[0],this.video.setAttribute("playsinline",!0),new g(this,this.peerConnection,3e3),this.touchEventsEnabled&&this.touchEvents.addTouchCallbacks(),this.gamepadEventsEnabled&&this.gamepadManager.addGamepadCallbacks();const t=this.video.play();t&&t.then((()=>{M.debug("Playing video with sound enabled"),this.dispatchEvent("video",{msg:"play automatically allowed with sound"})})).catch((()=>{M.debug("Can't play video with sound enabled"),this.dispatchEvent("video",{msg:"play with sound denied"}),this.video.muted=!0;this.video.play().then((()=>{M.debug("Playing video with sound disabled"),this.dispatchEvent("video",{msg:"play automatically allowed without sound"});const e=document.createElement("div");e.classList.add("gm-click-to-unmute"),e.innerHTML=this.options.i18n.UNMUTE_INVITE||"By default, the sound has been turned off, please click anywhere to re-enable audio",this.videoWrapper.prepend(e);this.removeAddSoundListener=this.addListener(window,["click","touchend"],(()=>{this.video.muted=!1,this.removeAddSoundListener(),this.dispatchEvent("video",{msg:"sound manually allowed by click"}),e.remove(),M.debug("Playing video with sound enabled has been authorized due to user click")}))})).catch((()=>{M.debug("Can't play video, even with sound disabled"),this.dispatchEvent("video",{msg:"play denied even without sound"});const e=document.createElement("div");this.classList.add("gm-click-to-display"),this.classList.add("gm-video-overlay"),this.videoWrapper.prepend(e);this.removeAllowPlayListener=this.addListener(e,["click","touchend"],(()=>{this.removeAllowPlayListener(),this.video.play(),e.remove(),this.dispatchEvent("video",{msg:"play manually allowed by click"}),M.debug("Playing video with sound disabled has been authorized due to user click")}))}))}))},this.peerConnection.oniceconnectionstatechange=()=>{const e=this.peerConnection?this.peerConnection.iceConnectionState:"No peerConnection";if(M.debug("iceConnectionState: ",e),this.dispatchEvent("iceConnectionState",{msg:e}),"failed"!==e)return;let t='<div class="gm-error-text">Aw, snap!<br/>Connection failed.<p>Check your internet connection & firewall rules.{DOC_AVAILABLE}</p></div>';const n=document.createElement("div");if(n.classList.add("gm-overlay-cant-connect"),n.classList.add("gm-video-overlay"),this.videoWrapper.prepend(n),this.options.connectionFailedURL){t=t.replace("{DOC_AVAILABLE}",'</br>See <a href="">help</a> to setup TURN configuration.');const e=()=>{this.removeOpenDocListener(),this.dispatchEvent("iceConnectionStateDocumentation",{msg:"clicked"}),n.remove(),window.open(this.options.connectionFailedURL,"_blank")};this.removeOpenDocListener=this.addListener(n,["click","touchend"],e)}else t=t.replace("{DOC_AVAILABLE}","");n.innerHTML=t},this.onConnectionStateChange=()=>{M.debug("ConnectionState changed:",this.peerConnection.iceConnectionState),"disconnected"===this.peerConnection.iceConnectionState&&this.onWebRTCReady()},this.addListener(this.peerConnection,"connectionstatechange",this.onConnectionStateChange),this.peerConnection.onnegotiationneeded=()=>{M.debug("on Negotiation needed")},this.renegotiateWebRTCConnection()}createDataChannels(){this.signalingDataChannel=this.peerConnection.createDataChannel("events",{ordered:!0}),this.signalingDataChannel.onerror=e=>{M.warn("Data Channel Error:",e)},this.signalingDataChannel.onmessage=e=>{M.debug("Got Data Channel Message:",e.data)},this.signalingDataChannel.onopen=()=>{this.store.dispatch({type:"WEBRTC_CONNECTION_READY",payload:!0}),M.debug("Data Channel opened")},this.signalingDataChannel.onclose=()=>{M.debug("The Data Channel is Closed")},this.peerConnection.ondatachannel=e=>{e.channel.onmessage=this.onDataChannelMessage.bind(this)}}sendIceCandidate(e){this.isWebsocketOpen(this.webRTCWebsocket)&&this.webRTCWebsocket.send(JSON.stringify(e))}setLocalDescription(e){const t=[...e.sdp.matchAll(/a=rtpmap:(\d+) opus\/48000\/2/g)][0];t&&(e.sdp=e.sdp.replace(new RegExp(`(a=fmtp:${t[1]}) ?(.*)(\r?\n)`,"g"),((e,t,n,i,s,o)=>`${n?`${t} ${n};`:`${t} `}stereo=1;maxplaybackrate=48000;maxaveragebitrate=256000${i}`))),this.peerConnection.setLocalDescription(e),this.isWebsocketOpen(this.webRTCWebsocket)&&this.webRTCWebsocket.send(JSON.stringify(e))}onWebSocketMessage(e){let t=null;try{t=JSON.parse(e.data)}catch(e){return}if(t)if(t.sdp)try{const e=new RTCSessionDescription(t);this.peerConnection.setRemoteDescription(e).then(this.onWebRTCConnectionEstablished.bind(this)).catch(this.onWebRTCConnectionError.bind(this))}catch(e){M.warn("Failed to create SDP ",e.message)}else if(t.candidate){if("end-of-candidates"===t.candidate)return void M.debug("End of ICE candidates received");try{const e=new RTCIceCandidate(t);this.peerConnection.addIceCandidate(e)}catch(e){M.warn("Failed to create ICE ",e.message)}}else t.connection?this.createPeerConnection():this.handleMessage(t)}onWebRTCConnectionEstablished(){M.debug("WebRTC connection success"),this.initialized||(this.initialized=!0,this.reconnecting?this.reconnecting=!1:this.dispatchEvent("successConnection",{msg:"Connection established"}))}onWebRTCConnectionError(e){M.debug("Failure callback:",e)}onDataChannelMessage(e){const t=JSON.parse(e.data);this.handleMessage(t)}handleMessage(e){if("USERS"===e.type)"SUCCESS"===e.code&&this.dispatchEvent("userListUpdated",{msg:e.message});else if("VERSION"===e.type){if("SUCCESS"===e.code){const t=this.getChildByClass(this.root,"gm-version-number");t&&(t.innerHTML=e.message)}}else"CAPABILITIES"===e.type&&[{widget:this.battery,capability:e.message.battery},{widget:this.camera,capability:e.message.camera},{widget:this.gps,capability:e.message.gps},{widget:this.identifiers,capability:e.message.identifiers},{widget:this.network,capability:e.message.mobileThrottling},{widget:this.network,capability:e.message.enable5G,enable:e=>{e.enable5G()},disable:e=>{e.disable5G()}},{widget:this.phone,capability:e.message.phone},{widget:this.baseband,capability:e.message.phone},{widget:this.diskIO,capability:e.message.diskIO},{widget:this.buttonsEvents,capability:e.message.accelerometer,enable:e=>{e.enableRotation()},disable:e=>{e.disableRotation()}},{widget:this.fileUpload,capability:e.message.systemPatcher,enable:e=>{e.setAvailability(!0)},disable:e=>{e.setAvailability(!1)}},{widget:this.gappsInstall,capability:e.message.systemPatcher},{widget:this.fingerprint,capability:e.message.biometrics},{widget:this.gamepad,capability:e.message.gamepad}].forEach((e=>{void 0!==e.widget&&(!0===e.capability?e.enable?e.enable(e.widget):e.widget.enable():e.disable?e.disable(e.widget):e.widget.disable())}));"SUCCESS"===e.code&&this.emit(e.type,e.message)}addListener(e,t,n,i={}){const s=Array.isArray(t)?t:[t],o=A();return s.forEach((t=>{e.addEventListener(t,n,i),this.allListeners.push({id:o,object:e,event:t,handler:n,options:i})})),()=>{this.allListeners=this.allListeners.filter((t=>t.id!==o||(e.removeEventListener(t.event,t.handler,t.options),!1)))}}removeAllListeners(){this.allListeners.forEach((({object:e,event:t,handler:n,options:i})=>{e.removeEventListener(t,n,i)})),this.allListeners.length=0}destroy(){0!==this.webRTCWebsocket.readyState&&(this.removeAllListeners(),this.disconnect(),this.peerConnectionStats?.destroy(),this.videoResizeObserver?.disconnect(),delete this.peerConnectionStats,delete this.video,delete this.wrapper,delete this.videoWrapper,delete this.root)}createFileUploadWorker(){if(!this.fileUploaderWorkerBlobSRC||!this.options.fileUploadUrl?.length){let e=null;throw this.fileUploaderWorkerBlobSRC||(e="Worker source can't be loaded"),this.options.fileUploadUrl?.length||(e="File upload url not set"),new Error("Worker can't be created, error:",e)}const e=new Worker(this.fileUploaderWorkerBlobSRC);if(this.store.state.isWebRTCConnectionReady){const t={type:"address",fileUploadAddress:this.options.fileUploadUrl,token:this.options.token};e.postMessage(t)}return this.store.subscribe((({isWebRTCConnectionReady:t})=>{if(t){const t={type:"address",fileUploadAddress:this.options.fileUploadUrl,token:this.options.token};e.postMessage(t)}else{const t={type:"close"};e.postMessage(t)}}),["isWebRTCConnectionReady"]),e}resizeAndAlignBorder(){const e=this.videoWrapper.querySelector(".gm-phone-border"),t=this.videoWrapper.querySelector(".gm-phone-button"),n=this.video.getBoundingClientRect();e.style.borderWidth="8px",e.style.outlineWidth="7px";const i=this.video.offsetLeft-8-7+2,s=this.video.offsetTop-8-7+2,o=n.width+16+7+3,a=n.height+16+7+3;e.style.left=i+"px",e.style.top=s+"px",e.style.width=o+"px",e.style.height=a+"px";const r=i+o;t.style.left=r+2-5+"px",t.style.top="10%",t.style.height="90%",t.style.right=""}}},2552:(e,t,n)=>{var i=n(1873),s=n(659),o=n(9350),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?s(e):o(e)}},2606:(e,t,n)=>{var i=n(5250),s=n(3805);e.exports=function e(t,n,o,a,r,l){return s(t)&&s(n)&&(l.set(n,t),i(t,n,void 0,e,l),l.delete(n)),t}},2651:(e,t,n)=>{var i=n(4218);e.exports=function(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}},2749:(e,t,n)=>{var i=n(1042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return i?void 0!==t[e]:s.call(t,e)}},2824:(e,t,n)=>{var i=n(7805),s=n(3290),o=n(1961),a=n(3007),r=n(5529),l=n(2428),c=n(6449),d=n(3693),h=n(3656),p=n(1882),u=n(3805),m=n(1331),g=n(7167),b=n(4974),v=n(9884);e.exports=function(e,t,n,E,C,f,y){var T=b(e,n),w=b(t,n),S=y.get(w);if(S)i(e,n,S);else{var x=f?f(T,w,n+"",e,t,y):void 0,k=void 0===x;if(k){var L=c(w),I=!L&&h(w),D=!L&&!I&&g(w);x=w,L||I||D?c(T)?x=T:d(T)?x=a(T):I?(k=!1,x=s(w,!0)):D?(k=!1,x=o(w,!0)):x=[]:m(w)||l(w)?(x=T,l(T)?x=v(T):u(T)&&!p(T)||(x=r(w))):k=!1}k&&(y.set(w,x),C(x,w,E,f,y),y.delete(w)),i(e,n,x)}}},2852:(e,t,n)=>{"use strict";const i=n(3065),s={createSwitch:({onChange:e=null,classes:t=""})=>{const n=document.createElement("div");n.className=t+" switch";const i=document.createElement("input");i.type="checkbox";const s=document.createElement("span");s.className="switch-slider",n.appendChild(i),n.appendChild(s);const o=(t,n=!1)=>{i.checked!==t&&(i.checked=t,n&&e&&"function"==typeof e&&e(i.checked))};return n.addEventListener("click",(()=>{o(!i.checked,!0)})),{element:n,getState:()=>i.checked,setState:o}}},o={createSlider:({onChange:e=null,onCursorMove:t=null,min:n=0,max:s=100,value:o=50,classes:a=""})=>{if(n>=s)throw new Error("`min` must be less than `max`.");const r=document.createElement("div");r.className=a,r.classList.add("slider");const l=document.createElement("div");l.classList.add("slider-progress-bar"),r.appendChild(l);const c=document.createElement("div");c.classList.add("slider-progress-bar-remaining"),r.appendChild(c);const d=document.createElement("span");d.classList.add("slider-cursor"),r.appendChild(d);const h=document.createElement("input");h.type="range",h.min=n,h.max=s,h.value=o,h.classList.add("slider-input"),r.appendChild(h);const p=()=>{requestAnimationFrame((async()=>{const e=performance.now();for(;0===d.offsetWidth||0===r.offsetWidth;){if(performance.now()-e>5e3){i.warn("Timeout: CSS not applied");break}await new Promise((e=>setTimeout(e,200)))}const t=(parseFloat(h.value)-n)/(s-n)*100,o=t-d.offsetWidth/2/r.offsetWidth*100+"%";l.style.width=`${t}%`,d.style.left=o;const a=t/100*d.offsetWidth/2*-1;d.style.transform=`translate(${a}px, -50%)`}))},u=()=>parseFloat(h.value);return h.addEventListener("input",(n=>{p(),t?t(n.target.value):e&&e(n.target.value)})),h.addEventListener("change",(()=>{p(),e&&e(u())})),p(),{element:r,getValue:u,setValue:(t,o=!1)=>{isNaN(t)||t<n||t>s?i.warn("`value` must be within the range defined by `min` and `max`."):h.value!==String(t)&&(h.value=t,p(),o&&e&&"function"==typeof e&&e(t))}}}},a={createTextInput:({onChange:e=null,onBlur:t=null,value:n="",regexFilter:s,regexValidField:o,appendText:a="",unitText:r="",classes:l="",placeholder:c="",messageField:d=!1})=>{const h=document.createElement("div");h.className=l,h.classList.add("text-input");const p=document.createElement("div");p.classList.add("text-input-container");const u=document.createElement("input");if(u.type="text",u.value=n,u.classList.add("input"),u.placeholder=c,a){const e=document.createElement("span");e.textContent=a,e.classList.add("append-text"),p.appendChild(e)}p.insertBefore(u,p.firstChild),h.appendChild(p);const m=document.createElement("div");m.classList.add("text-input-bottom"),d||r||m.classList.add("hidden"),h.appendChild(m);const g=document.createElement("div");g.classList.add("text-input-message"),d||g.classList.add("hidden"),m.appendChild(g);const b=document.createElement("div");b.textContent=r,b.classList.add("text-input-unit"),r||b.classList.add("hidden"),m.appendChild(b);const v=(t,n=!1)=>{!s||s.test(t)?(u.value=t,n&&e&&e(t)):i.warn("Invalid value:",t)},E=()=>u.value;return u.addEventListener("input",(e=>{const{value:t,selectionStart:n}=e.target;if(s&&!s.test(t)){const i=t.slice(0,n-1)+t.slice(n);return e.target.value=i,void e.target.setSelectionRange(n-1,n-1)}v(t,!0)})),u.addEventListener("blur",(e=>{t&&t(e.target.value)})),h.setValue=v,h.getValue=E,{element:h,setValue:v,getValue:E,checkValidity:()=>!(!o||!o.test(u.value)),setReadOnly:e=>{u.readOnly=e},setErrorMessage:e=>{if(!e)return g.classList.remove("gm-error"),g.removeAttribute("data-error"),g.classList.add("hidden"),void(r?b.classList.remove("hidden"):b.classList.add("hidden"));g.classList.add("gm-error"),g.setAttribute("data-error",e),g.classList.remove("hidden"),b.classList.add("hidden")}}}},r={createDropdown:({items:e=[],onChange:t=null,value:n="",hasCheckmark:s=!1,classes:o="",dropdownMaxHeight:a=null})=>{let r=n??"Select...";const l=document.createElement("div");l.className=o+" dropdown";const c=document.createElement("div");c.className="dropdown-selected",c.textContent=n??"Select...",l.appendChild(c);const d=document.createElement("div");d.className="dropdown-menu",a&&(d.style.maxHeight=a+"px"),l.appendChild(d);const h=e=>{e.forEach((e=>{const t=e.element.parentElement.querySelector(".dropdown-checkmark");if(t&&e.element.parentElement.removeChild(t),e.value===r||e===r){const t=document.createElement("div");t.className="dropdown-checkmark",e.element.parentElement.appendChild(t)}}))},p=(n,i=!1)=>{let o,a;"object"==typeof n&&"value"in n&&"element"in n&&(o=n.value,a=n.valueToDisplay??n.element.innerHTML??n.value),c.innerHTML!==o&&c.innerHTML!==a&&(c.innerHTML=a||o,r=o,s&&h(e),i&&t&&t(r))},u=t=>{e=t,d.innerHTML="",t.some((e=>e.value===r))||(c.textContent="Select..."),t.forEach((e=>{const t=document.createElement("div");if(t.className="dropdown-item","string"==typeof e)t.innerHTML=e;else{if(!("object"==typeof e&&void 0!==e.value&&e.element&&e.element instanceof HTMLElement))return void i.warn("Invalid item. Need at least props element and value. Item",e);t.appendChild(e.element)}t.addEventListener("click",(()=>{p(e,!0),l.classList.remove("open")})),d.appendChild(t)}))};return u(e),s&&h(e),c.addEventListener("click",(()=>{(()=>{const e=c.offsetWidth;d.style.width=`${e}px`})(),l.classList.toggle("open")})),document.addEventListener("click",(e=>{l.contains(e.target)||l.classList.remove("open")})),{element:l,getValue:()=>r,setValue:p,updateOptions:u,setDisabled:(e=!1)=>{e?l.classList.add("disabled"):l.classList.remove("disabled")}}}},l=(()=>{let e=null;return{createChip:({type:t="success",text:n="Applied"}={})=>{e=document.createElement("div"),e.className="gm-tag-"+t;const i=document.createElement("div");i.className="gm-tag-container",i.textContent=n,e.appendChild(i);return{element:e,setType:t=>{e.className="gm-tag-"+t},setValue:e=>{i.textContent=e}}}}})(),c={createProgressBar:({value:e=0,onChange:t=null,max:n=100}={})=>{const i=document.createElement("div");i.className="gm-progress-container";const s=document.createElement("div");s.className="gm-progress-bar",i.appendChild(s);const o=()=>{const t=Math.min(100,Math.max(0,e/n*100));s.style.width=`${t}%`};return t&&t(e),o(),{element:i,setValue:i=>{e=Math.max(0,Math.min(i,n)),o(),t&&t(e)},getValue:()=>e,setMax:e=>{n=e,o()}}}};e.exports={switchButton:s,slider:o,textInput:a,dropdownSelect:r,chipTag:l,progressBar:c}},2865:(e,t,n)=>{var i=n(9570),s=n(1811)(i);e.exports=s},2903:(e,t,n)=>{var i=n(3805),s=n(5527),o=n(181),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return o(e);var t=s(e),n=[];for(var r in e)("constructor"!=r||!t&&a.call(e,r))&&n.push(r);return n}},2949:(e,t,n)=>{var i=n(2651);e.exports=function(e,t){var n=i(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}},3007:e=>{e.exports=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}},3040:(e,t,n)=>{var i=n(1549),s=n(79),o=n(8223);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||s),string:new i}}},3065:function(e,t,n){var i,s;!function(){"use strict";i=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function r(){console.log&&(console.log.apply||Function.prototype.apply.apply(console.log,[console,arguments])),console.trace}function l(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?r:void 0!==console[i]?a(console,i):void 0!==console.log?a(console,"log"):e)}function c(){for(var n=this.getLevel(),s=0;s<i.length;s++){var o=i[s];this[o]=s<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function d(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function h(e,t,n){return l(e)||d.apply(this,arguments)}function p(e,n){var a,r,l,d=this,p="loglevel";function u(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&p){try{return void(window.localStorage[p]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"="+n+";"}catch(e){}}}function m(){var e;if(typeof window!==t&&p){try{e=window.localStorage[p]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(p),s=n.indexOf(i+"=");-1!==s&&(e=/^([^;]+)/.exec(n.slice(s+i.length+1))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}}function g(){if(typeof window!==t&&p){try{window.localStorage.removeItem(p)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function b(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?p+=":"+e:"symbol"==typeof e&&(p=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||h,d.getLevel=function(){return null!=l?l:null!=r?r:a},d.setLevel=function(e,t){return l=b(e),!1!==t&&u(l),c.call(d)},d.setDefaultLevel=function(e){r=b(e),m()||d.setLevel(e,!1)},d.resetLevel=function(){l=null,g(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(o!==d&&(a=b(o.getLevel())),c.call(d),o===d)for(var e in s)s[e].rebuild()},a=b(o?o.getLevel():"WARN");var v=m();null!=v&&(l=b(v)),c.call(d)}(o=new p).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=s[e];return t||(t=s[e]=new p(e,o.methodFactory)),t};var u=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=u),o},o.getLoggers=function(){return s},o.default=o,o},void 0===(s="function"==typeof i?i.call(t,n,t,e):i)||(e.exports=s)}()},3221:e=>{e.exports=function(e){return function(t,n,i){for(var s=-1,o=Object(t),a=i(t),r=a.length;r--;){var l=a[e?r:++s];if(!1===n(o[l],l,o))break}return t}}},3243:(e,t,n)=>{var i=n(6110),s=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=s},3290:(e,t,n)=>{e=n.nmd(e);var i=n(9325),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s?i.Buffer:void 0,r=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,i=r?r(n):new e.constructor(n);return e.copy(i),i}},3360:(e,t,n)=>{var i=n(3243);e.exports=function(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},3488:e=>{e.exports=function(e){return e}},3535:e=>{"use strict";e.exports=class{static get name(){return"MouseEvents"}constructor(e){this.instance=e,this.instance.mouseEvents=this,this.instance.mouseEventsEnabled=!0,this.leftButtonPressed=!1,this.boundEventListener=this.releaseAtPreviousPositionEvent.bind(this),this.removeMouseUpListener=()=>{},this.instance.store.subscribe((({isMouseEventsEnabled:e})=>{e?this.addMouseCallbacks():this.removeMouseCallbacks()}),["isMouseEventsEnabled"]),this.mouseCallbacks=[],this.instance.store.dispatch({type:"MOUSE_EVENTS_ENABLED",payload:!0})}onMousePressEvent(e){if(this.instance.video.muted=!this.instance.mediaManager.isMuted&&this.instance.video.muted,0!==e.button)return;e.preventDefault(),e.stopPropagation(),this.leftButtonPressed=!0,this.instance.x=this.instance.coordinateUtils.getXCoordinate(e),this.instance.y=this.instance.coordinateUtils.getYCoordinate(e);let t="";t=e.ctrlKey||e.metaKey?{type:"FAKE_MULTI_TOUCH_PRESS",mode:e.shiftKey?2:1,x:this.instance.x,y:this.instance.y}:{type:"MOUSE_PRESS",x:this.instance.x,y:this.instance.y},this.instance.sendEvent(t),this.removeMouseUpListener=this.instance.addListener(document,"mouseup",this.boundEventListener,!1)}onMouseReleaseEvent(e){if(0!==e.button)return;e.preventDefault(),e.stopPropagation(),this.leftButtonPressed=!1,this.instance.x=this.instance.coordinateUtils.getXCoordinate(e),this.instance.y=this.instance.coordinateUtils.getYCoordinate(e);let t="";t=e.ctrlKey||e.metaKey?{type:"FAKE_MULTI_TOUCH_RELEASE",mode:e.shiftKey?2:1,x:this.instance.x,y:this.instance.y}:{type:"MOUSE_RELEASE",x:this.instance.x,y:this.instance.y},this.instance.sendEvent(t),this.removeMouseUpListener()}releaseAtPreviousPositionEvent(e){if(0!==e.button)return;e.preventDefault(),e.stopPropagation(),this.leftButtonPressed=!1;const t={type:e.ctrlKey||e.metaKey?"FAKE_MULTI_TOUCH_RELEASE":"MOUSE_RELEASE",x:this.instance.x,y:this.instance.y};this.instance.sendEvent(t),this.removeMouseUpListener()}onMouseMoveEvent(e){if(!this.leftButtonPressed)return;e.preventDefault(),e.stopPropagation(),this.instance.x=this.instance.coordinateUtils.getXCoordinate(e),this.instance.y=this.instance.coordinateUtils.getYCoordinate(e);const t={type:"MOUSE_MOVE",x:this.instance.x,y:this.instance.y};this.instance.sendEvent(t)}onMouseWheelEvent(e){e.preventDefault(),e.stopPropagation(),this.instance.x=this.instance.coordinateUtils.getXCoordinate(e),this.instance.y=this.instance.coordinateUtils.getYCoordinate(e);const t=this.getWheelDeltaPixels(e.deltaY,e.deltaMode),n={type:"WHEEL",x:this.instance.x,y:this.instance.y,delta:t};this.instance.sendEvent(n)}cancelContextMenu(e){e.preventDefault(),e.stopPropagation(),e.returnValue=!1}addMouseCallbacks(){this.mouseCallbacks.length||(this.mouseCallbacks=[{event:"mousedown",handler:this.onMousePressEvent.bind(this),removeListener:null},{event:"mouseup",handler:this.onMouseReleaseEvent.bind(this),removeListener:null},{event:"mousemove",handler:this.onMouseMoveEvent.bind(this),removeListener:null},{event:"wheel",handler:this.onMouseWheelEvent.bind(this),removeListener:null,options:{passive:!1}},{event:"contextmenu",handler:this.onMouseWheelEvent.bind(this),removeListener:null}],this.mouseCallbacks.forEach(((e,t,n)=>{n[t].removeListener=this.instance.addListener(this.instance.video,e.event,e.handler,e.options)})))}removeMouseCallbacks(){this.mouseCallbacks.length&&(this.mouseCallbacks.forEach((e=>{e.removeListener()})),this.mouseCallbacks.length=0)}getWheelDeltaPixels(e,t){let n=1*e;return n&&t&&(n*=1===t?40:800),n}}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},3656:(e,t,n)=>{e=n.nmd(e);var i=n(9325),s=n(9935),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,r=a&&a.exports===o?i.Buffer:void 0,l=(r?r.isBuffer:void 0)||s;e.exports=l},3661:(e,t,n)=>{var i=n(3040),s=n(7670),o=n(289),a=n(4509),r=n(2949);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=r,e.exports=l},3693:(e,t,n)=>{var i=n(4894),s=n(346);e.exports=function(e){return s(e)&&i(e)}},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},3794:e=>{"use strict";e.exports=class{constructor(e){this.instance=e,this.instance.coordinateUtils=this,this.video=this.instance.video}setVideoElement(){this.video=this.instance.video}hasLeftAndRightBorders(){return this.video.offsetWidth/this.video.offsetHeight>this.video.videoWidth/this.video.videoHeight}hasSameOrientation(){return this.video.videoWidth/this.video.videoHeight>1&&this.video.offsetWidth/this.video.offsetHeight>1||this.video.videoWidth/this.video.videoHeight<1&&this.video.offsetWidth/this.video.offsetHeight<1}getCumulativeOffset(e){let t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n}}getRawXCoordinateFromEvent(e){return void 0!==e.pageX?void 0!==e.offsetX?e.offsetX:e.pageX-this.getCumulativeOffset(this.video).left:e.clientX-this.getCumulativeOffset(this.video).left}getRawYCoordinateFromEvent(e){return void 0!==e.pageY?void 0!==e.offsetY?e.offsetY:e.pageY-this.getCumulativeOffset(this.video).top:e.clientY-this.getCumulativeOffset(this.video).top}getXCoordinate(e){this.instance.root.focus(),this.setVideoElement();const t=this.getRawXCoordinateFromEvent(e)-this.getLeftBorder();return Math.round(t*this.getXRatio())}getYCoordinate(e){this.setVideoElement();const t=this.getRawYCoordinateFromEvent(e)-this.getTopBorder();return Math.round(t*this.getYRatio())}getXRatio(){let e;if(this.hasSameOrientation())return this.hasLeftAndRightBorders()?(e=this.video.videoWidth/this.video.videoHeight*this.video.offsetHeight,this.video.videoWidth/e):this.video.videoWidth/this.video.offsetWidth;if(this.hasLeftAndRightBorders())return e=this.video.videoWidth/this.video.videoHeight*this.video.offsetHeight,this.video.videoWidth/e;const t=this.video.videoHeight/this.video.videoWidth*this.video.offsetWidth;return this.video.videoHeight/t}getYRatio(){let e,t;return this.hasSameOrientation()?this.hasLeftAndRightBorders()?this.video.videoHeight/this.video.offsetHeight:(t=this.video.videoHeight/this.video.videoWidth*this.video.offsetWidth,this.video.videoHeight/t):this.hasLeftAndRightBorders()?(e=this.video.videoWidth/this.video.videoHeight*this.video.offsetHeight,this.video.videoWidth/e):(t=this.video.videoHeight/this.video.videoWidth*this.video.offsetWidth,this.video.videoHeight/t)}getTopBorder(){if(this.setVideoElement(),this.hasLeftAndRightBorders())return 0;const e=this.video.videoHeight/this.video.videoWidth*this.video.offsetWidth;return(this.video.offsetHeight-e)/2}getLeftBorder(){if(this.setVideoElement(),!this.hasLeftAndRightBorders())return 0;const e=this.video.videoWidth/this.video.videoHeight*this.video.offsetHeight;return(this.video.offsetWidth-e)/2}calculateCoorFromPercent(e,t){const n=this.instance.video.getBoundingClientRect(),i=e/100*n.width*this.instance.coordinateUtils.getXRatio(),s=t/100*(n.height-2*this.instance.coordinateUtils.getTopBorder())*this.instance.coordinateUtils.getYRatio();return{x:Math.floor(i),y:Math.floor(s)}}calculateCoorToPercent(e,t){const n=this.instance.video.getBoundingClientRect(),i=100/(n.width*this.instance.coordinateUtils.getXRatio()/e),s=100/((n.height-2*this.instance.coordinateUtils.getTopBorder())*this.instance.coordinateUtils.getYRatio()/t);return{x:Math.round(i),y:Math.round(s)}}}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},3908:(e,t,n)=>{"use strict";const{generateUID:i}=n(17),s=n(3065);s.setDefaultLevel("debug");const o={isWebRTCConnectionReady:!1,overlay:{isOpen:!1,widgetsOpened:[]},isKeyboardEventsEnabled:!1,isMouseEventsEnabled:!1,isDragAndDropForUploadFileEnabled:!0,trackedEvents:{isActive:!1,events:[]}},a=(e,t)=>{const n=[],s={isWidgetOpened:t=>e.store.state.overlay.isOpen&&e.store.state.overlay.widgetsOpened.includes(t)},a=(e,t,n=[])=>{let i=[];const s=e=>e&&"object"==typeof e;for(const o in e){const r=[...n,o].join(".");if(Object.prototype.hasOwnProperty.call(t,o))if(s(e[o])&&s(t[o]))if(Array.isArray(e[o])&&Array.isArray(t[o]))if(e[o].length!==t[o].length)i.push(r);else{let n=!1;for(let i=0;i<e[o].length;i++)e[o][i]!==t[o][i]&&(n=!0);n&&i.push(r)}else i=i.concat(a(e[o],t[o],[...n,o]));else e[o]!==t[o]&&i.push(r);else i.push(r)}return i};e.store={state:o,dispatch:i=>{const s=JSON.parse(JSON.stringify(e.store.state));e.store.state=t({...e.store.state},i);((t,i)=>{n.forEach((({keys:n,cb:s})=>{(0===n.length||n.some((e=>((e,t)=>{const n=t.split(".");return e.some((e=>{const t=e.split(".");return n.every(((e,n)=>e===t[n]))}))})(t,e))))&&s({...e.store.state},i)}))})(a(e.store.state,s),s)},subscribe:(e,t=[])=>{const s=i();n.push({uid:s,keys:t,cb:e});return()=>{const e=n.findIndex((({uid:e})=>e===s));e>=0&&n.splice(e,1)}},getters:s}},r=(e,t)=>{switch(t.type){case"WEBRTC_CONNECTION_READY":e.isWebRTCConnectionReady=t.payload;break;case"KEYBOARD_EVENTS_ENABLED":e.isKeyboardEventsEnabled=t.payload;break;case"MOUSE_EVENTS_ENABLED":e.isMouseEventsEnabled=t.payload;break;case"OVERLAY_OPEN":const{overlayID:n,toOpen:i=null}=t.payload;(null===i?!e.overlay.widgetsOpened.includes(n):i)?(e.overlay.isOpen=!0,e.overlay.widgetsOpened=[n]):(e.overlay.widgetsOpened=n?e.overlay.widgetsOpened.filter((e=>e!==n)):[],0===e.overlay.widgetsOpened.length&&(e.overlay.isOpen=!1));break;case"ENABLE_TRACKED_EVENTS":e.trackedEvents.isActive=t.payload;break;case"ADD_TRACKED_EVENT":if(!e.trackedEvents.isActive)return e;e.trackedEvents.events.push(t.payload);break;case"FLUSH_TRACKED_EVENTS":e.trackedEvents.events.length=0;break;case"DRAG_AND_DROP_UPLOAD_FILE_ENABLED":e.isDragAndDropForUploadFileEnabled=t.payload;break;default:s.debug("Store not updated, action type :",t.type," unknown")}return s.debug("Store updated below type - payload - result",t.type,t.payload,e),e};e.exports=e=>{a(e,r)}},4112:(e,t,n)=>{"use strict";n.r(t)},4144:(e,t,n)=>{"use strict";const{generateUID:i}=n(17);e.exports=class{static get name(){return"KeyboardMapping"}constructor(e,t){this.instance=e,this.i18n=t||{},this.instance.KeyboardMapping=this,this.keyboardCallbacks=[],this.sequences={},this.requestToGenerate=[],this.currentlyPressedKeys=[],this.state=new Proxy({isActive:!1,isPaused:!1,mappedKeysConfig:{},workingMappedKeysConfig:{}},{set:(e,t,n)=>{switch(e[t]=n,t){case"isActive":this.activatePlugin();break;case"isPaused":n?(this.toolbarBtn.addClass("keymapping-paused"),this.state.isActive=!1):(this.toolbarBtn.removeClass("keymapping-paused"),this.state.isActive=!0);break;case"mappedKeysConfig":this.setupMappedKeysConfig()}return!0}}),this.instance.store.subscribe((({overlay:{isOpen:e}})=>{e&&this.state.isActive?this.state.isPaused=!0:!e&&this.state.isPaused&&(this.state.isPaused=!1)}),["overlay.isOpen"]),this.registerToolbarButton(),this.exposedAPI()}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-keymapping-button",title:this.i18n.KEYMAPPING_TITLE||"Key Mapping",onClick:()=>this.state.isActive=!this.state.isActive})}activatePlugin(){this.state.isActive?(this.toolbarBtn.setActive(),this.addKeyboardCallbacks(),this.instance.store.dispatch({type:"KEYBOARD_EVENTS_ENABLED",payload:!1}),this.instance.store.dispatch({type:"MOUSE_EVENTS_ENABLED",payload:!1})):(this.toolbarBtn.setActive(!1),this.removeKeyboardCallbacks(),this.instance.store.dispatch({type:"KEYBOARD_EVENTS_ENABLED",payload:!this.state.isPaused}),this.instance.store.dispatch({type:"MOUSE_EVENTS_ENABLED",payload:!this.state.isPaused}))}setupMappedKeysConfig(){this.state.workingMappedKeysConfig={},Object.entries(this.state.mappedKeysConfig).forEach((([e,t])=>{t.forEach((n=>{const s=i();this.sequences[s]=[];const o="dPad"===e?n.keys:t;Object.values(o).forEach((t=>{this.state.workingMappedKeysConfig[t.key]={...t.effect,key:t.key,type:e,name:n.name,groupId:s}}))}))})),this.sequences.mouse=[]}cancelAllPressedKeys(){this.releaseAllTouch(),this.state.currentlyPressedKeys=[],Object.keys(this.sequences).forEach((e=>{this.sequences[e]=[]}))}generateSequences(e){switch(this.state.workingMappedKeysConfig[e].type){case"dPad":this.generateDPADSequence(e);break;case"tap":this.generateTouchSequence(e);break;case"swipe":this.generateSwipeSequence(e)}}generateDPADSequence(e){const t=this.state.workingMappedKeysConfig[e].groupId;let n=0,i=0;const s=Object.values(this.state.workingMappedKeysConfig).filter((e=>e.groupId===t&&this.currentlyPressedKeys.includes(e.key)));n=this.state.workingMappedKeysConfig[e].initialX,i=this.state.workingMappedKeysConfig[e].initialY;const o={x:n,y:i};s.forEach((e=>{this.state.workingMappedKeysConfig[e.key]&&(o.x+=e.distanceX,o.y+=e.distanceY)}));const a=this.sequences[t]?.[this.sequences[t].length-1];if(a){const{x:e,y:t}=this.instance.coordinateUtils.calculateCoorToPercent(a.points[0].x,a.points[0].y);n=e,i=t}s.length-1!=0||a||this.sequences[t].push({type:"MULTI_TOUCH",mode:0,nb:1,points:[this.instance.coordinateUtils.calculateCoorFromPercent(n,i)]}),a&&this.sequences[t].push(a);for(let e=0;e<=10;e++){const s=e/10,a=Math.floor(n+s*(o.x-n)),r=Math.floor(i+s*(o.y-i));this.sequences[t].push({type:"MULTI_TOUCH",mode:2,nb:1,points:[this.instance.coordinateUtils.calculateCoorFromPercent(a,r)]})}}generateTouchSequence(e){const t=this.state.workingMappedKeysConfig[e].groupId,n=this.state.workingMappedKeysConfig[e].initialX,i=this.state.workingMappedKeysConfig[e].initialY;this.sequences[t].push({type:"MULTI_TOUCH",mode:0,nb:1,points:[this.instance.coordinateUtils.calculateCoorFromPercent(n,i)]})}generateSwipeSequence(e){const t=this.state.workingMappedKeysConfig[e].groupId,n=this.state.workingMappedKeysConfig[e],i={x:n.initialX,y:n.initialY};this.sequences[t].push({type:"MULTI_TOUCH",mode:0,nb:1,points:[this.instance.coordinateUtils.calculateCoorFromPercent(i.x,i.y)]}),i.x+=n.distanceX,i.y+=n.distanceY,this.sequences[t].push({type:"MULTI_TOUCH",mode:2,nb:1,points:[this.instance.coordinateUtils.calculateCoorFromPercent(i.x,i.y)]})}async mergeSequences(){const e=Object.values(this.sequences),t=e.map((e=>e.length)).sort().pop(),n=[];Array.from(Array(t).keys()).forEach((t=>{e.forEach((e=>{e.length&&(e[t]?(n[t]||(n[t]=[]),n[t].push(e[t])):(n[t]||(n[t]=[]),n[t].push(e[e.length-1])))}))}));const i=[];n.forEach((e=>{i.push({type:"MULTI_TOUCH",nb:e.length,mode:e[0].mode,points:e.reduce(((e,t)=>e=[...e,...t.points]),[])})}));for(let e=0;e<i.length;e++)e%1==0&&0!==e&&await new Promise((e=>setTimeout(e,1))),this.sendEvent(i[e]);Object.entries(this.sequences).forEach((([e,t])=>{t.length>0?this.sequences[e]=[t[t.length-1]]:this.sequences[e]=[]}))}async onKeyDown(e){const t=e.key;this.state.workingMappedKeysConfig[t]&&(this.currentlyPressedKeys.includes(t)||(this.currentlyPressedKeys.push(t),this.state.workingMappedKeysConfig[t]&&(this.generateSequences(t),await Promise.all(this.requestToGenerate),this.requestToGenerate.push(this.mergeSequences()))))}async onKeyUp(e){const t=e.key;if(!this.state.workingMappedKeysConfig[t])return;const n=this.state.workingMappedKeysConfig[t].groupId;if(this.currentlyPressedKeys.includes(t)&&(this.currentlyPressedKeys=this.currentlyPressedKeys.filter((e=>e!==t))),this.currentlyPressedKeys.length){if(this.currentlyPressedKeys.some((e=>this.state.workingMappedKeysConfig[e].groupId===this.state.workingMappedKeysConfig[t].groupId&&"dPad"===this.state.workingMappedKeysConfig[e].type)))return this.generateDPADSequence(t),await Promise.all(this.requestToGenerate),this.requestToGenerate=[],void this.requestToGenerate.push(this.mergeSequences());this.sequences[n]=[],await Promise.all(this.requestToGenerate),this.requestToGenerate.push(this.mergeSequences())}else await this.releaseAllTouch()}async onMouseDown(e){this.sequences.mouse||(this.sequences.mouse=[]),this.sequences.mouse.push({type:"MULTI_TOUCH",mode:0,nb:1,points:[{x:this.instance.coordinateUtils.getXCoordinate(e),y:this.instance.coordinateUtils.getYCoordinate(e)}]}),await Promise.all(this.requestToGenerate),this.requestToGenerate.push(this.mergeSequences())}async onMouseUp(){this.currentlyPressedKeys.length?(await Promise.all(this.requestToGenerate),this.sequences.mouse=[],this.requestToGenerate.push(this.mergeSequences())):await this.releaseAllTouch()}async onMouseMove(e){this.sequences.mouse||(this.sequences.mouse=[]),1===e.buttons&&(this.sequences.mouse.push({type:"MULTI_TOUCH",mode:2,nb:1,points:[{x:this.instance.coordinateUtils.getXCoordinate(e),y:this.instance.coordinateUtils.getYCoordinate(e)}]}),await Promise.all(this.requestToGenerate),this.requestToGenerate.push(this.mergeSequences()))}getTapTouchEvent(e){return this.instance.coordinateUtils.calculateCoorFromPercent(e.x,e.y)}async releaseAllTouch(){await Promise.all(this.requestToGenerate),this.sendEvent({type:"MULTI_TOUCH",nb:0,mode:1,points:[]}),Object.keys(this.sequences).forEach((e=>{this.sequences[e]=[]}))}sendEvent(e){this.instance.sendEvent(e)}addKeyboardCallbacks(){this.keyboardCallbacks.length||(this.removeBlurListener=this.instance.addListener(window,"blur",this.cancelAllPressedKeys.bind(this)),this.keyboardCallbacks=[{event:"keydown",handler:this.onKeyDown.bind(this),removeListener:null},{event:"keyup",handler:this.onKeyUp.bind(this),removeListener:null},{event:"mousedown",handler:this.onMouseDown.bind(this),removeListener:null},{event:"mouseup",handler:this.onMouseUp.bind(this),removeListener:null},{event:"mousemove",handler:this.onMouseMove.bind(this),removeListener:null}],this.instance.root.focus(),this.keyboardCallbacks.forEach(((e,t,n)=>{n[t].removeListener=this.instance.addListener(this.instance.root,e.event,e.handler)})))}removeKeyboardCallbacks(){this.keyboardCallbacks.length&&(this.removeBlurListener(),this.keyboardCallbacks.forEach((e=>{e.removeListener()})),this.keyboardCallbacks.length=0)}exposedAPI(){this.instance.apiManager.registerFunction({name:"setConfig",category:"keyMapping",fn:e=>{try{this.state.mappedKeysConfig=JSON.parse(JSON.stringify(e))}catch(e){throw new Error("Invalid JSON")}this.state.config=e},description:"Submit a config for mapping keys. Please refer to the keyMapping > setConfig section of the README file for details."}),this.instance.apiManager.registerFunction({name:"activeKeyMappingDebug",category:"keyMapping",fn:(e=!1,t=!1)=>{this.activateTrace(e),this.activateGrid(t)},description:"Activate debug mode for key mapping. The first parameter enables a feature that shows a div with x, y and x%, y% coordinates on click. The second parameter activates a grid overlay on the screen to assist with key mapping, showing 10% increments of the screen width and height."}),this.instance.apiManager.registerFunction({name:"enable",category:"keyMapping",fn:(e=!1)=>{this.state.isActive=e},description:"Enable or disable the keyMapping plugin. Pass true to activate and false to deactivate."})}activateTrace(e){const t=e=>{const t=this.instance.coordinateUtils.getXCoordinate(e),n=this.instance.coordinateUtils.getYCoordinate(e),i=document.createElement("div");i.style.position="absolute",i.style.left=`${e.clientX}px`,i.style.top=`${e.clientY}px`,i.style.width="80px",i.style.height="80px",i.style.padding="10px",i.style.background="red";const s=this.instance.video.getBoundingClientRect(),o=100/(s.width*this.instance.coordinateUtils.getXRatio()/t),a=100/((s.height-2*this.instance.coordinateUtils.getTopBorder())*this.instance.coordinateUtils.getYRatio()/n);i.style.whiteSpace="pre-line";const r=document.createTextNode(`x: ${t}\ny: ${n}\nx%: ${String(o).substring(0,5)}\n\n                y%: ${String(a).substring(0,5)}`);i.appendChild(r),i.onclick=e=>{e.stopPropagation(),i.remove()},document.body.appendChild(i)};e?this.removeDebugListener=this.instance.addListener(window,["click"],t.bind(this)):(this.removeDebugListener&&this.removeDebugListener(),this.removeDebugListener=null)}activateGrid(e){if(e){const e=this.instance.videoWrapper.getBoundingClientRect(),t=this.instance.video.getBoundingClientRect();this.instance.coordinateUtils.hasLeftAndRightBorders()?t.width=this.instance.video.videoWidth/this.instance.video.videoHeight*t.height:t.height=this.instance.video.videoHeight/this.instance.video.videoWidth*t.width,Array.from(Array(11).keys()).forEach(((n,i)=>{const s=document.createElement("div");s.style.position="absolute",s.style.left=i*(.1*t.width)+(e.width-t.width)/2+"px",s.style.top="0px",s.style.width="1px",s.style.height="100%",s.style.background="red",0===i&&(s.style.background="green"),s.classList.add("keyMapping-helping-grid"),this.instance.videoWrapper.appendChild(s)})),Array.from(Array(11).keys()).forEach(((n,i)=>{const s=document.createElement("div");s.style.position="absolute",s.style.left="0px",s.style.top=i*(.1*t.height)+(e.height-t.height)/2+"px",s.style.width="100%",s.style.height="1px",s.style.background="red",0===i&&(s.style.background="green"),s.classList.add("keyMapping-helping-grid"),this.instance.videoWrapper.appendChild(s)}))}else this.instance.videoWrapper.querySelectorAll(".keyMapping-helping-grid").forEach((e=>{e.remove()}))}}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4335:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},4354:(e,t,n)=>{var i=n(1033),s=n(9302),o=n(2606),a=n(6924),r=s((function(e){return e.push(void 0,o),i(a,void 0,e)}));e.exports=r},4503:(e,t,n)=>{"use strict";n(3065).setDefaultLevel("debug");const i=n(801),{switchButton:s,dropdownSelect:o}=n(2852),a=n(1518),r=n(8841);e.exports=class extends i{static get name(){return"Network"}constructor(e,t){super(e),this.instance=e,this.instance.network=this,this.i18n=t||{},this.fields={},this.profilesForDropdownNetworkType=[],this.prepareArrayForDropdownNetworkType(a),this.profilesForDropdownSignalStrength=r.map((e=>{const t=document.createElement("div");return t.innerHTML=e.label,{element:t,value:e.name,valueToDisplay:e.label||""}})),this.registerToolbarButton(),this.renderWidget(),this.instance.registerEventCallback("settings",this.handleSettings.bind(this)),this.instance.registerEventCallback("network_profile",this.handleNetworkProfile.bind(this))}handleSettings(e){const t=e.split(" ");if("if"===t[0]){if(this.wifiSwitch.setState(!1),this.mobileDataSwitch.setState(!1),3!==t.length)return;const e=t[1].match(/(wifi:)(\w+)/);e&&this.wifiSwitch.setState("on"===e[2]);const n=t[2].match(/(mobile:)(\w+)/);n&&("on"===n[2]?(this.mobileDataSwitch.setState(!0),this.disableMobileData(!1)):(this.mobileDataSwitch.setState(!1),this.disableMobileData(!0)))}}handleNetworkProfile(e){const t=e.split(" ");if(t.length<11||"wifi"===t[1])return;const n=t[2].split(":"),i=t[3].split(":"),s=t[4].split(":"),o=t[5].split(":"),a=t[6].split(":"),r=t[7].split(":"),l=t[8].split(":"),c=t[9].split(":"),d=t[10].split(":");this.dropdownNetworkType.setValue(this.profilesForDropdownNetworkType.find((e=>e.value===c[1]))),this.selectMobileSignalStrength.setValue(this.profilesForDropdownSignalStrength.find((e=>e.value===d[1]))),this.hasTodisableSignalStrengthDropdownAndDetails();const h=!this.mobileDataSwitch.getState()||"none"===c[1];this.updateDetail("downSpeed",i[2]+" b/s","disabled"===i[1]||h),this.updateDetail("upSpeed",n[2]+" b/s","disabled"===n[1]||h),this.updateDetail("downDelay",o[2]+" s","disabled"===o[1]||h),this.updateDetail("upDelay",s[2]+" s","disabled"===s[1]||h),this.updateDetail("downPacketLoss",r[2]+" %","disabled"===r[1]||h),this.updateDetail("upPacketLoss",a[2]+" %","disabled"===a[1]||h),this.updateDetail("dnsDelay",l[2]+" s","disabled"===l[1]||h)}enable5G(){this.prepareArrayForDropdownNetworkType(a),this.dropdownNetworkType.updateOptions(this.profilesForDropdownNetworkType)}disable5G(){this.prepareArrayForDropdownNetworkType(a.filter((e=>"5g"!==e.name))),this.dropdownNetworkType.updateOptions(this.profilesForDropdownNetworkType)}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-network-button",title:this.i18n.NETWORK_TITLE||"Network",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.NETWORK_TITLE||"Network",width:378,height:610,classes:"gm-network-plugin"}),t=document.createElement("div");t.className="gm-network-wifi-section";const n=document.createElement("div");n.innerHTML=this.i18n.WIFI||"Wifi",t.appendChild(n),this.wifiSwitch=s.createSwitch({onChange:e=>{this.sendWifiStateEvent(e)}}),t.appendChild(this.wifiSwitch.element);const i=document.createElement("div");i.className="gm-separator",this.mobileDataSection=document.createElement("div"),this.mobileDataSection.className="gm-network-mobile-section";const a=document.createElement("div");a.className="gm-mobile-data-switch";const r=document.createElement("div");r.innerHTML=this.i18n.MOBILE_DATA||"Mobile data",a.appendChild(r),this.mobileDataSwitch=s.createSwitch({onChange:e=>{this.sendMobileDataStateEvent(e)}}),a.appendChild(this.mobileDataSwitch.element),this.mobileDataSection.appendChild(a);const l=document.createElement("label");l.innerHTML=this.i18n.NETWORK_TYPE||"Network type",this.dropdownNetworkType=o.createDropdown({items:this.profilesForDropdownNetworkType,hasCheckmark:!0,dropdownMaxHeight:245,classes:"gm-network-type-dropdown",onChange:e=>{const t=[];t.push("setprofile mobile "+e);const n={channel:"network_profile",messages:t};this.instance.sendEvent(n)}}),this.mobileDataSection.appendChild(l),this.mobileDataSection.appendChild(this.dropdownNetworkType.element);const c=document.createElement("label");c.className="gm-signal-strength-label",c.innerHTML=this.i18n.SIGNAL_STRENGTH||"Signal strength",this.mobileDataSection.appendChild(c),this.selectMobileSignalStrength=o.createDropdown({items:this.profilesForDropdownSignalStrength,hasCheckmark:!0,dropdownMaxHeight:155,classes:"gm-signal-strength-dropdown",onChange:e=>{const t=[];t.push("setsignalstrength mobile "+e);const n={channel:"network_profile",messages:t};this.instance.sendEvent(n)}}),this.mobileDataSection.appendChild(c),this.mobileDataSection.appendChild(this.selectMobileSignalStrength.element),this.mobileDataSection.appendChild(this.createDetailsSection("Download speed","downSpeed")),this.mobileDataSection.appendChild(this.createDetailsSection("Upload speed","upSpeed")),this.mobileDataSection.appendChild(this.createDetailsSection("Download delay","downDelay")),this.mobileDataSection.appendChild(this.createDetailsSection("Upload delay","upDelay")),this.mobileDataSection.appendChild(this.createDetailsSection("Download packet loss","downPacketLoss")),this.mobileDataSection.appendChild(this.createDetailsSection("Upload packet loss","upPacketLoss")),this.mobileDataSection.appendChild(this.createDetailsSection("DNS Delay","dnsDelay")),e.appendChild(t),e.appendChild(i),e.appendChild(this.mobileDataSection)}sendWifiStateEvent(e){const t=[];e?t.push("enableif wifi"):t.push("disableif wifi");const n={channel:"settings",messages:t};this.instance.sendEvent(n)}sendMobileDataStateEvent(e){const t=[];e?t.push("enableif mobile"):t.push("disableif mobile");const n={channel:"settings",messages:t};this.instance.sendEvent(n);this.instance.sendEvent({channel:"network_profile",messages:["notify phone"]})}disableMobileData(e){e?(this.mobileDataSection.classList.add("disabled"),this.dropdownNetworkType.setDisabled(!0),this.selectMobileSignalStrength.setDisabled(!0)):(this.mobileDataSection.classList.remove("disabled"),this.dropdownNetworkType.setDisabled(!1),this.selectMobileSignalStrength.setDisabled(!1)),this.hasTodisableSignalStrengthDropdownAndDetails()}hasTodisableSignalStrengthDropdownAndDetails(){const e=!this.mobileDataSwitch.getState()||"none"===this.dropdownNetworkType.getValue();e?(this.mobileDataSection.classList.add("disabledDetails"),this.selectMobileSignalStrength.setDisabled(e)):(this.mobileDataSection.classList.remove("disabledDetails"),this.selectMobileSignalStrength.setDisabled(!1))}createDetailsSection(e,t){const n=document.createElement("section");return this.fields[t]=document.createElement("span"),n.innerHTML=e+": ",n.appendChild(this.fields[t]),n}updateDetail(e,t,n){this.fields[e].innerHTML=n?"":t}prepareArrayForDropdownNetworkType(e){this.profilesForDropdownNetworkType=e.sort(((e,t)=>e.id-t.id)).map((e=>{const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");return i.className="gm-network-profile-icon "+e.icon,t.appendChild(i),t.appendChild(n),t.style.display="flex",t.style.alignItems="center",n.innerHTML=e.label||"",{element:t,value:e.name,valueToDisplay:e.label||""}}))}}},4509:(e,t,n)=>{var i=n(2651);e.exports=function(e){return i(this,e).has(e)}},4546:e=>{"use strict";e.exports=class{constructor(e){this.instance=e,this.tooltipElement=null,this.createTooltipElement()}createTooltipElement(){this.tooltipElement=document.createElement("div"),this.tooltipElement.className="gm-tooltip",this.instance.root.appendChild(this.tooltipElement);const e=document.createElement("div");e.className="gm-tooltip-body",this.tooltipElement.appendChild(e);const t=document.createElement("div");t.className="gm-tooltip-arrow",this.tooltipElement.appendChild(t)}setTooltip(e,t,n,i=null){if(!e)return;this.removeTooltip(e);const s=()=>this.showTooltip(e,t,n,i),o=()=>this.hideTooltip(i);e.gmTooltipListeners={mouseEnter:s,mouseLeave:o},e.addEventListener("mouseenter",s),e.addEventListener("mouseleave",o)}removeTooltip(e){e&&e.gmTooltipListeners&&(e.removeEventListener("mouseenter",e.gmTooltipListeners.mouseEnter),e.removeEventListener("mouseleave",e.gmTooltipListeners.mouseLeave),delete e.gmTooltipListeners)}showTooltip(e,t,n,i){i&&i.split(" ").forEach((e=>{this.tooltipElement.classList.add(e)})),this.tooltipElement.querySelector(".gm-tooltip-body").textContent=t,this.tooltipElement.classList.remove("top","bottom","left","right");const s=this.computePosition(e,n);this.tooltipElement.style.left=s.left+"px",this.tooltipElement.style.top=s.top+"px",this.tooltipElement.classList.add(s.position),this.tooltipElement.classList.remove("gm-hideTooltip"),this.tooltipElement.classList.add("gm-showTooltip")}hideTooltip(e){this.tooltipElement.classList.remove("gm-showTooltip"),this.tooltipElement.classList.add("gm-hideTooltip"),e&&requestAnimationFrame((()=>{requestAnimationFrame((()=>{e.split(" ").forEach((e=>{this.tooltipElement.classList.remove(e)}))}))}))}computePosition(e,t){const n=e.getBoundingClientRect(),i=this.tooltipElement.getBoundingClientRect(),s=t?[t]:["bottom","left","right","top"];for(const e of s){let t,s;switch(e){case"top":if(t=n.left+(n.width-i.width)/2,s=n.top-i.height-10,s>0)return{left:Math.max(8,t),top:s,position:"top"};break;case"left":if(t=n.left-i.width-10,s=n.top+(n.height-i.height)/2,t>0)return{left:t,top:Math.max(8,s),position:"left"};break;case"right":if(t=n.right+10,s=n.top+(n.height-i.height)/2,t+i.width<window.innerWidth)return{left:t,top:Math.max(8,s),position:"right"};break;case"bottom":if(t=n.left+(n.width-i.width)/2,s=n.bottom+10,s+i.height<window.innerHeight)return{left:Math.max(8,t),top:s,position:"bottom"}}}const o=n.left+(n.width-i.width)/2,a=n.bottom+10;return{left:Math.max(8,o),top:a,position:"bottom"}}}},4739:(e,t,n)=>{var i=n(6025);e.exports=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}},4840:(e,t,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},4894:(e,t,n)=>{var i=n(1882),s=n(294);e.exports=function(e){return null!=e&&s(e.length)&&!i(e)}},4901:(e,t,n)=>{var i=n(2552),s=n(294),o=n(346),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&s(e.length)&&!!a[i(e)]}},4974:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},4986:(e,t,n)=>{"use strict";const i=n(3065);e.exports=class{constructor(e){this.instance=e,this.toolbar=document.querySelector(".gm-toolbar ul"),this.floatingToolbar=document.querySelector(".gm-floating-toolbar ul"),this.toolbar?!this.instance.options.floatingToolbar||this.floatingToolbar?this.buttonRegistry=new Map:i.error("Floating toolbar container not found."):i.error("Toolbar container not found.")}registerButton({id:e,iconClass:t,title:n="",onClick:s=null,onMousedown:o=null,onMouseup:a=null,dataAttributes:r={},isDisabled:l=!1}){if(this.buttonRegistry.has(e))return i.warn(`Button with ID "${e}" is already registered.`),null;const c=document.createElement("li"),d=document.createElement("div");d.className=`gm-icon-button ${t}`;for(const[e,t]of Object.entries(r))d.setAttribute(`data-${e}`,t);return c.appendChild(d),s&&(c.onclick=s),o&&(c.onmousedown=o),a&&(c.onmouseup=a),this.buttonRegistry.set(e,{iconClass:t,title:n,onClick:s,onMousedown:o,onMouseup:a,dataAttributes:r,isDisabled:l,button:c,buttonIcon:d}),{disable:()=>this.disableButton(e),enable:()=>this.enableButton(e),addClass:t=>this.addButtonClass(e,t),removeClass:t=>this.removeButtonClass(e,t),setActive:(t=!0)=>this.setButtonActive(e,t),setIndicator:t=>this.setButtonIndicator(e,t),getIndicator:()=>this.getButtonIndicator(e),htmlElement:c}}renderButton(e,t=!1){if(!this.buttonRegistry.has(e))return void i.warn(`No button registered with ID "${e}".`);const n=this.buttonRegistry.get(e),{button:s,title:o}=n;t?this.floatingToolbar.appendChild(s):this.toolbar.appendChild(s),this.buttonRegistry.set(e,{...n,isInfloatingBar:t}),this.instance.tooltipManager.setTooltip(s,o,t?"top":"right"===this.instance.options.toolbarPosition?"left":"right","toolbarTitleWidget")}disableButton(e){const t=this.buttonRegistry.get(e);if(!t)return void i.error(`No registred button found with ID "${e}".`);if(t.isDisabled=!0,!t.button)return void i.warn(`No rendered button found with ID "${e}".`);const{button:n,buttonIcon:s}=t;this.instance.tooltipManager.setTooltip(n,this.instance.options.i18n.NOT_SUPPORTED||"Not currently supported","right"===this.instance.options.toolbarPosition?"left":"right"),s.classList.add("gm-disabled-icon-button"),n.onclick=null,n.onmousedown=null,n.onmouseup=null}enableButton(e){const t=this.buttonRegistry.get(e);if(!t)return void i.error(`No registred button found with ID "${e}".`);if(t.isDisabled=!1,!t.button)return void i.warn(`No rendered button found with ID "${e}".`);const{button:n,buttonIcon:s,onClick:o,onMousedown:a,onMouseup:r}=t;s.classList.remove("gm-disabled-icon-button"),o&&(n.onclick=o),a&&(n.onmousedown=a),r&&(n.onmouseup=r)}addButtonClass(e,t){const n=this.buttonRegistry.get(e);n&&n.buttonIcon?n.buttonIcon.classList.add(t):i.warn(`No rendered button found with ID "${e}".`)}removeButtonClass(e,t){const n=this.buttonRegistry.get(e);n&&n.buttonIcon?n.buttonIcon.classList.remove(t):i.warn(`No rendered button found with ID "${e}".`)}setButtonActive(e,t){const n=this.buttonRegistry.get(e);n&&n.button?t?n.buttonIcon.classList.add("gm-active"):n.buttonIcon.classList.remove("gm-active"):i.warn(`No rendered button found with ID "${e}".`)}setButtonIndicator(e,t){const n=this.buttonRegistry.get(e);n?(n.indicator=t,n.button?(n.button.className=[...n.button.classList].filter((e=>!e.startsWith("gm-toolbar-dot-"))).join(" "),t&&t.length&&n.button.classList.add("gm-toolbar-dot-"+t)):i.warn(`No rendered button found with ID "${e}".`)):i.error(`No registred button found with ID "${e}".`)}getButtonIndicator(e){return this.buttonRegistry.has(e)?this.buttonRegistry.get(e).indicator??"":""}getButtonById(e){return this.buttonRegistry.get(e)}renderSeparator(e=!1){const t=document.createElement("li");e?(t.className="gm-v-separator",this.floatingToolbar.appendChild(t)):(t.className="gm-separator",this.toolbar.appendChild(t))}}},5083:(e,t,n)=>{var i=n(1882),s=n(7296),o=n(3805),a=n(7473),r=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||s(e))&&(i(e)?p:r).test(a(e))}},5250:(e,t,n)=>{var i=n(7217),s=n(7805),o=n(6649),a=n(2824),r=n(3805),l=n(7241),c=n(4974);e.exports=function e(t,n,d,h,p){t!==n&&o(n,(function(o,l){if(p||(p=new i),r(o))a(t,n,l,d,e,h,p);else{var u=h?h(c(t,l),o,l+"",t,n,p):void 0;void 0===u&&(u=o),s(t,l,u)}}),l)}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5481:(e,t,n)=>{var i=n(9325)["__core-js_shared__"];e.exports=i},5527:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},5529:(e,t,n)=>{var i=n(9344),s=n(8879),o=n(5527);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:i(s(e))}},5588:e=>{"use strict";e.exports=class{static get name(){return"MultiTouchEvents"}constructor(e){this.instance=e,this.instance.touchEvents=this,this.instance.touchEventsEnabled=!0}onScreenTouchStart(e){e.preventDefault(),e.stopPropagation();const t={type:"MULTI_TOUCH",nb:e.targetTouches.length,mode:0,points:[]};for(let n=0;n<e.targetTouches.length;n++){const i=e.targetTouches[n];this.instance.x=this.instance.coordinateUtils.getXCoordinate(i),this.instance.y=this.instance.coordinateUtils.getYCoordinate(i),t.points.push({x:this.instance.x,y:this.instance.y})}this.instance.sendEvent(t)}onScreenTouchMove(e){e.preventDefault(),e.stopPropagation();const t={type:"MULTI_TOUCH",nb:e.targetTouches.length,mode:2,points:[]};for(let n=0;n<e.targetTouches.length;n++){const i=e.targetTouches[n];this.instance.x=this.instance.coordinateUtils.getXCoordinate(i),this.instance.y=this.instance.coordinateUtils.getYCoordinate(i),t.points.push({x:this.instance.x,y:this.instance.y})}this.instance.sendEvent(t)}onScreenTouchEnd(e){e.preventDefault(),e.stopPropagation();const t={type:"MULTI_TOUCH",nb:e.targetTouches.length,mode:1,points:[]};for(let n=0;n<e.targetTouches.length;n++){const i=e.targetTouches[n];this.instance.x=this.instance.coordinateUtils.getXCoordinate(i),this.instance.y=this.instance.coordinateUtils.getYCoordinate(i),t.points.push({x:this.instance.x,y:this.instance.y})}this.instance.sendEvent(t)}addTouchCallbacks(){this.instance.addListener(this.instance.video,"touchstart",this.onScreenTouchStart.bind(this),!1),this.instance.addListener(this.instance.video,"touchend",this.onScreenTouchEnd.bind(this),!1),this.instance.addListener(this.instance.video,"touchmove",this.onScreenTouchMove.bind(this),!1)}}},5749:(e,t,n)=>{var i=n(1042);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this}},5808:(e,t,n)=>{"use strict";const{progressBar:i}=n(2852),s={createFileUploader:({onFileSelect:e=null,onUploadProgress:t=null,onUploadComplete:n=null,onUploadError:s=null,onUploadCanceled:o=null,dragDropText:a="DRAG & DROP FILES",browseButtonText:r="BROWSE",accept:l=null,classes:c="",i18n:d={}})=>{let h=null,p=null,u=null;const m=document.createElement("div");m.className=c+" gm-file-uploader";const g=document.createElement("div");g.className="gm-drag-drop-area";const b=document.createElement("input");b.type="file",l&&(b.accept=l),b.style.display="none",b.onchange=e=>{Z(e.target.files[0])};const v=document.createElement("i");v.className="gm-addFile-icon";const E=document.createElement("div");E.className="drop-text",E.innerHTML=`<div class='drop-text-1'>\n            <b>${a}</b>\n            </div>\n            <div class='drop-text-2'>${d.OR||"or"}</div>`;const C=document.createElement("button");C.innerHTML=r,C.className="gm-btn gm-gradient-button",C.onclick=()=>{b.click()};const f=document.createElement("div");f.className="gm-drag-over-container";const y=document.createElement("i");y.className="gm-drag-placeholder-icon",f.appendChild(y),g.appendChild(f),g.appendChild(b),g.appendChild(v),g.appendChild(E),g.appendChild(C);const T=document.createElement("div");T.className="gm-section gm-upload-progress hidden";const w=document.createElement("div");w.className="gm-uploading-file-title",w.innerHTML="Uploading files";const S=document.createElement("div");S.className="gm-info-flex";const x=document.createElement("i");x.className="gm-downloadFile-icon";const k=document.createElement("div");k.className="gm-wrapper-uploading-text-and-progress";const L=document.createElement("div");L.className="gm-progress-text-container";const I=document.createElement("div");I.className="gm-progress-text gm-dots-jump-loader",I.innerHTML="Uploading";const D=document.createElement("div");D.className="gm-file-name";const A=document.createElement("i");A.className="gm-cancel-update-icon",A.onclick=()=>{b.value="",o&&o(),q()},L.appendChild(I),L.appendChild(D),L.appendChild(A);const M=i.createProgressBar({value:0,max:100}),R=document.createElement("div");R.className="gm-size-text",k.appendChild(L),k.appendChild(M.element),k.appendChild(R),S.appendChild(x),S.appendChild(k),T.appendChild(w),T.appendChild(S);const O=document.createElement("div");O.className="gm-section gm-upload-error hidden";const P=document.createElement("div");P.className="gm-info-flex";const N=document.createElement("div");N.className="gm-error-title",N.innerHTML="Error";const B=document.createElement("i");B.className="gm-error-icon";const _=document.createElement("div");_.className="gm-error-text",P.appendChild(B),P.appendChild(_),O.appendChild(N),O.appendChild(P);const F=document.createElement("div");F.className="gm-section gm-upload-success hidden";const U=document.createElement("div");U.className="gm-info-flex";const X=document.createElement("div");X.className="gm-uploading-file-title",X.innerHTML="Uploading files";const V=document.createElement("i");V.className="gm-downloadFile-icon";const W=document.createElement("div");W.className="gm-success-text";const G=document.createElement("div");G.className="gm-info-flex gm-completed-text";const H=document.createElement("i");H.className="gm-check-icon";const K=document.createElement("div");K.innerHTML=d.COMPLETED||"Completed",G.appendChild(K),G.appendChild(H),U.appendChild(V),U.appendChild(W),U.appendChild(G),F.appendChild(X),F.appendChild(U),m.appendChild(g),m.appendChild(T),m.appendChild(O),m.appendChild(F);const z=()=>{O.classList.add("hidden")},j=()=>{F.classList.add("hidden")},$=()=>{T.classList.add("hidden")},Y=e=>{$(),j(),O.classList.remove("hidden"),_.innerHTML=e,s&&s(e)},q=()=>{$(),j(),M.setValue(0),R.innerHTML="",n&&n()},Z=t=>{t?!l||l&&t.name.toLowerCase().endsWith(l.toLowerCase())?(z(),j(),(e=>{z(),j(),T.classList.remove("hidden");const t=(e=>{let t=e;if(t.length>30){const[e,n=""]=t.split(/(?=\.[^.]+$)/);t=`${e.slice(0,30)}...`+n}return t})(e.name);D.innerHTML=t})(t),e&&e(t)):Y(d.FILE_TYPE_NOT_APK||`Invalid file type. Only ${l} files are supported.\n                        Please select a file with the correct extension.`):Y("Invalid drop content. Please drag and drop a file, not text or other data.")},J=()=>{g.addEventListener("dragover",h),g.addEventListener("dragleave",p),g.addEventListener("drop",u)},Q=e=>{e?(C.disabled=!1,C.classList.remove("disabled"),g.classList.remove("disabled"),J()):(C.disabled=!0,C.classList.add("disabled"),g.classList.add("disabled"),g.removeEventListener("dragover",h),g.removeEventListener("dragleave",p),g.removeEventListener("drop",u))};return h=e=>{e.preventDefault(),e.stopPropagation(),g.classList.add("dragover")},p=e=>{e.preventDefault(),e.stopPropagation(),g.classList.remove("dragover")},u=e=>{e.preventDefault(),e.stopPropagation(),g.classList.remove("dragover"),Z(e.dataTransfer.files[0])},J(),{element:m,setEnabled:Q,reset:()=>{q(),z(),j(),Q(!0)},updateProgress:(e,n,i)=>{M.setValue(e),R.innerHTML=`(${n} ${d.OF||"of"} ${i}Mo)`,t&&t(e,n,i)},uploadingStop:q,showUploadError:Y,showUploadSuccess:()=>{$(),z(),F.classList.remove("hidden"),W.innerHTML=D.innerHTML,n&&n()},startUpload:Z}}};e.exports=s},6009:(e,t,n)=>{e=n.nmd(e);var i=n(4840),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s&&i.process,r=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=r},6025:(e,t,n)=>{var i=n(5288);e.exports=function(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}},6110:(e,t,n)=>{var i=n(5083),s=n(392);e.exports=function(e,t){var n=s(e,t);return i(n)?n:void 0}},6369:(e,t,n)=>{"use strict";const i=n(801);n(3065).setDefaultLevel("debug"),e.exports=class extends i{static get name(){return"Screenshot"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.screenshot=this,this.registerToolbarButton()}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-screenshot-button",title:this.i18n.SCREENSHOT_TITLE||"Screenshot",onClick:e=>{this.onScreenshotClick(e)}})}onScreenshotClick(e){e.preventDefault();const t=document.createElement("canvas"),n=t.getContext("2d"),{video:i}=this.instance;if(t.width=i.videoWidth,t.height=i.videoHeight,!(n&&i instanceof HTMLVideoElement))return;n.drawImage(i,0,0,i.videoWidth,i.videoHeight,0,0,i.videoWidth,i.videoHeight);const s=document.createElement("a");s.download="device-screenshot.png",document.body.appendChild(s);let o=t.toDataURL("image/png");o&&(o=o.replace(/^data:image\/[^;]*/,"data:application/octet-stream")),s.href=o,s.click(),setTimeout((()=>{document.body.removeChild(s)}),100)}}},6378:(e,t,n)=>{"use strict";const i=n(801),{dropdownSelect:s,textInput:o,chipTag:a}=n(2852),r=n(9286),l="Custom",c=1048576;e.exports=class extends i{static get name(){return"IOThrottling"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.diskIO=this,this.lastReadByteRateReceived=0,this.profilesForDropdown=r.map((e=>{const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");return i.style.marginRight="5px",t.appendChild(i),t.appendChild(n),t.style.display="flex",t.style.justifyContent="space-between",i.innerHTML=e.name,n.innerHTML=e.label||"",{element:t,value:e.readByteRate??e.name,valueToDisplay:e.name||""}})),this.registerToolbarButton(),this.renderWidget(),this.instance.registerEventCallback("diskio",(e=>{const t=e.split(" ");"readbyterate"===t[0]&&2===t.length&&(this.lastReadByteRateReceived=t[1]/c,this.updateDiskIOValues(this.lastReadByteRateReceived))}))}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-iothrottling-button",title:this.i18n.IOTHROTTLING_TITLE||"Disk I/O",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.IOTHROTTLING_TITLE||"Disk I/O",classes:"gm-iothrottling-plugin",width:378,height:400});this.container=e;const t=document.createElement("div");t.className="gm-inputs";const n=this.i18n.IOTHROTTLING_PROFILE||"Profile";t.innerHTML="<label>"+n+"</label>",this.dropdownProfile=s.createDropdown({items:this.profilesForDropdown,value:0,dropdownMaxHeight:205,hasCheckmark:!0,onChange:e=>{this.updateDiskIOValues(e)}}),t.appendChild(this.dropdownProfile.element);const i=document.createElement("div");i.classList.add("gm-fields");const r=document.createElement("div");r.classList.add("gm-fields-container"),i.appendChild(r);const l=document.createElement("div");l.innerHTML=this.i18n.IOTHROTTLING_READ_BYTERATE||"Read speed limit:",this.readByteRate=o.createTextInput({value:"50",classes:"gm-iothrottling-readbyterate",regexFilter:/^[0-9]*$/,messageField:!0,onChange:e=>{const t=Number(e);isNaN(t)||t<0||t>4095?(this.readByteRate.setErrorMessage("0 to 4095"),this.applyBtn.disabled=!0):(this.readByteRate.setErrorMessage(""),this.applyBtn.disabled=!1)}});const c=document.createElement("div");c.innerHTML=this.i18n.IOTHROTTLING_BYTERATE_UNIT||"MiB per sec",c.classList.add("gm-units");const d=document.createElement("div");d.innerHTML=this.i18n.IOTHROTTLING_BYTERATE_NONE||"No disk performance alteration",d.classList.add("gm-noThrottling"),r.appendChild(l),r.appendChild(this.readByteRate.element),r.appendChild(c),r.appendChild(d);const h=document.createElement("div");h.className="gm-separator";const p=document.createElement("div");p.className="gm-iothrottling-apply gm-actions";const u=document.createElement("div");u.className="gm-iothrottling-status";const m=a.createChip();u.appendChild(m.element),this.applyBtn=document.createElement("button"),this.applyBtn.className="gm-btn",this.applyBtn.innerHTML=this.i18n.IOTHROTTLING_UPDATE||"Apply",this.applyBtn.onclick=this.sendDataToInstance.bind(this),p.appendChild(u),p.appendChild(this.applyBtn);const g=document.createElement("div");g.className="gm-iothrottling-clearcache gm-actions";const b=this.i18n.CLEAR_CACHE_PROFILE||"Disk cache";g.innerHTML="<label>"+b+"</label>",this.clearCacheBtn=document.createElement("button"),this.clearCacheBtn.className="gm-btn",this.clearCacheBtn.innerHTML=this.i18n.IOTHROTTLING_CLEAR_CACHE||"Clear",this.clearCacheBtn.onclick=this.clearCache.bind(this),g.appendChild(this.clearCacheBtn),this.container.appendChild(t),this.container.appendChild(i),this.container.appendChild(p),this.container.appendChild(h),this.container.appendChild(g)}sendDataToInstance(e){e.preventDefault();const t={channel:"diskio",messages:["set readbyterate "+this.readByteRate.getValue()*c,"clearcache"]};this.instance.sendEvent(t)}clearCache(e){this.container.classList.remove("gm-iothrottling-cache-cleared"),this.container.offsetWidth,this.container.classList.add("gm-iothrottling-cache-cleared"),e.preventDefault();this.instance.sendEvent({channel:"diskio",messages:["clearcache"]})}updateDiskIOValues(e){this.container.classList.remove("gm-iothrottling-saved"),this.container.classList.remove("gm-iothrottling-none");const t=e===l;if(t){this.profilesForDropdown.find((e=>e.value===this.lastReadByteRateReceived))||this.container.classList.add("gm-iothrottling-saved")}else e===this.lastReadByteRateReceived&&this.container.classList.add("gm-iothrottling-saved");if(!t&&(Number.isNaN(e)||e<=0))return this.readByteRate.setValue(0),this.dropdownProfile.setValue(this.profilesForDropdown.find((e=>0===e.value))),void this.container.classList.add("gm-iothrottling-none");const n=this.profilesForDropdown.find((t=>t.value===e));if(!t&&n)this.readByteRate.setReadOnly(!0),this.dropdownProfile.setValue(n),this.readByteRate.setValue(e);else{this.readByteRate.setReadOnly(!1);const e=this.profilesForDropdown.find((e=>e.value===l));this.dropdownProfile.setValue(e),this.readByteRate.setValue(this.lastReadByteRateReceived)}}}},6449:e=>{var t=Array.isArray;e.exports=t},6547:(e,t,n)=>{var i=n(3360),s=n(5288),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&s(a,n)&&(void 0!==n||t in e)||i(e,t,n)}},6649:(e,t,n)=>{var i=n(3221)();e.exports=i},6717:(e,t,n)=>{"use strict";const i=n(801),s=n(3065),{progressBar:o}=n(2852),a=n(5808);s.setDefaultLevel("debug");class r{constructor(e){this.plugin=e,this.i18n=e.i18n,this.progressBar=null,this.progressPercentage=null,this.progressText=null}render(){const e=document.createElement("div");e.className="installing-gapps-view-container";const t=document.createElement("div");t.className="gm-section";const n=document.createElement("div");n.className="gm-gapps-text",n.innerHTML=this.i18n.GAPPS_INSTALL_INTRO_TEXT||"You are about to install Open GApps on your virtual device.",t.appendChild(n);const i=document.createElement("div");i.className="gm-separator";const s=document.createElement("div");s.className="gm-section gm-progress-section";const a=document.createElement("i");a.className="gm-droid-icon",this.progressText=document.createElement("div"),this.progressText.className="gm-progress-text gm-dots-jump-loader",this.progressText.innerHTML=this.i18n.DOWLOADING_TEXT||"Downloading",this.progressPercentage=document.createElement("div"),this.progressPercentage.className="gm-progress-percentage",this.progressPercentage.innerHTML="0%";const r=document.createElement("div");r.className="gm-progress-text-container",r.appendChild(this.progressText),r.appendChild(this.progressPercentage),this.progressBar=o.createProgressBar({value:0,max:100}),s.appendChild(a),s.appendChild(r),s.appendChild(this.progressBar.element);const l=document.createElement("div");l.className="gm-separator";const c=document.createElement("div");c.className="gm-section gm-actions gm-progress-actions";const d=document.createElement("button");d.innerText=this.i18n.CANCEL_BUTTON_TEXT||"CANCEL",d.className="gm-btn gm-dont-close",d.onclick=()=>{this.plugin.instance.sendEvent({channel:"systempatcher",messages:["cancel"]}),this.plugin.setView("InitialView")},c.appendChild(d),e.appendChild(t),e.appendChild(i),e.appendChild(s),e.appendChild(l),e.appendChild(c);return this.plugin.instance.sendEvent({channel:"systempatcher",messages:["install opengapps"]}),e}updateProgress(e,t){this.progressPercentage.innerHTML=`${e}%`,this.progressText.innerHTML=t,this.progressBar.setValue(e)}}class l{constructor(e){this.plugin=e,this.i18n=e.i18n,this.plugin.instance.store.dispatch({type:"ADD_TRACKED_EVENT",payload:{category:"opengapps",action:"installed"}})}render(){const e=document.createElement("div");e.className="installation-success-view-container";document.createElement("div").className="gm-separator";const t=document.createElement("div");t.className="gm-section gm-success-message-section";const n=document.createElement("i");n.className="gm-check-icon";const i=document.createElement("div");i.className="gm-success-text",i.innerHTML=this.i18n.INSTALL_SUCCESS_TITLE||"OPEN GAPPS SUCCESSFULLY INSTALLED";const s=document.createElement("div");s.className="gm-success-description",s.innerHTML=this.i18n.INSTALL_SUCCESS_DESCRIPTION||"Congratulation!<br/>Open GApps have been successfully installed on the virtual device.<br/>Please restart the virtual device to complete the installation.",t.appendChild(n),t.appendChild(i),t.appendChild(s);const o=document.createElement("div");o.className="gm-separator";const a=document.createElement("div");a.className="gm-section gm-actions gm-success-actions";const r=document.createElement("button");r.innerText=this.i18n.CLOSE_BUTTON_TEXT||"CLOSE",r.className="gm-btn",r.onclick=()=>{this.plugin.closeWidget(),this.plugin.viewAtNextopening="InitialView"};const l=document.createElement("button");return l.innerText=this.i18n.RESTART_BUTTON_TEXT||"RESTART DEVICE",l.className="gm-btn gm-gradient-button",l.onclick=()=>{this.plugin.instance.sendEvent({channel:"systempatcher",messages:["reboot"]}),this.plugin.closeWidget(),this.plugin.viewAtNextopening="InitialView"},a.appendChild(r),a.appendChild(l),e.appendChild(t),e.appendChild(o),e.appendChild(a),e}}class c{constructor(e){this.plugin=e,this.i18n=e.i18n,this.plugin.instance.store.dispatch({type:"ADD_TRACKED_EVENT",payload:{category:"opengapps",action:"install_failed"}})}render(){const e=document.createElement("div");e.className="installation-failed-view-container";document.createElement("div").className="gm-separator";const t=document.createElement("div");t.className="gm-section gm-failed-message-section";const n=document.createElement("i");n.className="gm-failed-icon";const i=document.createElement("div");i.className="gm-failed-text",i.innerHTML=this.i18n.INSTALL_FAILED_TITLE||"FAILED TO INSTALL GAPPS";const s=document.createElement("div");s.className="gm-failed-description",s.innerHTML=this.i18n.INSTALL_FAILED_DESCRIPTION||"An error occured while installing Open GApps.<br/>Please try again. \n            If the issue persists, contact support.",t.appendChild(n),t.appendChild(i),t.appendChild(s);const o=document.createElement("div");o.className="gm-separator";const a=document.createElement("div");a.className="gm-section gm-actions gm-failed-actions";const r=document.createElement("button");return r.innerText=this.i18n.CLOSE_BUTTON_TEXT||"CLOSE",r.className="gm-btn",r.onclick=()=>{this.plugin.closeWidget(),this.plugin.viewAtNextopening="InitialView"},a.appendChild(r),e.appendChild(t),e.appendChild(o),e.appendChild(a),e}}class d{constructor(e){this.plugin=e,this.i18n=e.i18n}render(){const e=document.createElement("div");e.className="disclaimer-view-container";const t=document.createElement("div");t.className="gm-section";const n=document.createElement("div");n.className="gm-gapps-text",n.innerHTML=this.i18n.GAPPS_INSTALL_INTRO_TEXT||"You are about to install Open GApps on your virtual device.",t.appendChild(n);const i=document.createElement("div");i.className="gm-separator";const s=document.createElement("div");s.className="gm-section gm-disclaimer-text";const o=document.createElement("div");o.className="gm-disclaimer-header";const a=document.createElement("i");a.className="gm-warning-icon";const r=document.createElement("div");r.innerHTML=this.i18n.DISCLAIMER_HEADER||"DISCLAIMER",o.appendChild(a),o.appendChild(r);const l=document.createElement("div");l.className="gm-disclaimer-content",l.innerHTML=this.i18n.DISCLAIMER_TEXT||"GENYMOBILE SAS assumes no liability whatsoever resulting from the download, install and use of Google Play Services within your virtual devices. You are solely responsible for the use and assume all liability related thereto.<br/><br/><br/>\nMoreover, GENYMOBILE SAS disclaims any warranties of any kind, either express or implied, including, without limitation, implied warranties of merchantability, or fitness for a particular purpose regarding the compatibility of the Open GApps packages with any version of Genymotion.<br/><br/><br/>\nIn no event shall GENYMOBILE SAS or its affiliates, or their respective officers, directors, employees, or agents be liable with respect to your download or use of the Google Play Services and you release GENYMOBILE SAS from any liability related thereto.\nYou agree to defend, indemnify and hold harmless GENYMOBILE SAS for any claims or costs related to your use or download of the Google Play Services.",s.appendChild(o),s.appendChild(l);const c=document.createElement("div");c.className="gm-separator";const d=document.createElement("div");d.className="gm-section gm-actions gm-disclaimer-actions";const h=document.createElement("button");h.innerText=this.i18n.BACK_BUTTON_TEXT||"BACK",h.className="gm-btn gm-dont-close",h.onclick=()=>{this.plugin.setView("InitialView")};const p=document.createElement("button");return p.innerText=this.i18n.INSTALL_GAPPS_BUTTON_TEXT||"INSTALL GAPPS",p.className="gm-btn gm-dont-close gm-gradient-button",p.onclick=()=>{this.plugin.setView("InstallingGAPPSView")},d.appendChild(h),d.appendChild(p),e.appendChild(t),e.appendChild(i),e.appendChild(s),e.appendChild(c),e.appendChild(d),e}}class h{constructor(e){this.plugin=e,this.instance=e.instance,this.i18n=e.i18n,this.fileUploadWorker=null,this.removeListenerDragAndDropOver=null,this.removeListenerDragAndDropLeave=null,this.removeListenerDragAndDropDrop=null;try{this.fileUploadWorker=this.plugin.instance.createFileUploadWorker(),this.fileUploadWorker.onmessage=e=>{const t=e.data;switch(t.code){case"SUCCESS":this.fileUploaderComponent.showUploadSuccess(),this.plugin.instance.store.getters.isWidgetOpened(this.plugin.overlayID)||this.plugin.toolbarBtn.setIndicator("success");break;case"FAIL":this.fileUploaderComponent.uploadingStop(),this.fileUploaderComponent.showUploadError(this.i18n.FILE_SEND_APK_FAILED||"Something went wrong while processing the APK file. \n                                Please make sure the file is valid and try again."),this.plugin.instance.store.getters.isWidgetOpened(this.plugin.overlayID)||this.plugin.toolbarBtn.setIndicator("failed");break;case"PROGRESS":this.fileUploaderComponent.updateProgress(100*t.value,t.uploadedSize,t.fileSize);break;case"SOCKET_FAIL":this.fileUploaderComponent.showUploadError(this.i18n.FILE_UPLOAD_CONNECTION_FAILED||"Something went wrong while connecting to the server."),this.fileUploaderComponent.setEnabled(!1);break;case"SOCKET_SUCCESS":this.fileUploaderComponent.reset()}}}catch(e){s.error(e),this.plugin.instance.store.dispatch({type:"DRAG_AND_DROP_UPLOAD_FILE_ENABLED",payload:!1})}}render(){const e=document.createElement("div");e.className="initial-view-container";const t=document.createElement("div");t.className="gm-section";const n=document.createElement("div");n.className="gm-gapps-text",n.innerHTML=this.i18n.GAPPS_TEXT||"You can install <b>Open GApps</b> to access <b>Google Play Store</b> services, or <b>APK files</b> on your virtual device.",t.appendChild(n);const i=document.createElement("div");i.className="gm-separator";const s=document.createElement("div");s.className="gm-section gm-actions gm-gapps-status";const o=document.createElement("div");o.className="gm-info-flex";const r=document.createElement("i");r.className="gm-gapps-icon";const l=document.createElement("div");l.innerHTML=this.i18n.OPEN_GAPPS_TEXT||"Open GApps",o.appendChild(r),o.appendChild(l),this.installBtn=document.createElement("button"),this.installBtn.innerHTML=this.i18n.GAPPS_INSTALL||"INSTALL GAPPS",this.installBtn.className="gm-btn gm-gradient-button gm-dont-close",this.installBtn.onclick=()=>{this.plugin.setView("DisclaimerView")},this.installedDiv=document.createElement("div"),this.installedDiv.className="gm-gapps-installed-status hidden";const c=document.createElement("span");c.textContent=this.i18n.GAPPS_INSTALLED||"Installed";const d=document.createElement("i");d.className="gm-check-icon",this.installedDiv.appendChild(c),this.installedDiv.appendChild(d),this.plugin.GAPPSInstalled&&this.setGAPPSInstalled(),s.appendChild(o),s.appendChild(this.installBtn),s.appendChild(this.installedDiv);const h=document.createElement("div");h.className="gm-separator";const p=document.createElement("div");p.className="gm-section";const u=document.createElement("div");u.className="gm-apk-title";const m=document.createElement("i");m.className="gm-downloadFile-icon";const g=document.createElement("div");return g.innerHTML=this.i18n.APK_HEADER_TEXT||"Install APK files",u.appendChild(m),u.appendChild(g),p.appendChild(u),this.fileUploaderComponent=a.createFileUploader({onFileSelect:e=>{this.handleFileUpload(e),this.instance.root.classList.add("gm-uploading-in-progess")},onUploadCanceled:()=>{this.fileUploadWorker.postMessage({type:"cancel"})},onUploadComplete:()=>{this.plugin.instance.store.dispatch({type:"DRAG_AND_DROP_UPLOAD_FILE_ENABLED",payload:!0}),this.plugin.toolbarBtn.setIndicator(""),this.instance.root.classList.remove("gm-uploading-in-progess")},dragDropText:this.i18n.DRAG_DROP_TEXT||"DRAG & DROP APK FILE TO INSTALL",browseButtonText:this.i18n.BROWSE_BUTTON_TEXT||"BROWSE",accept:".apk",classes:"gm-apk-uploader",i18n:this.plugin.i18n}),p.appendChild(this.fileUploaderComponent.element),e.appendChild(t),e.appendChild(i),e.appendChild(s),e.appendChild(h),e.appendChild(p),this.instance.store.state.isDragAndDropForUploadFileEnabled?(this.fileUploaderComponent.setEnabled(!0),this.addListenerOnRoot()):(this.fileUploaderComponent.setEnabled(!1),this.removeListenerOnRoot()),this.instance.store.subscribe((({isDragAndDropForUploadFileEnabled:e})=>{e?(this.fileUploaderComponent.setEnabled(!0),this.addListenerOnRoot()):(this.fileUploaderComponent.setEnabled(!1),this.removeListenerOnRoot())}),["isDragAndDropForUploadFileEnabled"]),e}setGAPPSInstalled(){this.installBtn.classList.add("hidden"),this.installedDiv.classList.remove("hidden")}handleFileUpload(e){this.plugin.toolbarBtn.setIndicator("notification"),this.plugin.instance.store.dispatch({type:"DRAG_AND_DROP_UPLOAD_FILE_ENABLED",payload:!1});const t={type:"upload",file:e};this.fileUploadWorker.postMessage(t)}addListenerOnRoot(){this.removeListenerDragAndDropOver=this.instance.addListener(this.instance.root,"dragover",(e=>{e.preventDefault(),e.stopPropagation()})),this.removeListenerDragAndDropLeave=this.instance.addListener(this.instance.root,"dragleave",(e=>{e.preventDefault(),e.stopPropagation()})),this.removeListenerDragAndDropDrop=this.instance.addListener(this.instance.root,"drop",(e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.files[0];t&&t.name&&t.name.toLowerCase().endsWith(".apk")&&this.fileUploaderComponent.startUpload(t)}))}removeListenerOnRoot(){this.removeListenerDragAndDropOver?.(),this.removeListenerDragAndDropDrop?.(),this.removeListenerDragAndDropLeave?.()}}e.exports=class extends i{static get name(){return"GAPPSInstall"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.gappsInstall=this,this.instanciatedViews=new Map,this.currentViewType=null,this.viewAtNextopening=null,this.GAPPSInstalled=!1,this.registerToolbarButton(),this.renderWidget(),this.instance.registerEventCallback("systempatcher",(e=>{this.toolbarBtn.setIndicator("");const t=this.instanciatedViews.get("InstallingGAPPSView"),n=e.split(/ (.+)/);if("status"===n[0]){const e=n[1].split(" ");if("downloading"===e[0]&&e.length>=3){this.toolbarBtn.setIndicator("notification");const n=parseInt(e[1]),i=parseInt(e[2]);if(0===i||Number.isNaN(i))return;const s=Math.round(100*n/i);t&&t.updateProgress(s,this.i18n.UPLOADER_DOWNLOADING||"Downloading")}else if("installing"===e[0])this.toolbarBtn.setIndicator("notification"),t&&t.updateProgress(100,this.i18n.UPLOADER_INSTALLING||"Installing");else if("ready"===e[0]&&e.length>=2){e[1].includes("opengapps")&&(this.toolbarBtn.setIndicator(""),this.GAPPSInstalled=!0,this.instanciatedViews.get("InitialView").setGAPPSInstalled()),t&&t.updateProgress(100,this.i18n.UPLOADER_INSTALLED||"Installed");const n={channel:"systempatcher",messages:["notify last_result"]};this.instance.sendEvent(n)}}else if("last_result"===n[0]&&(this.toolbarBtn.setIndicator(""),"InstallingGAPPSView"===this.currentViewType))switch(n[1]){case"success":this.setView("InstallationSuccessView");break;case"unavailable":case"network_error":case"corrupted_archive":case"install_error":this.setView("InstallationFailedView")}}));const n=this.instanciatedViews.get("InitialView");this.instance.store.state.isDragAndDropForUploadFileEnabled?n.fileUploaderComponent.setEnabled(!0):n.fileUploaderComponent.setEnabled(!1),this.instance.store.subscribe((({isDragAndDropForUploadFileEnabled:e})=>{e?n.fileUploaderComponent.setEnabled(!0):n.fileUploaderComponent.setEnabled(!1)}),["isDragAndDropForUploadFileEnabled"])}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-gapps-button",title:this.i18n.GAPPS_TITLE||"Install APPS",onClick:()=>{!this.instance.store.getters.isWidgetOpened(this.overlayID)&&["success","failed"].includes(this.toolbarBtn.getIndicator())&&this.toolbarBtn.setIndicator(""),this.toggleWidget()}})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.GAPPS_TITLE||"Install APPS",classes:"gm-gapps-plugin",width:486,height:726});this.container=e,this.viewsContainer=document.createElement("div"),this.viewsContainer.className="gm-gapps-views-container",this.container.appendChild(this.viewsContainer),this.setView("InitialView")}setView(e){let t=this.instanciatedViews.get(e);if(!t){switch(e){case"InitialView":t=new h(this);break;case"DisclaimerView":t=new d(this);break;case"InstallingGAPPSView":t=new r(this);break;case"InstallationSuccessView":t=new l(this);break;case"InstallationFailedView":t=new c(this);break;default:return void s.error(`Unknown view type: ${e}`)}this.instanciatedViews.set(e,t)}this.viewsContainer.innerHTML="",this.currentViewType=e,this.viewsContainer.appendChild(t.render())}toggleWidget(){this.viewAtNextopening&&!this.instance.store.getters.isWidgetOpened(this.overlayID)&&this.setView(this.viewAtNextopening),super.toggleWidget()}}},6721:(e,t,n)=>{var i=n(1042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(t,e)?t[e]:void 0}},6757:(e,t,n)=>{var i=n(1033),s=Math.max;e.exports=function(e,t,n){return t=s(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,r=s(o.length-t,0),l=Array(r);++a<r;)l[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(l),i(e,this,c)}}},6800:(e,t,n)=>{var i=n(5288),s=n(4894),o=n(361),a=n(3805);e.exports=function(e,t,n){if(!a(n))return!1;var r=typeof t;return!!("number"==r?s(n)&&o(t,n.length):"string"==r&&t in n)&&i(n[t],e)}},6924:(e,t,n)=>{var i=n(5250),s=n(999)((function(e,t,n,s){i(e,t,n,s)}));e.exports=s},6954:(e,t,n)=>{"use strict";n(4112);const i={DeviceRenderer:n(2477),DeviceRendererFactory:n(8531),CoordinateUtils:n(3794),KeyboardEvents:n(173),MouseEvents:n(3535),MediaManager:n(7394),GamepadManager:n(2123)};e.exports=i},7167:(e,t,n)=>{var i=n(4901),s=n(7301),o=n(6009),a=o&&o.isTypedArray,r=a?s(a):i;e.exports=r},7217:(e,t,n)=>{var i=n(79),s=n(1420),o=n(938),a=n(3605),r=n(9817),l=n(945);function c(e){var t=this.__data__=new i(e);this.size=t.size}c.prototype.clear=s,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=r,c.prototype.set=l,e.exports=c},7241:(e,t,n)=>{var i=n(695),s=n(2903),o=n(4894);e.exports=function(e){return o(e)?i(e,!0):s(e)}},7296:(e,t,n)=>{var i,s=n(5481),o=(i=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(e){return!!o&&o in e}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},7334:e=>{e.exports=function(e){return function(){return e}}},7394:(e,t,n)=>{"use strict";const i=n(3065);i.setDefaultLevel("debug"),e.exports=class{constructor(e,t=e.options.microphone,n=1280,s=720){if(this.instance=e,this.instance.mediaManager=this,!navigator.mediaDevices)return i.error("MediaDevices API unsupported: camera and microphone won't be available."),void(this.instance.mediaEventsEnabled=!1);this.setupPermissions(),this.instance.mediaEventsEnabled=!0,this.videoStreaming=!1,this.audioStreaming=!1,this.videoWidth=n,this.videoHeight=s,this.videoWithMicrophone=t,this.instance.apiManager.registerFunction({name:"mute",category:"media",fn:()=>{this.instance.video.isMuted=!0,this.instance.video.muted=!0},description:"Mute the video by setting the muted property to true. This function silences the audio of the current video instance."}),this.instance.apiManager.registerFunction({name:"unmute",category:"media",fn:()=>{this.instance.video.isMuted=!1,this.instance.video.muted=!1},description:"Unmute the video by setting the muted property to false. This function restores the audio of the current video instance."})}async setupPermissions(){if(!navigator.permissions)return!1;if(this.instance.options.microphone)try{const e=await navigator.permissions.query({name:"microphone"});i.debug(`microphone ${e.state}`),this.microphonePermissionObject=e,this.instance.addListener(e,"change",this.onMicrophonePermissionChange.bind(this))}catch(e){return i.warn("Can't get microphone permission object",e),!1}try{const e=await navigator.permissions.query({name:"camera"});i.debug(`camera ${e.state}`),this.cameraPermissionObject=e,this.instance.addListener(e,"change",this.onCameraPermissionChange.bind(this))}catch(e){return i.warn("Can't get camera permission object",e),!1}return!0}async toggleVideoStreaming(){return this.videoStreaming?this.stopVideoStreaming():this.startVideoStreaming()}async toggleAudioStreaming(){return this.audioStreaming?this.stopAudioStreaming():this.startAudioStreaming()}async startVideoStreaming(){if(!navigator.mediaDevices)return!1;try{const e=await navigator.mediaDevices.getUserMedia({audio:this.videoWithMicrophone,video:{width:this.videoWidth,height:this.videoHeight}});return i.debug("Client video stream ready"),this.videoStreaming=!0,this.localVideoStream=e,this.addVideoStream(e)}catch(e){return this.onVideoStreamError(e),!1}}async startAudioStreaming(){if(!navigator.mediaDevices)return!1;try{const e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});i.debug("Client audio stream ready"),this.audioStreaming=!0,this.localAudioStream=e;return await this.addAudioStream(e)}catch(e){return this.onAudioStreamError(e),!1}}onVideoStreamError(e){i.error("Can't start client video stream",e)}onAudioStreamError(e){i.error("Can't start client audio stream",e)}async stopVideoStreaming(){if(!this.videoStreaming)return!1;i.debug("removed local video stream");const e=await this.removeVideoStream(this.localVideoStream);return this.localVideoStream=null,this.videoStreaming=!1,e}async stopAudioStreaming(){if(!this.audioStreaming)return!1;i.debug("removed local audio stream");const e=await this.removeAudioStream(this.localAudioStream);return this.localAudioStream=null,this.audioStreaming=!1,e}onCameraPermissionChange(){window.dispatchEvent(new CustomEvent("gm-cameraPermissionChange"))}onMicrophonePermissionChange(){window.dispatchEvent(new CustomEvent("gm-microphopnePermissionChange"))}setTransceiverDirection(e,t){this.instance.peerConnection.getTransceivers().forEach((n=>{n.sender===e&&(n.direction=t)}))}async addAudioStream(e){if(!this.instance.peerConnection)return i.error("Could not add audio stream: connection is not ready"),!1;try{this.instance.options.microphone&&e.getAudioTracks().length>0&&(this.microphoneSender?(i.debug("Replacing audio track on sender"),await this.microphoneSender.replaceTrack(e.getAudioTracks()[0]),this.setTransceiverDirection(this.microphoneSender,"sendrecv")):this.microphoneSender=this.instance.peerConnection.addTrack(e.getAudioTracks()[0],e))}catch(e){return i.error(e),!1}return this.instance.renegotiateWebRTCConnection()}async addVideoStream(e){return this.instance.peerConnection?(e.getVideoTracks().length>0&&(this.cameraSender?(i.debug("Replacing video track on sender"),this.cameraSender.replaceTrack(e.getVideoTracks()[0]),this.setTransceiverDirection(this.cameraSender,"sendrecv")):this.cameraSender=this.instance.peerConnection.addTrack(e.getVideoTracks()[0],e)),this.videoWithMicrophone&&e.getAudioTracks().length>0&&(this.microphoneSender?(i.debug("Replacing audio track on sender"),this.microphoneSender.replaceTrack(e.getAudioTracks()[0]),this.setTransceiverDirection(this.microphoneSender,"sendrecv")):this.microphoneSender=this.instance.peerConnection.addTrack(e.getAudioTracks()[0],e)),this.instance.renegotiateWebRTCConnection()):(i.error("Could not add video stream: connection is not ready"),!1)}async removeAudioStream(e){return this.instance.peerConnection?e instanceof MediaStream&&(e.getTracks().forEach((e=>{e.stop()})),this.microphoneSender&&this.instance.peerConnection.removeTrack(this.microphoneSender),this.instance.renegotiateWebRTCConnection()):(i.error("Could not remove audio stream: connection is not ready"),!1)}async removeVideoStream(e){return this.instance.peerConnection?e instanceof MediaStream&&(e.getTracks().forEach((e=>{e.stop()})),this.cameraSender&&this.instance.peerConnection.removeTrack(this.cameraSender),this.microphoneSender&&this.videoWithMicrophone&&this.instance.peerConnection.removeTrack(this.microphoneSender),this.instance.renegotiateWebRTCConnection()):(i.error("Could not remove video stream: connection is not ready"),!1)}disconnect(){this.audioStreaming&&this.stopAudioStreaming(),this.videoStreaming&&this.stopVideoStreaming(),this.cameraSender=null,this.microphoneSender=null}}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7534:(e,t,n)=>{var i=n(2552),s=n(346);e.exports=function(e){return s(e)&&"[object Arguments]"==i(e)}},7670:(e,t,n)=>{var i=n(2651);e.exports=function(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}},7766:(e,t,n)=>{"use strict";const i=n(3065);i.setDefaultLevel("debug");const s=n(801);e.exports=class extends s{static get name(){return"Gamepad"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.gamepad=this,this.instance.addListener(window,"gm-gamepadButtonPressed",this.onGamepadButtonPressed.bind(this)),this.instance.addListener(window,"gm-gamepadButtonReleased",this.onGamepadButtonReleased.bind(this)),this.instance.addListener(window,"gm-gamepadAxis",this.onGamepadAxisChanged.bind(this)),this.instance.registerEventCallback("vinput",this.handleConfirmation.bind(this)),this.registerToolbarButton(),this.renderWidget()}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-gamepad-button",title:this.i18n.GAMEPAD_TITLE||"Gamepad",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.GAMEPAD_TITLE||"Gamepad",classes:"gm-gamepad-plugin"});this.content=document.createElement("div"),e.appendChild(this.content),this.generateContent(),this.instance.addListener(window,"gm-gamepadConnected",this.handleGamepadPlugged.bind(this)),this.instance.addListener(window,"gm-gamepadDisconnected",this.handleGamepadUnplugged.bind(this))}generateContent(){this.content.replaceChildren();const e=this.instance.gamepadManager.getGamepads();if(0===e.length)this.content.innerHTML="No gamepad detected, please plug one or press a button";else{const t=document.createElement("ul");for(const n of e)if("plugged"===n.state){const e=document.createElement("li");e.innerHTML=n.name,t.appendChild(e)}this.content.appendChild(t)}}handleGamepadPlugged(e){i.debug("Gamepad plugged");const t=e.detail;this.generateContent(),this.sendGamepadPlugEvent(t.hostIndex,t.name.split(" ").join("_"),t.vendorID,t.productID)}handleGamepadUnplugged(e){i.debug("Gamepad unplugged");const t=e.detail;this.generateContent(),this.sendGamepadUnplugEvent(t.guestIndex)}sendGamepadPlugEvent(e,t,n,i){const s={channel:"vinput",messages:["gamepad_plugin "+e+" "+t+" "+n+" "+i]};this.instance.sendEvent(s)}sendGamepadUnplugEvent(e){const t={channel:"vinput",messages:["gamepad_plugout "+e]};this.instance.sendEvent(t)}handleConfirmation(e){i.debug("Gamepad plugin confirmation");const t=e.split(" ");"gamepad_plugin_confirmation"===t[0]&&3===t.length&&this.instance.gamepadManager.listenForInputs(parseInt(t[1]),parseInt(t[2]))}onGamepadButtonPressed(e){const t={channel:"vinput",messages:["gamepad_press "+e.detail.gamepadIndex+" "+e.detail.buttonIndex]};this.instance.sendEvent(t)}onGamepadButtonReleased(e){const t={channel:"vinput",messages:["gamepad_release "+e.detail.gamepadIndex+" "+e.detail.buttonIndex]};this.instance.sendEvent(t)}onGamepadAxisChanged(e){const t={channel:"vinput",messages:["gamepad_axis "+e.detail.gamepadIndex+" "+e.detail.axisIndex+" "+e.detail.value]};this.instance.sendEvent(t)}}},7805:(e,t,n)=>{var i=n(3360),s=n(5288);e.exports=function(e,t,n){(void 0!==n&&!s(e[t],n)||void 0===n&&!(t in e))&&i(e,t,n)}},7828:(e,t,n)=>{var i=n(9325).Uint8Array;e.exports=i},7880:(e,t,n)=>{"use strict";const i=n(801),s=n(3065);s.setDefaultLevel("debug");e.exports=class extends i{static get name(){return"Screenrecord"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.screenrecord=this,this.registerToolbarButton(),this.checkForMediarecorder(),this.recordedBlobs=[],this.mediaRecorder=null,this.isRecording=!1,this.startTime=0,this.displayInterval=null,this.timerElement=null}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-screenrecord-button",title:this.i18n.SCREENRECORD_TITLE||"Screenrecord",onClick:()=>{this.onScreenrecordClick()}})}handleDataAvailable(e){e.data&&e.data.size>0&&this.recordedBlobs.push(e.data)}getExtensionFromMimeType(e){let t={"video/x-msvideo":".avi","video/mpeg":".mpeg","video/ogg":".ogv","video/webm":".webm","video/3gpp":".3gp","video/3gpp2":".3g2","video/mp4":".mp4","video/x-matroska":".mkv","video/x-flv":".f4v"}[e.toLowerCase()];return t||(s.warn("Unknown MIME type: ",e),t=".webm"),t}downloadScreenrecord(){const e=new Blob(this.recordedBlobs,{type:this.mediaRecorder.mimeType}),t=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=t,n.download="device"+this.getExtensionFromMimeType(this.mediaRecorder.mimeType),document.body.appendChild(n),n.click(),setTimeout((()=>{document.body.removeChild(n),window.URL.revokeObjectURL(t)}),100),this.isRecording=!1}checkForMediarecorder(){"undefined"==typeof MediaRecorder&&this.toolbarBtn.disable()}displayTimer(){let e=new Date-this.startTime;e/=1e3;const t=Math.round(e%60),n=Math.floor(e/60);this.timerElement&&(this.timerElement.textContent=("0"+n).slice(-2)+":"+("0"+t).slice(-2)),3===n&&this.stopRecording()}findBestMimeType(){const e=[];return["video/webm","video/x-matroska","video/mpeg","video/ogg","video/3gpp","video/3gpp2","video/mp4","video/x-flv"].forEach((t=>{MediaRecorder.isTypeSupported(t)&&e.push(t)})),e[0]}startRecording(){try{this.mediaRecorder=new MediaRecorder(this.instance.video.srcObject,{mimeType:this.findBestMimeType()})}catch(e){return void s.error("Error while creating MediaRecorder: "+e)}this.toolbarBtn.setIndicator("notification"),this.instance.root.classList.add("gm-screenrecord-recording"),this.timerElement=document.createElement("div"),this.timerElement.className="gm-screenrecord-timer",this.instance.toolbarManager.getButtonById(this.constructor.name).buttonIcon.insertAdjacentElement("afterend",this.timerElement),this.recordedBlobs=[],this.isRecording=!0,this.startTime=new Date,this.displayTimer(),this.displayInterval=setInterval(this.displayTimer.bind(this),1e3),this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(50),s.debug("MediaRecorder started",this.mediaRecorder)}stopRecording(){this.mediaRecorder.stop(),this.toolbarBtn.setIndicator(""),this.instance.root.classList.remove("gm-screenrecord-recording"),clearInterval(this.displayInterval),this.timerElement&&(this.timerElement.remove(),this.timerElement=null),this.downloadScreenrecord(),s.debug("MediaRecorder stopped",this.mediaRecorder)}onScreenrecordClick(){this.isRecording?this.stopRecording():this.startRecording()}}},7983:e=>{"use strict";e.exports=function(){const e=this;this.socket=null,this.token=null,this.hasError=!1,this.isUploading=!1,this.uploadedSize=0,this.file=null,this.address=null,this.MEGABYTE=1e6,e.getChunkSize=function(t){const n=5*e.MEGABYTE,i=75*e.MEGABYTE;return Math.max(n,Math.min(.1*t,i))},e.onOpen=function(){const t={type:"token",token:e.token};e.socket.send(JSON.stringify(t));postMessage({type:"FILE_UPLOAD",code:"SOCKET_SUCCESS"})},e.onClose=function(){setTimeout((function(){e.connect(e.address)}),1e3)},e.connect=function(t){e.socket=new WebSocket(t),e.socket.binaryType="arraybuffer",e.socket.onopen=e.onOpen,e.socket.onerror=e.onSocketFailure,e.socket.onmessage=e.onSocketMsg,e.socket.onclose=e.onClose},e.onSocketFailure=function(){e.isUploading=!1,postMessage({type:"FILE_UPLOAD",code:"SOCKET_FAIL"})},e.onFailure=function(){e.isUploading=!1,postMessage({type:"FILE_UPLOAD",code:"FAIL"})},e.uploadData=function(t){!1===e.hasError&&e.socket.send(t.target.result,{binary:!0})},e.onSocketMsg=function(t){const n=JSON.parse(t.data);if("FILE_UPLOAD"===n.type)switch(n.code){case"NEXT":if(e.uploadedSize<e.file.size){const t=e.getChunkSize(e.file.size);let n;const i=new FileReader;i.onload=e.uploadData,i.onabort=e.onFailure,i.onerror=e.onFailure,e.file.size-e.uploadedSize>t?(n=e.file.slice(e.uploadedSize,e.uploadedSize+t),e.uploadedSize+=t):(n=e.file.slice(e.uploadedSize),e.uploadedSize=e.file.size),i.readAsArrayBuffer(n)}else{const t={type:"FILE_UPLOAD",done:!0};e.socket.send(JSON.stringify(t)),e.isUploading=!1}break;case"PROGRESS":n.fileSize=(e.file.size/1024/1e3).toFixed(2),n.uploadedSize=(e.uploadedSize/1024/1e3).toFixed(2),postMessage(n);break;case"SUCCESS":postMessage(n);break;case"FAIL":e.hasError=!0,postMessage(n)}},e.cancelUpload=function(){if(e.isUploading){e.isUploading=!1,e.hasError=!1;postMessage({type:"FILE_UPLOAD",code:"CANCELED"}),e.socket&&e.socket.close()}},e.onmessage=function(t){const n=t.data;switch(n.type){case"address":e.token=n.token,e.address=n.fileUploadAddress,e.connect(e.address);break;case"close":e.isUploading=!1,e.socket&&(e.socket.onclose=null,e.socket.close());break;case"cancel":e.cancelUpload();break;case"upload":if(!e.isUploading){e.file=n.file,e.isUploading=!0,e.hasError=!1,e.uploadedSize=0;const t={type:"FILE_UPLOAD",name:e.file.name,size:e.file.size};e.socket.send(JSON.stringify(t))}}}}},8096:e=>{e.exports=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},8223:(e,t,n)=>{var i=n(6110)(n(9325),"Map");e.exports=i},8452:e=>{"use strict";e.exports=class{static get name(){return"StreamBitrate"}constructor(e,t){this.instance=e,this.instance.StreamBitrate=this,this.i18n=t||{},this.highQuality=!1,this.registerToolbarButton()}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-streamrate-chooser",title:this.i18n.STREAMRATE_TITLE||"High quality",onClick:()=>{if(this.highQuality=!this.highQuality,this.highQuality){this.toolbarBtn.setActive();const e={type:"BITRATE",videoBitrate:5e3,audioBitrate:192e3};this.instance.sendEvent(e),this.instance.renegotiateWebRTCConnection()}else{this.toolbarBtn.setActive(!1);const e={type:"BITRATE",videoBitrate:0,audioBitrate:0};this.instance.sendEvent(e),this.instance.renegotiateWebRTCConnection()}}})}}},8531:(e,t,n)=>{"use strict";const i=n(2477),s=n(4354),o=n(3908),a=n(9927),r=n(4986),l=n(4546),c=n(3065);c.setDefaultLevel("debug");const d={toolbarOrder:["ButtonsEvents_VOLUME_UP","ButtonsEvents_VOLUME_DOWN","ButtonsEvents_ROTATE","separator","unordered","separator","ButtonsEvents_RECENT_APP","ButtonsEvents_HOMEPAGE","ButtonsEvents_BACK","ButtonsEvents_POWER"],toolbarPosition:"right",floatingToolbar:!0,touch:!0,mouse:!0,volume:!0,rotation:!0,navbar:!0,power:!0,keyboard:!0,keyboardMapping:!0,fullscreen:!0,camera:!0,microphone:!1,fileUpload:!0,gappsInstall:!0,streamBitrate:!1,clipboard:!0,battery:!0,gps:!0,capture:!0,identifiers:!0,network:!0,mobilethrottling:!1,baseband:!1,phone:!0,streamResolution:!0,diskIO:!0,gamepad:!0,biometrics:!0,token:"",i18n:{},stun:{urls:["stun:stun-eu.genymotion.com:80","stun:stun-eu.genymotion.com:443","stun:stun-eu.genymotion.com:3478","stun:stun-eu.genymotion.com:5349","stun:stun-na.genymotion.com:80","stun:stun-na.genymotion.com:443","stun:stun-na.genymotion.com:3478","stun:stun-na.genymotion.com:5349"]},connectionFailedURL:"",turn:{},giveFeedbackLink:"https://github.com/orgs/Genymobile/discussions"};e.exports=class{constructor(){this.instances=[]}setupRenderer(e,t,n,h=i){"string"==typeof e&&(e=document.getElementById(e)),void 0===n&&(n={}),(n=s(n,d)).webRTCUrl=t,n.buttons=n.volume||n.rotation||n.navbar||n.power,c.debug("Creating genymotion display on "+t),e.classList.add("device-renderer-instance"),this.loadTemplate(e,n);const p=new h(e,n);return o(p),p.store.subscribe((({isWebRTCConnectionReady:e})=>{p?.wrapper&&(e?p.wrapper.classList.remove("waitingForStream"):p.wrapper.classList.add("waitingForStream"))}),["isWebRTCConnectionReady"]),p.apiManager=new a(p),p.toolbarManager=new r(p),p.tooltipManager=new l(p),this.instances.push(p),this.loadPlugins(p),this.loadToolbar(p),p.onWebRTCReady(),p.apiManager.getExposedApiFunctions()}loadTemplate(e,t){e.innerHTML=`\n        <div class="gm-wrapper waitingForStream ${t.showPhoneBorder?"phoneBorder":""} \n        ${t.floatingToolbar?"floatingBarDisplayed":""}\n        toolbarPosition-${t.toolbarPosition}">\n            <div class="player-screen-wrapper">\n                <div class="gm-video-wrapper">\n                    <video class="gm-video" autoplay preload="none">Your browser does not support the VIDEO tag</video>\n                    ${t.showPhoneBorder?'<div class="gm-phone-button"></div><div class="gm-phone-border"></div>':""}\n                </div>\n                ${t.floatingToolbar?'<div class="gm-floating-toolbar-wrapper"><div class="gm-floating-toolbar"><ul></ul></div></div>':""}\n            </div>\n            <div class="gm-toolbar-wrapper">\n                <div class="gm-toolbar">\n                    <ul></ul>\n                </div>\n            </div>\n        </div>\n        `}loadPlugins(e){const t=[];if("function"==typeof e.getPlugins){const n=e.getPlugins();Array.isArray(n)&&t.push(...n)}const n=new Map;t.forEach((t=>{const i=t.params||[];t.enabled&&(t.dependencies&&t.dependencies.forEach((t=>{n.has(t)||(new t(e),n.set(t,!0))})),t.class&&new t.class(e,...i))}))}loadToolbar(e){const{toolbarOrder:t,floatingToolbar:n}=e.options,i=new Map(t.map(((e,t)=>[e,t]))),s=[],o=[];e.toolbarManager.buttonRegistry.forEach(((e,t)=>{const n=i.get(t);void 0!==n?s.push({key:t,value:e,order:n}):o.push({key:t,value:e})})),t.forEach(((e,t)=>{"separator"===e&&s.push({key:`separator-${t}`,value:"separator",order:t})})),s.sort(((e,t)=>e.order-t.order));const a=[];if(t.includes("unordered")){const e=t.findIndex((e=>"unordered"===e));a.push(...s.slice(0,e),...o,...s.slice(e))}else a.push(...s,...o);if(n){const t=["ButtonsEvents_ROTATE","separator","Screenshot","separator","Screenrecord","separator","Fullscreen"],n=a.filter((e=>!t.includes(e.key)));a.length=0,a.push(...n),t.forEach((t=>{"separator"===t?e.toolbarManager.renderSeparator(!0):e.toolbarManager.renderButton(t,!0)}))}a.forEach((({key:t,value:n})=>{"separator"===n?e.toolbarManager.renderSeparator():e.toolbarManager.renderButton(t)}))}}},8655:(e,t,n)=>{var i=n(6025);e.exports=function(e){return i(this.__data__,e)>-1}},8841:e=>{"use strict";e.exports=[{id:4,name:"great",label:"Great"},{id:3,name:"good",label:"Good"},{id:2,name:"moderate",label:"Moderate"},{id:1,name:"poor",label:"Poor"},{id:0,name:"none",label:"None"}]},8879:(e,t,n)=>{var i=n(4335)(Object.getPrototypeOf,Object);e.exports=i},9106:(e,t,n)=>{"use strict";const i=n(801);n(3065).setDefaultLevel("debug"),e.exports=class extends i{static get name(){return"Camera"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.camera=this,this.registerToolbarButton()}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:this.instance.options.microphone?"gm-camera-mic-button":"gm-camera-button",title:this.instance.options.microphone?this.i18n.CAMERA_MIC_TITLE||"Camera and microphone injection":this.i18n.CAMERA_TITLE||"Camera injection",onClick:async()=>{await this.instance.mediaManager.toggleVideoStreaming(),this.instance.mediaManager.videoStreaming?this.toolbarBtn.setIndicator("active"):this.toolbarBtn.setIndicator("")}})}enable(){RTCRtpSender.getCapabilities("video").codecs.some((e=>"video/H264"===e.mimeType))?super.enable():this.toolbarBtn.disable()}}},9286:e=>{"use strict";e.exports=[{name:"None",label:"(No disk performance alteration)",readByteRate:0},{name:"High-end device",label:"(200 MiB per second)",readByteRate:200},{name:"Mid-range device",label:"(100 MiB per second)",readByteRate:100},{name:"Low-end device",label:"(50 MiB per second)",readByteRate:50},{name:"Custom"}]},9302:(e,t,n)=>{var i=n(3488),s=n(6757),o=n(2865);e.exports=function(e,t){return o(s(e,t,i),e+"")}},9325:(e,t,n)=>{var i=n(4840),s="object"==typeof self&&self&&self.Object===Object&&self,o=i||s||Function("return this")();e.exports=o},9344:(e,t,n)=>{var i=n(3805),s=Object.create,o=function(){function e(){}return function(t){if(!i(t))return{};if(s)return s(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9413:(e,t,n)=>{"use strict";const i=n(801),{textInput:s,chipTag:o}=n(2852),{slider:a}=n(2852),r=n(3065);e.exports=class extends i{static get name(){return"GPS"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.instance.gps=this,this.inputComponents={altitude:null,longitude:null,latitude:null,accuracy:null,bearing:null},this.inputComponents.speed=null,this.map=null,"undefined"!=typeof google?this.elevationService=new google.maps.ElevationService:this.elevationService=!1,this.markers=[],this.mapLat=65.9667,this.mapLng=-18.5333,this.elevation=15.04444408,this.minimumZoomLevel=8,this.registerToolbarButton(),this.renderWidget(),this.loadMap(),this.checkLocationPermission(),this.instance.registerEventCallback("gps",(e=>{const t=e.split(" ");Object.keys(this.inputComponents).includes(t[0])&&t.length>=2&&this.setFieldValue(t[0],t[1]),this.container.classList.add("gm-gps-saved")}))}registerToolbarButton(){this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-gps-button",title:this.i18n.GPS_TITLE||"GPS",onClick:this.toggleWidget.bind(this)})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.GPS_TITLE||"GPS",classes:"gm-gps-plugin",width:498,height:850});this.container=e,this.mapview=document.createElement("div"),this.mapview.className="gm-mapview";const t=document.createElement("div");t.className="gm-gps-setToMyPosition-wrapper",this.setToMyPositionBtn=document.createElement("button"),this.setToMyPositionBtn.className="gm-btn gm-gps-setToMyPosition",this.setToMyPositionBtn.innerHTML=this.i18n.GPS_SET_TO_MY_POSITION||"Set to my position",this.setToMyPositionBtn.onclick=this.getLocation.bind(this),t.appendChild(this.setToMyPositionBtn),this.container.appendChild(this.mapview),this.container.appendChild(t);const n=document.createElement("div");n.className="gm-separator",this.container.appendChild(n);const i=document.createElement("form"),r=document.createElement("div");r.className="gm-section";const l=document.createElement("div");l.className="gm-section-line gm-gps-section-line";const c=document.createElement("div");c.className="gm-input-wrap";const d=document.createElement("label");d.innerHTML=this.i18n.GPS_LATITUDE||"Latitude",c.appendChild(d),this.inputComponents.latitude=s.createTextInput({value:this.mapLat.toString(),regexFilter:/^-?\d*\.?\d*$/,regexValidField:/^-?(?:[0-8]?\d(?:\.\d*)?|90(?:\.0*)?)$/,messageField:!0,unitText:"o",onChange:()=>{this.inputComponents.latitude.checkValidity()?this.inputComponents.latitude.setErrorMessage(""):this.inputComponents.latitude.setErrorMessage("Between -90 and 90"),this.checkErrors(),this.clearMarkers(),this.addMapMarker(this.inputComponents.latitude.getValue(),this.inputComponents.longitude.getValue())}}),c.appendChild(this.inputComponents.latitude.element);const h=document.createElement("div");h.className="gm-input-wrap";const p=document.createElement("label");p.innerHTML=this.i18n.GPS_LONGITUDE||"Longitude",h.appendChild(p),this.inputComponents.longitude=s.createTextInput({value:this.mapLng.toString(),regexFilter:/^-?\d*\.?\d*$/,regexValidField:/^-?(?:(?:1[0-7]\d(?:\.\d*)?)|(?:[0-9]?\d(?:\.\d*)?)|180(?:\.0*)?)$/,messageField:!0,unitText:"o",onChange:()=>{this.inputComponents.longitude.checkValidity()?this.inputComponents.longitude.setErrorMessage(""):this.inputComponents.longitude.setErrorMessage("Between -180 and 180"),this.checkErrors(),this.clearMarkers(),this.addMapMarker(this.inputComponents.latitude.getValue(),this.inputComponents.longitude.getValue())}}),h.appendChild(this.inputComponents.longitude.element),l.appendChild(c),l.appendChild(h),r.appendChild(l);const u=document.createElement("div");u.className="gm-section-line gm-gps-section-line";const m=document.createElement("div");m.className="gm-input-wrap";const g=document.createElement("label");g.innerHTML=this.i18n.GPS_ALTITUDE||"Altitude",m.appendChild(g),this.inputComponents.altitude=s.createTextInput({value:this.elevation.toString(),regexFilter:/^-?\d*\.?\d*$/,regexValidField:/^-?(?:[0-9]\d{0,3}(?:\.\d*)?|10000(?:\.0*)?)$/,messageField:!0,unitText:"m",onChange:()=>{this.inputComponents.altitude.checkValidity()?this.inputComponents.altitude.setErrorMessage(""):this.inputComponents.altitude.setErrorMessage("Between -10,000 and 10,000"),this.checkErrors()}}),m.appendChild(this.inputComponents.altitude.element);const b=document.createElement("div");b.className="gm-input-wrap";const v=document.createElement("label");v.innerHTML=this.i18n.GPS_ACCURACY||"Accuracy",b.appendChild(v);const E=document.createElement("div");E.className="gm-gps-accuracy-input-wrapper",this.accuracySlider=a.createSlider({min:0,max:200,value:0,classes:"gm-gps-accuracy-slider",onChange:e=>{this.inputComponents.accuracy.setValue(e),this.checkErrors()},onCursorMove:e=>{this.inputComponents.accuracy.setValue(e),this.checkErrors()}}),E.appendChild(this.accuracySlider.element),this.inputComponents.accuracy=s.createTextInput({classes:"gm-gps-accuracy-input",value:"0",regexFilter:/^$|^(0?[0-9]{1,2}|1[0-9]{2}|200)$/,regexValidField:/^$|^(0?[0-9]{1,2}|1[0-9]{2}|200)$/,unitText:"m",onChange:e=>{const t=parseFloat(e)||0;this.accuracySlider.setValue(t),this.checkErrors()},onBlur:e=>{""===e&&(this.inputComponents.accuracy.setValue("0"),this.accuracySlider.setValue(0))}}),E.appendChild(this.inputComponents.accuracy.element),b.appendChild(E),u.appendChild(m),u.appendChild(b),r.appendChild(u);const C=document.createElement("div");if(C.className="gm-section-line gm-gps-section-line",Object.keys(this.inputComponents).includes("speed")){const e=document.createElement("div");e.className="gm-input-wrap";const t=document.createElement("label");t.innerHTML=this.i18n.GPS_SPEED||"Speed",e.appendChild(t),this.inputComponents.speed=s.createTextInput({value:"0",regexFilter:/^-?\d*\.?\d*$/,regexValidField:/^(?:[0-9]|[1-9][0-9]|[1-3][0-9]{2})(?:\.\d{0,2})?$/,messageField:!0,unitText:"m/s",onChange:()=>{this.inputComponents.speed.checkValidity()?this.inputComponents.speed.setErrorMessage(""):this.inputComponents.speed.setErrorMessage("Between 0 and 399.99"),this.checkErrors()}}),e.appendChild(this.inputComponents.speed.element),C.appendChild(e)}const f=document.createElement("div");f.className="gm-input-wrap";const y=document.createElement("label");y.innerHTML=this.i18n.GPS_BEARING||"Bearing",f.appendChild(y);const T=document.createElement("div");T.className="gm-gps-bearing-input-wrapper",this.bearingSlider=a.createSlider({min:0,max:360,value:0,classes:"gm-gps-bearing-slider",onChange:e=>{this.inputComponents.bearing.setValue(e),this.checkErrors()},onCursorMove:e=>{this.inputComponents.bearing.setValue(e),this.checkErrors()}}),T.appendChild(this.bearingSlider.element),this.inputComponents.bearing=s.createTextInput({value:"0",classes:"gm-gps-bearing-input",regexFilter:/^$|^(0?[0-9]{1,2}|[1-2][0-9]{2}|3[0-5][0-9]|360)$/,regexValidField:/^$|^(0?[0-9]{1,2}|[1-2][0-9]{2}|3[0-5][0-9]|360)$/,messageField:!0,unitText:"o",onChange:e=>{const t=parseFloat(e)||0;this.bearingSlider.setValue(t),this.checkErrors()},onBlur:e=>{""===e&&(this.inputComponents.bearing.setValue("0"),this.accuracySlider.setValue(0))}}),T.appendChild(this.inputComponents.bearing.element),f.appendChild(T),C.appendChild(f),r.appendChild(C),i.appendChild(r);const w=document.createElement("div");w.className="gm-actions";const S=o.createChip();w.appendChild(S.element),this.submitBtn=document.createElement("button"),this.submitBtn.innerHTML=this.i18n.GPS_APPLY||"Apply",this.submitBtn.className="gm-btn gm-gps-update",this.submitBtn.onclick=this.sendDataToInstance.bind(this),this.submitBtn.disabled=!0,w.appendChild(this.submitBtn),this.container.appendChild(i);const x=document.createElement("div");x.className="gm-separator",this.container.appendChild(x),this.container.appendChild(w)}checkErrors(){this.container.classList.remove("gm-gps-saved");const e=Object.keys(this.inputComponents).some((e=>!this.inputComponents[e].checkValidity()));this.submitBtn.disabled=e}setFieldValue(e,t){t=Number(t),!Number.isNaN(t)&&this.inputComponents[e]&&this.inputComponents[e].setValue(t.toString(),!0)}sendDataToInstance(e){if(e.preventDefault(),this.submitBtn.disabled)return;const t={channel:"gps",messages:[]},n=this.getLocationInfo();for(const e of Object.keys(this.inputComponents))e in n&&t.messages.push("set "+e+" "+n[e]);t.messages.length&&(t.messages.push("enable"),this.instance.sendEvent(t),this.container.classList.add("gm-gps-saved"))}async checkLocationPermission(){try{this.permissionStatus=await navigator.permissions.query({name:"geolocation"}),"denied"===this.permissionStatus.state?this.setToMyPositionBtn.disabled=!0:this.setToMyPositionBtn.disabled=!1,this.instance.addListener(this.permissionStatus,"change",(()=>{"granted"===this.permissionStatus.state?this.setToMyPositionBtn.disabled=!1:this.setToMyPositionBtn.disabled=!0}))}catch(e){r.error("Error while asking permission: ",e)}}getLocationInfo(){const e={};for(const t of Object.keys(this.inputComponents)){const n=this.inputComponents[t];if(!n)continue;const i=Number(n.getValue());Number.isNaN(i)||(e[t]=i)}return e}async getLocation(){if(navigator.geolocation){this.permissionStatus||await this.checkLocationPermission();try{this.setToMyPositionBtn.classList.add("gm-gps-setToMyPosition-loading"),this.setToMyPositionBtn.disabled=!0;const e=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)}));if(this.setToMyPositionBtn.classList.remove("gm-gps-setToMyPosition-loading"),this.setToMyPositionBtn.disabled=!1,!e||!e.coords)return;if(Object.keys(this.inputComponents).forEach((t=>{e.coords[t]&&this.setFieldValue(t,e.coords[t])})),!e.coords.altitude&&this.elevationService&&e.coords.latitude&&e.coords.longitude){const t=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),n=await this.elevationService.getElevationForLocations({locations:[t]});"OK"===n.status&&n[0]&&this.setFieldValue("altitude",n[0].elevation)}this.map&&(this.clearMarkers(),this.addMapMarker(e.coords.latitude,e.coords.longitude,!0),this.map.setCenter({lat:e.coords.latitude,lng:e.coords.longitude}))}catch(e){1===e.code&&(this.setToMyPositionBtn.disabled=!0,this.setToMyPositionBtn.classList.remove("gm-gps-setToMyPosition-loading")),r.error("Error getting location:",e)}}}loadMap(){const e=this.getLocationInfo();"undefined"==typeof google&&(this.mapview.classList.add("gmaps-disabled"),this.mapview.innerHTML="Enable Google Maps with a valid API key to view the map."),"undefined"!=typeof google&&(this.map=new google.maps.Map(this.mapview,{center:{lat:e.latitude,lng:e.longitude},zoom:this.minimumZoomLevel,streetViewControl:!1,mapTypeControl:!1}),this.addMapMarker(e.latitude,e.longitude),this.map.addListener("click",(e=>{this.clearMarkers(),this.addMapMarker(e.latLng.lat(),e.latLng.lng(),!0)})))}addMapMarker(e,t,n=!1){if("undefined"==typeof google)return;const i=Number(e),s=Number(t),o=Number(this.inputComponents.latitude.getValue()),a=Number(this.inputComponents.longitude.getValue()),r=new google.maps.Marker({position:{lat:i,lng:s},map:this.map});if(this.markers.push(r),o!==i&&this.setFieldValue("latitude",i),a!==s&&this.setFieldValue("longitude",s),this.elevationService&&n){const e=new google.maps.LatLng(i,s);this.elevationService.getElevationForLocations({locations:[e]},((e,t)=>{if("OK"===t&&e&&e[0]){const t=Number(this.inputComponents.altitude.getValue()),n=Number(e[0].elevation);t!==n&&this.setFieldValue("altitude",n)}}))}if(this.map){const e=this.map.getZoom();this.map.setCenter(r.getPosition()),e<this.minimumZoomLevel&&this.map.setZoom(this.minimumZoomLevel)}}clearMarkers(){this.markers.forEach((e=>{e.setMap(null)})),this.markers=[]}}},9570:(e,t,n)=>{var i=n(7334),s=n(3243),o=n(3488),a=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:o;e.exports=a},9653:(e,t,n)=>{var i=n(7828);e.exports=function(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}},9814:(e,t,n)=>{"use strict";const i=n(801),s=n(3065),o=n(5808);e.exports=class extends i{static get name(){return"FileUpload"}constructor(e,t){super(e),this.instance=e,this.i18n=t||{},this.fileUploadWorker=null,this.removeListenerDragAndDropOver=null,this.removeListenerDragAndDropLeave=null,this.removeListenerDragAndDropDrop=null,this.registerToolbarButton(),this.renderWidget();try{this.fileUploadWorker=this.instance.createFileUploadWorker(),this.fileUploadWorker.onmessage=e=>{const t=e.data;switch(t.code){case"SUCCESS":this.fileUploader.showUploadSuccess(),this.instance.store.getters.isWidgetOpened(this.overlayID)||this.toolbarBtn.setIndicator("success");break;case"FAIL":this.fileUploader.uploadingStop(),this.fileUploader.showUploadError(this.i18n.FILE_SEND_FAILED||"Something went wrong while processing the file. \n                                Please make sure the file is valid and try again."),this.instance.store.getters.isWidgetOpened(this.overlayID)||this.toolbarBtn.setIndicator("failed");break;case"PROGRESS":this.fileUploader.updateProgress(100*t.value,t.uploadedSize,t.fileSize);break;case"SOCKET_FAIL":this.fileUploader.showUploadError(this.i18n.FILE_UPLOAD_CONNECTION_FAILED||"Something went wrong while connecting to the server."),this.fileUploader.setEnabled(!1);break;case"SOCKET_SUCCESS":this.fileUploader.reset()}}}catch(e){s.error(e,this.toolbarBtn),this.toolbarBtn.disable(),this.instance.tooltipManager.setTooltip(this.toolbarBtn.htmlElement,t.ERROR_ON_LOAD_FILE_UPLOAD||"Upload worker can't be load, check the fileUploadUrl option","right"===this.instance.options.toolbarPosition?"left":"right")}}registerToolbarButton(){this.toolbarBtn=this.instance.toolbarManager.registerButton({id:this.constructor.name,iconClass:"gm-uploader-button",title:this.i18n.UPLOADER_TITLE||"File upload",onClick:()=>{!this.instance.store.getters.isWidgetOpened(this.overlayID)&&["success","failed"].includes(this.toolbarBtn.getIndicator())&&this.toolbarBtn.setIndicator(""),this.toggleWidget()}})}renderWidget(){const{container:e}=this.createTemplateModal({title:this.i18n.UPLOADER_TITLE||"File upload",classes:"gm-uploader-plugin",width:498,height:624}),t=document.createElement("div");t.className="file-upload-view-container";const n=document.createElement("div");n.className="gm-section";const i=document.createElement("div");i.className="gm-text",i.innerHTML=this.i18n.FILE_UPLOAD_TEXT||"You can upload files from here.\n             Application (APK) files and flashable ZIP archives will be installed;\n             other file types will be copied to the Download folder (/sdcard/Download) on the device.",n.appendChild(i);const s=document.createElement("div");return s.className="gm-section",this.fileUploader=o.createFileUploader({onFileSelect:e=>{this.toolbarBtn.setIndicator("notification"),this.instance.store.dispatch({type:"DRAG_AND_DROP_UPLOAD_FILE_ENABLED",payload:!1}),this.instance.root.classList.add("gm-uploading-in-progess");const t={type:"upload",file:e};this.fileUploadWorker.postMessage(t)},onUploadCanceled:()=>{this.fileUploadWorker.postMessage({type:"cancel"})},onUploadComplete:()=>{this.instance.store.dispatch({type:"DRAG_AND_DROP_UPLOAD_FILE_ENABLED",payload:!0}),this.toolbarBtn.setIndicator(""),this.instance.root.classList.remove("gm-uploading-in-progess")},dragDropText:this.i18n.DRAG_DROP_TEXT||"DRAG & DROP YOUR FILE",browseButtonText:this.i18n.BROWSE_BUTTON_TEXT||"BROWSE",i18n:this.i18n}),s.appendChild(this.fileUploader.element),t.appendChild(n),t.appendChild(s),e.appendChild(t),this.instance.store.state.isDragAndDropForUploadFileEnabled?(this.fileUploader.setEnabled(!0),this.addListenerOnRoot()):(this.fileUploader.setEnabled(!1),this.removeListenerOnRoot()),this.instance.store.subscribe((({isDragAndDropForUploadFileEnabled:e})=>{e?(this.fileUploader.setEnabled(!0),this.addListenerOnRoot()):(this.fileUploader.setEnabled(!1),this.removeListenerOnRoot())}),["isDragAndDropForUploadFileEnabled"]),e}addListenerOnRoot(){this.removeListenerDragAndDropOver=this.instance.addListener(this.instance.root,"dragover",(e=>{e.preventDefault(),e.stopPropagation()})),this.removeListenerDragAndDropLeave=this.instance.addListener(this.instance.root,"dragleave",(e=>{e.preventDefault(),e.stopPropagation()})),this.removeListenerDragAndDropDrop=this.instance.addListener(this.instance.root,"drop",(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.files[0].name.toLowerCase().endsWith(".apk")||this.fileUploader.startUpload(e.dataTransfer.files[0])}))}removeListenerOnRoot(){this.removeListenerDragAndDropOver?.(),this.removeListenerDragAndDropDrop?.(),this.removeListenerDragAndDropLeave?.()}}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},9884:(e,t,n)=>{var i=n(1791),s=n(7241);e.exports=function(e){return i(e,s(e))}},9927:e=>{"use strict";e.exports=class{constructor(e){this.instance=e,this.apiFunctions={},this.registerFunction({name:"sendData",category:"VM_communication",fn:e=>{this.instance.sendEvent(e)},description:'Send data to the instance using WebSocket messages. The data must be a JSON object. Example usage: {type: "MOUSE_PRESS", x: 100, y: 100}'}),this.registerFunction({name:"addEventListener",category:"VM_communication",fn:(e,t)=>this.instance.registerEventCallback(e,t),description:"Add an event listener for WebSocket messages from the instance. The listener will be triggered whenever the specified event occurs."}),this.registerFunction({name:"disconnect",category:"VM_communication",fn:()=>{this.instance.destroy()},description:"Disconnect from the current instance, clearing all registered listeners and ending the WebSocket communication."}),this.registerFunction({name:"getRegisteredFunctions",category:"utils",fn:()=>this.getRegisteredFunctions(),description:"Retrieve a list of all registered API functions with their descriptions."}),this.registerFunction({name:"enableTrackEvents",category:"analytics",fn:e=>{this.instance.store.dispatch({type:"ENABLE_TRACKED_EVENTS",payload:e}),e||this.instance.store.dispatch({type:"FLUSH_TRACKED_EVENTS"})},description:"Enable or disable the tracking of analytic events. If disabled, all tracked events will be cleared."}),this.registerFunction({name:"openWidget",category:"widget",fn:e=>{this.instance.store.dispatch({type:"OVERLAY_OPEN",payload:{overlayID:e,toOpen:!0}})},description:"Open the modal of a widget by specifying its constructor name."}),this.registerFunction({name:"closeWidget",category:"widget",fn:e=>{this.instance.store.dispatch({type:"OVERLAY_OPEN",payload:{overlayID:e,toOpen:!1}})},description:"Close the modal of a widget by specifying its constructor name."}),this.registerFunction({name:"trackEvents",category:"analytics",fn:e=>{this.instance.store.subscribe((({trackedEvents:t})=>{this.instance.store.state.trackedEvents.events.length&&(e([...t.events]),this.instance.store.dispatch({type:"FLUSH_TRACKED_EVENTS"}))}),["trackedEvents.events"])},description:"Invoke a callback function with an array of tracked events. This function is called whenever a new event is recorded."})}registerFunction({name:e,category:t="global",fn:n,description:i=""}){if(this.apiFunctions[`${t}_${e}`])throw new Error(`Function ${e} for category ${t} is already registered.`);this.apiFunctions[`${t}_${e}`]={fn:n,category:t,description:i,name:e}}getRegisteredFunctions(){return Object.entries(this.apiFunctions).reduce(((e,t)=>(e[t[1].name]=t[1].description,e)),{})}getExposedApiFunctions(){return Object.entries(this.apiFunctions).reduce(((e,t)=>{const{name:n,category:i,fn:s}=t[1];return e[i]||(e[i]={}),e[i][n]=s,e}),{})}}},9935:e=>{e.exports=function(){return!1}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(6954)})()));